<!DOCTYPE html>
<html lang="ko">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<link rel="icon" href="/static/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
<!-- <link rel="stylesheet" href="/static/bootstrap/css/bootstrap-theme.min.css"> -->
<!-- <link rel="stylesheet" href="/static/bootstrap/css/dashboard.css"> -->
<!-- <link rel="stylesheet" href="/static/bootstrap/css/bootstrap-datepicker.css"> -->
<!-- <link rel="stylesheet" href="/static/fontawesome/css/all.css"> -->
<!-- <link rel="stylesheet" href="/static/css/ax5/ax5grid.css" /> -->
<!-- <link rel="stylesheet" href="/static/css/ax5/ax5mask.css" /> -->
<!-- <link rel="stylesheet" href="/static/css/ax5/ax5modal.css" /> -->
<!-- <link rel="stylesheet" href="/static/css/ax5/ax5toast.css" /> -->
<!-- <link rel="stylesheet" href="/static/css/jstree/style.min.css" /> -->
<link rel="stylesheet" href="/static/css/gnb.css" />
<link rel="stylesheet" href="/static/css/main.css" />
<link rel="stylesheet" href="/static/mobile/css/sub.css" />
<link rel="stylesheet" href="/static/css/common.css" />
<link rel="stylesheet" href="/static/css/mobile.css" />

<script src="/static/js/jquery-latest.min.js"></script>
<script src="/static/js/jquery.serializeObject.js"></script>
<script src="/static/bootstrap/js/bootstrap.min.js"></script>
<!-- <script src="/static/bootstrap/js/bootstrap-datepicker.min.js"></script> -->
<!-- <script src="/static/bootstrap/js/bootstrap-datepicker.ko.min.js"></script> -->
<script src="/static/js/moment/moment-with-locales.js"></script>
<!-- <script src="/static/js/ax5/ax5core.min.js"></script> -->
<!-- <script src="/static/js/ax5/ax5grid.min.js"></script> -->
<!-- <script src="/static/js/ax5/ax5mask.min.js"></script> -->
<!-- <script src="/static/js/ax5/ax5modal.min.js"></script> -->
<!-- <script src="/static/js/ax5/ax5toast.min.js"></script> -->
<!-- <script src="/static/js/jstree/jstree.min.js"></script> -->
<script src="/static/js/global.js"></script>
<!-- <script src="/static/js/fileTree.js"></script> -->
<!-- 공통결재 -->
<script src="/static/js/commApprovalMobile.js"></script>
<style type="text/css">
body {
    background-color: #f4f4f4;
    font-family: 'Apple SD Gothic Neo', sans-serif;
}

/* 타이틀 스타일 */
.tit {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 45px;
    background-color: rgb(48, 74, 138);
    color: white;
    font-weight: bold;
    font-size: 17px;
    border-radius: 4px;
    margin-bottom: 8px;
}

/* 그레이 테이블 */
.table_input {
    width: 100%;
    border-collapse: collapse;
    background-color: #f9f9f9;
    border: 1px solid #ddd;
    border-radius: 6px;
}

.table_input tr {
    border-bottom: 1px solid #e0e0e0;
}

.table_input th,
.table_input td {
    padding: 6px 8px; /* 줄 간격 줄임 */
    font-size: 13.5px;
    line-height: 1.2;
}

.table_input th {
    background-color: #f1f1f1;
    color: #333;
    text-align: left;
    width: 25%;
    font-weight: 600;
}

.table_input td {
    background-color: #ffffff;
    color: #222;
    vertical-align: middle;
}

/* 입력 필드 */
input[type="text"], textarea {
    width: 100%;
    padding: 4px 6px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 13.5px;
    line-height: 1.2;
}

/* 읽기 전용 필드 색상 */
input[disabled], textarea[readonly] {
    background-color: #f5f5f5;
    color: #555;
}

/* 강조 필드 */
/* textarea[readonly], td > input[disabled] { */
/*     font-weight: bold; */
/*     color: #007bff; */
/* } */

/* 간격용 td 높이 축소 */
td[style*="height"] {
    height: 6px !important;
    padding: 0 !important;
}
</style>

</head>

<body>
	<div id="head_area" class="off">
		<div class="left_btn" onclick="history.back(-1)">
			<a class="back_btn"></a>
		</div>
		<h1 class="logo">
			<img src="/static/img/Logo_gunyangitt.gif" alt="건양ITT" />
		</h1>
	</div>
	<div id="main_area">
		
		<div class="contents search">
			<form id="mForm">
				<input type="hidden" id="pgmId" name="pgmId" value="M_TODO_VIEW">	
				<div class="tit"> 타이틀은 가운데</div>			
				<table class="table_input">
                    <colgroup>
                    <col width="25%">
                    <col width="75%">
                    </colgroup>

                <tr>
                  <td style="height: 20px;"></td>
                </tr>               
				<tr>
				<th>구분</th>
				<td style="text-align: left; ">
                    <input type="text" id="todoDiv1CodeNm" name="todoDiv1CodeNm" disabled>
                </td>
				</tr>
				<tr>
                  <td colspan="2" style="height: 5px;"></td>
                </tr>
				<tr>
                <th>발생프로그램</th>
                <td>
                    <input type="text" id="todoDiv2CodeNm" name="todoDiv2CodeNm" disabled>
                </td>
                </tr>
                <tr>
                  <td colspan="2" style="height: 5px;"></td>
                </tr>
                <tr>
                <th>SALES CODE</th>
                <td>
                    <input type="text" id="salesCd" name="salesCd" disabled>
                </td>
                </tr>
                <tr>
                  <td colspan="2" style="height: 5px;"></td>
                </tr>
                <tr>
                <th>관리번호</th>
                <td>
                    <input type="text" id="todoNo" name="todoNo" disabled>
                </td>
                </tr>
                <tr>
                  <td colspan="2" style="height: 5px;"></td>
                </tr>
                <tr>
                <th>내용</th>
                <td>
                    <textarea id="todoTitl" name="todoTitl"  rows="3"  readonly ></textarea> 
                </td>
                </tr>
                <tr>
                  <td colspan="2" style="height: 5px;"></td>
                </tr>
<!--                 <tr> -->
<!--                 <th style=" width: 15%; font-size: 14.8px; font-weight: bold; color: #000000;">대상자명</th> -->
<!--                 <td> -->
<!--                     <input type="text" id="todoNm" name="todoNm" disabled> -->
<!--                 </td> -->
<!--                 </tr> -->
<!--                 <tr> -->
<!--                   <td colspan="2" style="height: 5px;"></td> -->
<!--                 </tr> -->
<!--                 <tr> -->
<!--                 <th>확인일자</th> -->
<!--                 <td> -->
<!--                     <input type="text" id="todoCfDt" name="todoCfDt" disabled> -->
<!--                 </td> -->
<!--                 </tr> -->
<!--                 <tr> -->
<!--                   <td colspan="2" style="height: 5px;"></td> -->
<!--                 </tr> -->
<!--                 <tr> -->
<!--                 <th>확인의견</th> -->
<!--                 <td> -->
<!--                     <textarea id="todoCfOpn" name="todoCfOpn" rows="3" disabled style="color: blue; font-weight: bold;border-width:1px;border-color:gray;" readonly ></textarea>  -->
<!--                 </td> -->
<!--                 </tr> -->
                <tr>
                  <td colspan="2" style="height: 5px;"></td>
                </tr>
                <tr>
                <th>요청자</th>
                <td>
                    <input type="text" id="creatNm" name="creatNm" disabled>
                </td>
                </tr>
                <tr>
                  <td colspan="2" style="height: 5px;"></td>
                </tr>
                 <tr>
                <th>요청일자</th>
                <td>
                    <input type="text" id="creatDttm" name="creatDttm" disabled>
                </td>
                </tr>
                <tr>
                  <td colspan="2" style="height: 5px;"></td>
                </tr>
				</table>
				
<!-- 				<div class ="popup_bottom_btn"> -->
<!--                    <button type="button" class="close_btn" style="height: 40px;  width: 90px;" onclick="history.back(-1);">닫기</button> -->
<!--                 </div> -->
			</form>

		    <div class="contents search">     
		        <table class="table_input">
		            <tr>
						<!-- todo 결재 -->
						<div align="center" style="width: 100%; height: 30%;">
							<div id="wbsPopup" class="popup_area">
								<!-- 결제창 -->
								<div id="approval_area"></div>
							</div>
						</div>  
		            </tr>
		        </table>    
			</div>         
		</div>
	</div>
</body>

<script type="text/javascript">
	var todoFileTrgtKey = null;
	var sanctnSn = null;
	var coCd = null;
	var salesCd = null;
	var todoDiv1CodeId = "TODODIV20";
	var todoDiv2CodeId = "TODODIV2020";

	
	function getParams() {
		var url = window.location.search.replace('?', '');
		var params = {};
		var urlArray = url.split('&');

		for ( var i in urlArray) {
			var param = urlArray[i].split('=');
			params[param[0]] = param[1];
		}
		return params;
	}
	
	/*todo 결재*/
	var btnApproval = null;
	//div area id 
	var htmlParam = {
		htmlArea : "approval_area"
	};

	//세션에 정보를 활용하여 승인처리3
	//JSON.parse : JSON.stringify를 받을 때 / 문자열-> 자바스크립트로 변환
	var paramObj = JSON.parse(sessionStorage.getItem('paramObj'));
	//sessionStorage.removeItem('paramObj');제거??
	if (paramObj && paramObj != "undefined") {
		//to-do 에서 넘어온 param;
		var popParam = paramObj;
		//추가로 넣어줄 param
		var approvalParam = {
			coCd : paramObj.coCd,
			todoDiv1CodeId : paramObj.todoDiv1CodeId,
			todoDiv2CodeId : paramObj.todoDiv2CodeId,
			pgmId : paramObj.pgmId
		};
		//삭제할 키가 있으면 쓴다.
		delete popParam.sanctnSn;
		delete popParam.pgmId;
		var commApproval = new Approval(htmlParam, approvalParam, popParam);
		commApproval.makeHtml();
	} else {
		window.history.back();
	}

	/*todo 결재*/
	
	$(document).ready(
			
			function() {
				var today = new Date();
				var strDate = today.getFullYear() + "-"
						+ ('0' + (today.getMonth() + 1)).slice(-2) + "-"
						+ ('0' + today.getDate()).slice(-2);
				$('#todoCfDt').val(strDate);

	               postAjaxSync("/user/wb/wb20/selectMobileTodoSelect", paramObj, null, function(data){	            	   
	                   var list = data.result;
	                   if (list != undefined) {
	                       $.each(list, function (key, val) {  
	                           if ($('#mForm #' + key)[0]) { 	                        	   
	                               if (key == "todoDiv2CodeNm"){
	                                   $('.tit').text(val +' 보기');                             
	                               }
	                               $('#mForm #' + key).val(val);
	                            }
	                       });           
	                   }
	               }); 

			});

</script>

</html>