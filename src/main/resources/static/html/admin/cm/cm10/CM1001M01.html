<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" href="/static/favicon.ico" type="image/x-icon">
	<link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="/static/bootstrap/css/bootstrap-theme.min.css">
	<link rel="stylesheet" href="/static/bootstrap/css/dashboard.css">
	<link rel="stylesheet" href="/static/bootstrap/css/bootstrap-datepicker.css">
	<link rel="stylesheet" href="/static/fontawesome/css/all.css">
	<link rel="stylesheet" href="/static/css/ax5/ax5grid.css" />
	<link rel="stylesheet" href="/static/css/ax5/ax5mask.css" />
	<link rel="stylesheet" href="/static/css/ax5/ax5modal.css" />
	<link rel="stylesheet" href="/static/css/ax5/ax5toast.css" />
	<link rel="stylesheet" href="/static/css/jstree/style.min.css" />
	<link rel="stylesheet" href="/static/css/gnb.css" />
	<link rel="stylesheet" href="/static/css/main.css" />
	<link rel="stylesheet" href="/static/css/sub.css" />
	<link rel="stylesheet" href="/static/css/common.css" />
	
	<script src="/static/js/jquery-latest.min.js"></script>
	<script src="/static/js/jquery.serializeObject.js"></script>
	<script src="/static/bootstrap/js/bootstrap.min.js"></script>
	<script src="/static/bootstrap/js/bootstrap-datepicker.min.js"></script>
	<script src="/static/bootstrap/js/bootstrap-datepicker.ko.min.js"></script>
	<script src="/static/js/moment/moment-with-locales.js"></script>
	<script src="/static/js/ax5/ax5core.min.js"></script>
	<script src="/static/js/ax5/ax5grid.min.js"></script>
	<script src="/static/js/ax5/ax5mask.min.js"></script>
	<script src="/static/js/ax5/ax5modal.min.js"></script>
	<script src="/static/js/ax5/ax5toast.min.js"></script>
	<script src="/static/js/ax5/ax5formatter.min.js"></script>
	<script src="/static/js/jstree/jstree.min.js"></script>
	<script src="/static/js/global.js"></script>
	<script src="/static/js/fileTree.js"></script>
	<!-- 공통결재 -->
    <script src="/static/js/commApproval.js"></script>	
    <script type="text/javascript" src="/static/js/workingDayCalc.js"></script>
    <script type="text/javascript" src="/static/js/korean-lunar-calendar.min.js"></script>
</head>

<body>
	<div id="head_area"></div>
	<div id="top_area"></div>
	<div id="main_area">

		<!-- 콘텐츠 -->
		<div class="contents">
			<!-- 리스트 -->
			<table class="form-group popup_table" id="scndTable">
				<colgroup>
					<col width="32%">
					<col width="32%">
					<col width="32%">
				</colgroup>
				<thead>
					<tr>
						<td style="text-align: left;">
							<h3 class="location"><span class="page_tit">미수금 현황</span>
								<select id="coCd1" data-kind="CO" onchange="clmnGridView.setData(); gridView.setData();">
									<option value="">전체</option>
								</select>
							</h3>
							<span>※해당 자료 더블클릭은 수금, 매출계산서 처리</span>
						</td>
						<td style="text-align: left;">
							<h3 class="location"><span class="page_tit">발주 요청서 미완료 현황</span>
								<select id="coCd2" data-kind="CO" onchange="setByCoCd(this); ordrgGridView.setData();">
									<option value="">전체</option>
								</select>
							</h3>
							<span>※해당 자료 더블클릭은 발주요청서 결과처리</span>
						</td>
						<td style="text-align: left;">
							<h3 class="location"><span class="page_tit">To-Do List</span>
								<select id="coCd3" data-kind="CO" onchange="setByCoCd(this); todoGridView.setData();">
									<option value="">전체</option>
								</select>
							</h3>
							<span>※ 구분,작업내용 더블클릭은 확인.결재 처리, 그외 더블클릭은 내용조회</span>
						</td>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<div class="contents" style="margin:0px;padding:0px;width:100%;min-width:300px">
								<div data-ax5grid="clmn-grid" data-ax5grid-config="{}" style="height: 365px; width: 100%"></div>
								<div><h3 class="location"><span class="page_tit">미청구 현황</span></h3>
									<span> ※ 해당자료 더블클릭은 청구작업 처리 가능</span></div> 
								<div data-ax5grid="tax-grid" data-ax5grid-config="{}" style="height: 365px; width: 100%"></div>
							</div>
						</td>
						<td>
							<div class="contents" style="margin:0px;padding:0px;width:100%;min-width:300px">
								<div data-ax5grid="ordrg-grid" data-ax5grid-config="{}" style="height: 775px; width: 100%"></div>
							</div>
						</td>
						<td>
							<div class="contents" style="margin:0px;padding:0px;width:100%; min-width:300px">
								<div data-ax5grid="todo-grid" data-ax5grid-config="{}" style="height: 365px; width: 100%"></div>
								<div><h3 class="location"><span class="page_tit">완료 예정 업무</span></h3>
									<span> ※ 해당자료 더블클릭은 WBS결과 입력 처리 가능</span></div> 
								<div data-ax5grid="work-grid" data-ax5grid-config="{}" style="height: 365px; width: 100%"></div>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</body>
</html>

<script type="text/javascript">
	
	ax5.ui.grid.formatter["bilgYn"] = function () {
		var color = this.value == "Y" ? "color-circle_02.png" : "color-circle_01.png";
		if (this.value == "E"){
			return 'E';
		} else {
			return '<img src="/static/img/'+color+'" style="width: 10px;height: 10px;"></img>';
		}
	};
	
	// 미수금 그리드
	var clmnGridView = {
		initView : function() {
			this.target = new ax5.ui.grid();
			this.target.setConfig({
				showRowSelector : false,
				multipleSelect : false,
				sortable : false,
				target : $('[data-ax5grid="clmn-grid"]'),
				header : {
					align : "center",
					selector : false
				},
				body : {
					onClick : function() {
						this.self.select(this.dindex);
					},
		            onDBLClick: function () {
						insert_update_cr05_Modal(this.item, "U");
		            },
		            mergeCells : ["ordrsClntNm", "ctrtNm", "clmnPlanDivNm"],
				},
				page : {
					display : true,
				},
				footSum: [
			    	[
						{label: "[ 합계 ]", 	  align:"center",	  colspan : 3},
						{key: "planClmnAmt"   , collector: "sum", formatter: "money", align: "right", styleClass: "grid-font-blue-bold" },
						{key: "sellBillAmtSum", collector: "sum", formatter: "money", align: "right"},
						{},
						{key: "clmnAmtMi"     , collector: "sum", formatter: "money", align: "right", styleClass: "grid-font-red-bold" }
			    	]
			    ],
				columns: [

					{key: "ordrsClntNm", label: "고객사"     , align: "left"  , width: 140, formatter: function () {
						return this.value.slice(0,8) + "(" + this.item.clntPjtNm + ")"}},
					{key: "ctrtNm"       , label: "계약명"     , align: "left"  , width: 130},					
					{key: "clmnPlanDivNm", label: "구분"   , align: "center", width: 70, formatter: function () {
						return this.value + " " + this.item.clmnDivSeqNm }},
					{key: "planClmnAmt"   , label: "수금예정금액", align: "right" , width: 100, formatter: "money", styleClass: "grid-font-blue-bold" },

					{key: "sellBillAmtSum", label: "계산서발행"   , align: "right" , width: 100, formatter: "money"},
					{key: "planClmnDt"    , label: "수금예정일"   , align: "center", width: 80},
					{key: "clmnAmtMi"     , label: "미수금액"   , align: "right" , width: 100, formatter: "money", styleClass: "grid-font-red-bold" },
				
		        ]
			});
			return this;
		},
		setData : function() {
			var targetObj = this.target;
			var paramObj = {
					"coCd"        : $("#coCd1").val(),
					"strtDt"       : moment().format('YYYYMMDD'),
					"planClmnDt"   : moment().add(3, 'days').format('YYYYMMDD'),
					"recordCnt" : 999999999,
			};

			postAjax("/user/cr/cr13/select_cr13_List", paramObj, null, function(data) {
				var list = data.result;
				if (list != undefined)
				targetObj.setData({
					list : list,
					page : {
						totalElements : list.length
					}
				});
			});				
		}
	}
	
	// 발주요청서 그리드
	var ordrgGridView = {
		initView : function() {
			this.target = new ax5.ui.grid();
			this.target.setConfig({
				showRowSelector : false,
				multipleSelect : false,
				sortable : false,
				target : $('[data-ax5grid="ordrg-grid"]'),
				header : {
					align : "center",
					selector : false
				},
				body : {
					onClick : function() {
						this.self.select(this.dindex);
					},
		            onDBLClick: function () {
		            	insertQualityRespModal(this.item);
		            },
				},
				page : {
					display : true,
				},
				columns: [
	    		     	 {key: "ordrgDt",	    label: "발행일",			width: 80,		align: "center", 	hidden:false}
						,{key: "ordrgNm",	    label: "발행자",		    width: 70,		align: "center", 	hidden:false}						
						,{key: "subNm",	    	label: "요청유형",		    width: 90,		align: "left", 	    hidden:false}						
						,{key: "clntNm",	    label: "고객사",		    width: 140,		align: "left", formatter: function () {
							return this.value.slice(0,8) + "(" + this.item.clntPjt + ")"}}
						,{key: "codeNm",	    	label: "상태",			width: 50,		align: "center", 	hidden:false,
							styleClass: function () {
								if (this.item.codeNm == "진행") {
									styleClass = "grid-font-blue-bold";
								} else if (this.item.codeNm == "접수"){
									styleClass = "grid-font-red-bold";
								} else {
									styleClass = "";
								}
								return styleClass;
							}
						 }
						,{key: "matrDrwNo",	    label: "대표도번",		    width: 110,		align: "center", 	hidden:false}
						,{key: "eqpNm",	    	label: "장비명",		    width: 120,		align: "left", 	    hidden:false}
						,{key: "partNm",	    label: "분류",		    width: 70,		align: "center", 	hidden:false}
						,{key: "reqRmk",	    label: "요청비고",		    width: 100,		align: "left", 	    hidden:false}
 	              ]
			});
			return this;
		},
		setData : function() {
			var targetObj = this.target;
			var formData = {
					"coCd"       : $("#coCd2").val(),
					"reqDtFrom"  : '19910101',
					"reqDtTo" 	 : moment().add(3, 'days').format('YYYYMMDD'),
					"rsltYn" 	 : 'N',
					"pageNo"     : 1,
					"recordCnt"  : 9999999
			};
			postAjax("/user/qm/qm01/selectQualityReqList", formData, null, function(data){  
				var list = data.result;
				if (list != undefined)
				targetObj.setData({
					list : list,
					page : {
						totalElements : list.length
					}
				});
			});				
		}
	}
	
	// Todo 그리드
	var todoGridView = {
		initView : function() {
			this.target = new ax5.ui.grid();
			this.target.setConfig({
				showRowSelector : false,
				multipleSelect : false,
				sortable : false,
				target : $('[data-ax5grid="todo-grid"]'),
				header : {
					align : "center",
					selector : false
				},
				body : {
					onClick : function() {		
						this.self.clearSelect();
						this.self.select(this.dindex);
		                if ( (this.column.key != "todoDiv2CodeNm" && this.column.key != "todoDiv1CodeNm")  ) {
			                let paramObj = JSON.parse(this.item.pgParam);
			                let addParam = {"viewMode": 1}
			                Object.assign(paramObj, addParam); 
			                openSecondModal("/static/html" + this.item.pgPath, 1600, 850, "", paramObj);		                	
		                }						
					},
		            onDBLClick: function () {    
		            	toDoConfirmApproval(todoGridView);
		            },
		            mergeCells :  ["todoDiv1CodeNm", "todoDiv2CodeNm", "salesCd", "creatNm"],
				},
				page : {
					display : true,
				},
				columns: [
	                {key: "todoDiv1CodeNm",     label: "*구분",  			align: "center",   width: 50},                
			        {key: "todoDiv2CodeNm",     label: "*작업내용",      	align: "center",   width: 80},
			        {key: "todoTitl",      		label: "내용",      		align: "left",   width: 150},
			        {key: "salesCd",      		label: "SALES CODE",    align: "center",   width: 110},
			        {key: "todoNm",      		label: "결재/공유자",    	align: "center",   width: 80},
			        //{key: "creatNm",      		label: "요청자",      	align: "center",   width: 70}, 
			        {key: "creatDttm",      	label: "요청일자",      	align: "center",   width: 70},  
			        {key: "todoNo",      		label: "관리번호",      	align: "center",   width: 90},
		        ]
			});
			return this;
		},
		setData : function() {
			var targetObj = this.target;
     	    var formData = {
    				"coCd"		: $("#coCd3").val(),
                    "salesMngId" : jwt.userId, // 공유대상자
                    "boardParam" : "BOARD",
					"sanctnSttus" : "N",  //공유건은 미확인만 
                    "pageNo" :  1, 
    				"recordCnt" : 999999999,
     	           };
			postAjax("/user/wb/wb20/selectToDoList", formData, null, function(data){
				var list = data.resultList;
				if (list != undefined)
				targetObj.setData({
					list : list,
					page : {
						totalElements : list.length
					}
				});
			});				
		}
	}
	
	// 미청구 그리드
	var gridView = {
		initView : function() {

			this.target = new ax5.ui.grid();
			this.target.setConfig({
				showRowSelector : false,
				multipleSelect : false,
				sortable : false,
				target : $('[data-ax5grid="tax-grid"]'),
				header : {
					align : "center",
					selector : false
				},
				body : {
					onClick : function() {
						this.self.select(this.dindex);
					},
		            onDBLClick: function () {
						this.self.clearSelect();
						this.self.select(this.dindex);
						insert_update_cr08_Modal(this.item, "C");
		            },
		            mergeCells : ["ordrsClntNm", "ctrtNm", "clmnPlanDivNm"],
				},
				page : {
					display : true,
				},
			columns : [
				{key: "ordrsClntNm", label: "고객사"     , align: "left"  , width: 140, formatter: function () {
					return this.value.slice(0,8) + "(" + this.item.clntPjtNm + ")"}},
				{key: "ctrtNm"       , label: "계약명"     , align: "left"  , width: 120},
				{key: "clmnPlanDivNm", label: "구분"     , align: "left"  , width: 70, formatter: function () {
					return this.value + " " + this.item.clmnDivSeqNm }},
				{key: "planClmnAmt"   , label: "수금계획금액", align: "right" , width: 95, formatter: "money", styleClass: "grid-font-blue-bold" },
				{key: "sellDcsnAmtSum", label: "매출확정금액", align: "right" , width: 95, formatter: "money"},
				{key: "sellBillAmtMi" , label: "미청구 금액", align: "right" , width: 95, formatter: "money", styleClass: "grid-font-red-bold" },
				{key: "planClmnDt"    , label: "수금예정일"   , align: "center", width: 80},
			],

			footSum: [
				[
					{label: "[ 합계 ]", 	  align:"center",	  colspan : 3},
					{key: "planClmnAmt"   , collector: "sum", formatter: "money", align: "right", styleClass: "grid-font-blue-bold" },
					{key: "sellDcsnAmtSum", collector: "sum", formatter: "money", align: "right"},
					{key: "sellBillAmtMi" , collector: "sum", formatter: "money", align: "right"},
					{},
		    	]
		    ],
			});
			return this;
		},
		setData : function() {
			var targetObj = this.target;
			var formData = {
				"coCd"		: $("#coCd1").val(),
				"strtDt"	: moment().add(3, 'days').format('YYYYMMDD'),
				"billDiv"	: "S1",  //미청구
				"recordCnt" : 999999999,
			};
			postAjax("/user/cr/cr12/select_cr12_List", formData, null, function(data) {
				var list = data.result;
				if (list != undefined)
				targetObj.setData({
					list : list,
					page : {
						totalElements : list.length
					}
				});
			});
		}
	}
	
	
	// 완료예정업무 그리드
	var workGridView = {
		initView : function() {

			this.target = new ax5.ui.grid();
			this.target.setConfig({
				showRowSelector : false,
				multipleSelect : false,
				sortable : false,
				target : $('[data-ax5grid="work-grid"]'),
				header : {
					align : "center",
					selector : false
				},
				body : {
					onClick : function() {
						this.self.select(this.dindex);
					},
		            onDBLClick: function () {	
						this.self.clearSelect();
						this.self.select(this.dindex);
						workModal(this.item, "C");
		            },
		            mergeCells : ["clntNm", "salesCd"],
         trStyleClass: function(){
//             console.log(this.item);
            return "grid-cell-blue";
        },
				},
				page : {
					display : true,
				},
			columns : [
				{key: "clntNm", 	label: "고객사"     , 	align: "left"  , width: 140, formatter: function () {
					return this.value + "-" + this.item.clntPjtNm},},
				{key: "salesCd", 		label: "Sales Code",	align: "left"  , width: 105},
				{key: "wbsTaskNm", 		label: "업무명",		align: "left" , width: 165},
				{key: "wbsRate", 		label: "%",				align: "center" , width: 50},
				{key: "wbsStrtDt" , 	label: "시작일", 		align: "center" , width: 80},
				{key: "wbsEndDt", 		label: "종료예정일", 	align: "center", width: 80},
				{key: "ctrtNm", 		label: "계약명", 		align: "left"  , width: 160},
			]
			});
			return this;
		},
		setData : function() {
			var targetObj = this.target;
			var formData = {
				"coCd"		: $("#coCd3").val(),
                "usrId" 	: jwt.userId, // 작업대상자
				"strtDt"	: moment().add(3, 'days').format('YYYYMMDD'),
			};
			postAjax("/user/wb/wb22/selectIncompleteJob", formData, null, function(data){
				var list = data.resultList;
				if (list != undefined)
				targetObj.setData({
					list : list,
					page : {
						totalElements : list.length
					}
				});
			});
		}
	}
	
	$(document).ready(function() {
		
		// 패스워드 유효기간 체크
		var paramObj = {"id": jwt.userId};
		postAjax("/admin/cm/cm06/checkPwdDttm", paramObj, null, function(data) {
			if(data.isExpired == "Y"){
// 				updatePwModal();
                if (confirm("암호 변경 주기가 도래하였습니다. 변경하시겠습니까?")) {
                	openModal("/static/html/cmn/modal/updatePw.html", 500, 200, "비밀번호 변경");
    			}
			}
		});

		// 페이지 타이틀 set
		mainDefaultLoad("대시보드", "실무자");
		setCommonSelect($("#main_area select[data-kind]"));

		//메뉴 숨기기
		$('#head_area').toggleClass('off');
		$('#top_area').toggleClass('on');
		$('#main_area').toggleClass('on');
		
		$("#coCd1").val(jwt.coCd);
		$("#coCd2").val(jwt.coCd);
		$("#coCd3").val(jwt.coCd);
		
		setByCoCd(jwt.coCd);
		
		clmnGridView.initView().setData();
		gridView.initView().setData();
		todoGridView.initView().setData();
		ordrgGridView.initView().setData();
		workGridView.initView().setData();
		// grid init
	});
	
	//수정 or 등록 버튼 클릭 시
	function insert_update_cr05_Modal(row, type) {
		var paramObj = {
			"actionType"  : "C",
			"fileTrgtKey" : 0,
			"coCd" 	      : row.coCd,
			"ordrsClntCd" : row.ordrsClntCd,
			"ordrsClntNm" : row.ordrsClntNm,
			"userId"      : jwt.userId,
			"pgmId"       : "CR0501M01"
		}
		
		openModal("/static/html/user/cr/cr05/CR0501P01.html", 1600, 850, "", paramObj, function(data) {
			clmnGridView.setData();
		});
	}
	

	// 세금계산서 수정 화면
	function insert_update_cr08_Modal(row, actionType) {
		var paramObj = {
			"actionType"  : actionType,
			"fileTrgtKey" : 0,
			"coCd" 	      : jwt.coCd,
			"userId"      : jwt.userId,
			"ordrsClntCd" : row.ordrsClntCd,
			"ordrsClntNm" : row.ordrsClntNm,

			"pgmId"       : "CR0801M01"
		};
		
		openModal("/static/html/user/cr/cr08/CR0801P01.html", 1600, 850, "", paramObj, function(data) {
		});		
	}
		
	// 판매법인 set
	function setByCoCd(data){
		//변경한 판매법인의 아이디를 통해 coCd기준 판매법인 변경
		var dataType = typeof data;
		var gridNum = '';
	}
	
	// 공유확인/결재 처리
	function toDoConfirmApproval(gridObj){
		var selRow = parseInt(gridObj.target.selectedDataIndexs);    
			if( isNaN(selRow) ) {
				alert("선택된 행이 없습니다.");
				return;
			} else {			
				if( selRow > -1 ) {
					var row = gridObj.target.getList("selected")[0];	
					if( row.todoDiv1CodeNm == "공유" ) {
						if( row.sanctnSttus == "N" ) {
							if( confirm("확인 처리 하시겠습니까?") ) {
								toDoConfirm(row);
							}
						} else {
							alert("이미 확인처리 하였습니다.");
						}
					} else if( row.todoDiv1CodeNm == "결재" ) {
						var paramObj = {
								 "coCd":row.coCd
								 , "salesCd":row.salesCd
								 , "todoDiv1CodeId":row.todoDiv1CodeId
								 , "todoDiv2CodeId":row.todoDiv2CodeId
								 , "todoFileTrgtKey":row.todoFileTrgtKey
								 , "pgmId": "WB2001M01"
								 , "userId": jwt.userId
						};
						openSecondModal("/static/html/user/wb/wb20/WB2001P01.html", 730, 300, "", paramObj);					
					}
				}

				todoGridView.setData();
			}
		return;
	} 	

	function toDoConfirm(row){
		if (row.todoKey != undefined) {
			var today = new Date();
			var strDate = today.getFullYear()+"-"+('0'+(today.getMonth()+1)).slice(-2)+"-"+('0'+today.getDate()).slice(-2);
			
			var formData = new FormData();
			formData.append("todoKey", row.todoKey);
			formData.append("creatId", jwt.userId);
			formData.append("creatPgm", "WB2001M01");
			//formData.append("todoCfDt", strDate);
			filePutAjax("/user/wb/wb20/toDoCfDtUpdate", formData, function(data){
				if(data.resultCode == 200){
					alert("공유 확인되었습니다.");      
					gridView.initView().setData(0);
				}
			}); 
		}    
	}  
	
	function insertQualityRespModal(row) {
		// REQST 접수상태 - REQST01 : 접수, REQST02:진행, REQST03:완료
		//if(row.rsltYn == "N" && row.reqSt == "REQST02"){
		if(row.reqSt == "REQST02" || row.reqSt == "REQST03"){  //접수 상태(결제후 진행상태,결과 결제후 완료상태)에서만 등록,수정
				if (row.resltSubCd == "" || row.resltSubCd == undefined ){//결과 등록할떄 체크
					var paramObj = {
							"actionType" : "C",
							"fileTrgtKey" 	: row.fileTrgtKey,
							"coCd" 	   		: row.coCd,
					       	"userId"   		: jwt.userId,
					       	"userName" : jwt.userNm,
					       	"empNo"    : jwt.empNo,
					       	"deptId"   : jwt.deptId,
					       	"levelCd"  : jwt.levelCd,
					     	"rsltYn"   : row.rsltYn,   //결과등록여부
						    "reqSt"    : row.reqSt,    //todo진행상태
						    "reqNo"    : row.reqNo,     //관리번호, 요청번호
						    "midCd"    : row.midCd,
						    "rsltNo"   : row.rsltNo,   //실적결과번호
						    "rsltSubCd" : row.resltSubCd //결과테이블 소분류 코드
					}
				
				}
				else if (row.resltSubCd != "" ){//결과 수정할떄 체크
					paramObj = {
							"actionType" : "U",
							"fileTrgtKey" 	: row.fileTrgtKey,
							"coCd" 	   		: row.coCd,
					       	"userId"   		: jwt.userId,
					       	"userName" : jwt.userNm,
					       	"empNo"    : jwt.empNo,
					       	"deptId"   : jwt.deptId,
					       	"levelCd"  : jwt.levelCd,
					     	"rsltYn"   : row.rsltYn,   //결과등록여부
						    "reqSt"    : row.reqSt,    //todo진행상태
						    "reqNo"    : row.reqNo,     //관리번호, 요청번호
						    "midCd"    : row.midCd,
						    "rsltNo"   : row.rsltNo,   //실적결과번호
						    "rsltSubCd" : row.resltSubCd //결과테이블 소분류 코드
					}
				}
			
			openModal("/static/html/user/qm/qm01/QM0101P03.html", 1600, 850, "", paramObj, function(data) {
				//gridView.setData(0);
			});
		}else if(row.reqSt == "REQST01"){ 
// 			alert("결재 승인후 결과 등록할 수 있습니다.");
			var paramObj = {
				"actionType" : "U",
				"fileTrgtKey" : row.fileTrgtKey,
				"reqNo"    : row.reqNo,
				"rsltNo"   : row.rsltNo,
				"coCd" 	   : row.coCd,
		       	"userId"   : jwt.userId,
		       	"deptId"   : jwt.deptId,
		       	"pgmId"    : "QM0101M01"
			};
			openModal("/static/html/user/qm/qm01/QM0101P01.html", 1600, 850, "", paramObj, function(data) {
			});
		}
	}	
	
	function workModal(row) {
		 var paramObj = {"coCd"		: row.coCd,
        				 "salesCd"	: row.salesCd
         				};
		 openSecondModal("/static/html/user/wb/wb22/WB2201P01.html", 1200, 900, "WBS 계획등록", paramObj, function (){                    
         });
	}
</script>
