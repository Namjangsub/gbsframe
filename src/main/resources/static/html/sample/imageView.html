<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이미지 뷰어 및 다운로드</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<!-- 	<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdQAAABjCAYAAAAin/EVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAynSURBVHhe7d1/jBRnHcfx7x4hbfoDS0oqCMSU/sQmgrSFQ+udlkhaRNReCsldjIeaHP5hiTUtGi5nvB5FamhDjSkk1pKYOwPNYcSmRUxrOI13QIvFiFikR/SgRdJ4SUtbKuXO+T47z92w7Cx73LO78+y8X8mwszNzu8Pt7POZ58fMZYYD4sCaNWvCOcAvGzZsCOcA4NI5C1QAANKsJnwEAADjQKACAOAAgQoAgAMl7UP94IMP5OzZs3Lu3DkZGhoKlwIAUH1KEqgapGfOnCFEAQCp4TxQ33vvPROo6rLLLjPThAkTzHMAAKqV00CNhumkSZMIUgBAajgblKRBasP0mmuuIUwBAKniLFC1z1RpzTSTyZh5AADSwkmgas1UByDRXwoASCsngaqXxigNVAAA0shJoOp1poraKQAgrZwEKtebAgDSztmgJAAA0oxABQDAASc3dhgcHDSPkydPNo9IPh1Ipk31jm+UhYTTS9pqampk4sSJ4RIArlBDTSH7BwsI0/TRz1w/ezsyH4A7BGoKMYgMHAOAewRqClEzBccA4B6BCgCAA14F6vE3TsrDP1wvT27ZGi5Jpmc6nzXT2++cDpcAAKqdN4GqYbqmbb10/+aFYP7NcGkyTbr6KhOm3TtfIFSBKrH35b9cMGm5VEm2ktH0rdWmvEFleXHZjA3TvuAAnvGxabLn+W3hmmSKhqmGa8Oye81jUti/DIR0u/zyy8O55KhfsiLvCbN+71XDl++VB1qazXw5aXh2/3aX7N3/6sj+6T49sKrZfL8rQcvF+iXLw2dZq7/9jYr8fipNTyg0Hy6FHlOP/egH4bPxSXwN1bcwVdEQpaYKFC+u9UmX67TpqV+YGlm5LbjjU6bQ1cJX6aOWRUkKU6W/H12XNuP5P5844e73legaqo9hGpXUmio1VKgk1lBvmFtnHrWmteD2OWZeaVmwY+eukVpI1883mZArNw1z7XZ6rD0I1wqFqYqryatK71uaJTpQi6nG26agBXfOlQdaVgbPp5rn5aBBefi1f5ovezFnSLpvSTjQiwnUgz9dLI2d4ROjQbr6WmS0iPPVoHR/d4X0N++Wh/z/z4xLkgM1X2Dqd8zWyioVGjbI9jy/vaxljWX6bl85aE42Hm77cd5Qff3VnnAO5eb9ZTO2KUjPGjWAyzUCWA9sHcnb97L2qVRnE0td6zY51LfbTHtaB6SxdoscDNehsn657dey/0D8p6HrdJtqot85qxK1U2UDrFJh2hiUcdqsq6H6WPv3RyoUlp6IXCotz6K/41y2zEsiLfv1ZKzQVI6ugkQH6obgLNQeMNkm3+3m7Cs66TKdtIlID3Y92Eodqr//wx9NkKraO+aaM+XVq1ZeMK1sun/ki2ebfH01Zen3pH3hgBw9FS5ARd160yzZd+CveUP1pZ4/m3W6ja/0JFULcDvpd/rJzdnvtX7XKxFodhSt7UctJ/0daJha+UJ1vM3gn7jlRlOu6XvlsmWebpNExVRqXPaVxkn8KF/9RenZh4alHjidwUET92WKNgmVqo9F32PkixUEZNy+aHOwHoS6vYaphmtSFNvku/n6bfLUUvuZHpaf1HbKrJ0d0nCdzq+WkdOWhQ/KnifukSk6f3CL3Lb149I+63Fp6xRp3qJNqwW2V/ozLd3Z+WBd16I/SeOxJjn0ndnBgvB9W2dKW0ewTdOmYPlU02zb1pv9kfObo+1+Nkn/Mvue86Xd7LfO2ybf4Ey+Jd96P7xz+l35x5GjJjjnz/uk3Dkv+7/XMD185HWZPu2j8pUvLjbL4iS5yTeOyxGZY1Wp/tPcMI3Sk4v7vnSPnAjKx/GWd7YLS4NTKwr29bQc+/trR01Z53OloBwS3+SrH2I2RKeZUM2Ga/4zDd1WDzClQ9xLQQ84pQecj2F6qd56rlO2LrxL6jV0DvaIBEGZbQ7eJM29j8sz0YpS8Ly/Lrve9FMW2t6EaXACFDYtHwrKys0d+8KV1j5pO1aXXa8he2qv9C+yzdHbgppzt2x+LntSlxVsv6xHFtvX3BKE8bLzm6u3toyu72oKtl+/S94K1/ng6quulFtvvtEEp62pjiVMfWW7diqpnM3NWobEhanau18HbE51sk9aVs2+5SbzeramSpiOjRd9qPph5oZqHD1bU3q9WCnYMNcDL061hGlPxwq5rXaxmepfvGu0VjmnJTKgZ7YsbhLpH4gEWlDLXBkd8FNg+4M93VLXunx0sNN198gjrfPDJ1ZQg1yhtdVQsM1DIzXnyVK/aL70HIueZGmNMzKAas5yE7q7I4navGV0/ZwVD0pd77/kRPjcFxqqi+o/MxKqGqZ6zFVDmGotMF/XjtKBipW4dMaWKXEn0qWg72WbdHPZFjuX9Pj5wuc/a95XQ1XDVJclPUyL6UONm1weS94MSrKhWnuRM7FyHex6kMXRffA9TFV0UNKhaBOtaTbNBq1O548Gzidu+0E52i8ya+bYuwq0Sdq+Xv0FNdpck+VGf7sTC7KhOvvmG8wx97UVXw3XVJdssAS1pLD/slQnzHH0BFlP5i9W/rhmu7tyaZiW6jJCG6raX+pLOWYrOpfCZd+qV6N8bagWcyDlOwhd0mbdONr8Ug3NvPmNXnZiw7YrqHHGu/j259VuAyeOFQ5I279rX2/PBTXaXNngrlYaqnfXfbpqwzSfUn+/c9mBOtOnl692qmGae9mgBmkpw9SyoepLOaa/j2iLxlgml7V8rwK1GKUeiacHmioUqNXtpPT3zpdZI61Qh2V3wRpqoe3D5tqO7aP9m6d2yeaCr5dbqx2UPS/m6XPddjic1/7fjdImOc3QSLQTb/7HhJid9HutI321D1WVe6Tt3leyNeIFt881j6Vmr1TQGrFO+v/Vwl9H9fp2g5s0qapA1Wq/3k1FlerAt32n2k+azlCdLStbRdqW2SbXnuBUOlyVV+HtpyztCGqs3dIYNt/etl5kVcEa52RpaG6QrS329TZK/6w8fa7X94TrtUl4pnSd12SNpNPLQnQwjp0ebltvllkN4ViJctByxQZ5uej9eLXmZCc7srmcA6J8Ukwfajn63b24OX6xbBNJKZtEqmEEb9JvPXjhJTtjEb28J1yEvHy9Ob4OPCzXWIl8za5aY3TZTJhPJpMJ58bHQfHuhUK3YrTK8rlVW6Bq0JW6ScSGqj4SqI6Zy2gGxnFdKIFarCQGKrIIVD9VVaCiOIkK1OhNHYzx3mSBQC0WgZpcBKqfCNQUSnqTL8qDQAXcqrpRvgAAVAKBmkKumpPgL44BwD0CNYVqavjY045jAHCPb1UKTZw4USZMmEAtJYX0M9fPXo8BAG4xKAkAAAeooQIA4ACBCgCAAwQqAAAOEKgAADhAoAIA4ACBCgCAAwQqAAAOEKgAADjg9MYOkyZ9RPb/+4ys/91/5aUjZ+T9/w3pO4gMB48q8lZ579HDnxoCAHjKaaAeffsK+dzPTgVBek4yQzZEbajq22iM2nkAAKqH00Bd2f2h7Pzb+/L1+VfIo0uulilX1pjsHNJwDbJU3+rCt8vkWQYAgF+cBuqMR0/L+2eH5Y32aSZMNU2zIZoTpmG4AgBQLZwG6rXtp02Int04Q4L4NMv0+WiYZntOCVMAQLUpSaB++HgQqGF+2jA1vafjfysAABLJfaAGPtw43TyOvHKeJl7CFQBQTUoSqOeCGqoafemYgUfZFmAAALznOFDfDf4dHglUy8FbAACQaCUIVJGhJ7QPlRAFAKRHyW49mMlkzAQAQBqU/F6+NlgLTQAA+K5kTb4AAKQJf20GAAAHCFQAABwgUAEAcIBABQDAAQIVAAAHCFQAABwgUAEAcIBABQDAAQIVAAAHCFQAABwgUC/meJc0nHfv4QbpOh6u84Hv+w8AnkhooJ6UruXREIiZHukNt8+V/fmGX50Mn1+ivnWSmdkk83qHzZ+jM9NAg3TPvNhr+77/AICxSnQNtSMaBDnTm133hVuVSq+sW9hq9mFtbbhIzWiU7t4O2dH4dLBFYb7vPwCgeDT5xjl+TA5Ih9wdDSOr9pvSeX+rvNQXPk8i3/cfADxDoAIA4ACBGmfG9TJPYmpxfU9L07Mxtb+k8H3/AcAzBGqshbK2t0NaF2ZkXTSUdNSs6ZtcG2yRZL7vPwD4JdGBqmGQd3RsME1r3BFuFW9H47S8Pzs6rSs8MKd2rQwPdMqB6H7M7JaGgZyBPjF8338AQPEywzrkdJwGBwfN47Xt75rHoSdmmEcAANKCJl8AABwgUAEAcIBABQDAAQIVAAAHCFQAABwgUAEAcIBABQDAAQIVAAAHCFQAABwgUAEAcIBABQDAAQIVAAAHCFQAAMZN5P+1Fg5XaddJzAAAAABJRU5ErkJggg=="> -->
    <img id="imgData" name="imgData" src="data:image/png;base64,xxx"> 
    <div id="imageContainer">
        <!-- 이미지를 여기에 표시할 것입니다. -->
    </div>
    <button id="downloadBtn">이미지 다운로드</button>

    <script>
        $(document).ready(function() {
            // 이미지를 가져와서 뷰어에 표시하는 함수
//             function displayImage(imageUrl) {
//                 $('#imageContainer').html(`<img src="${imageUrl}" alt="이미지">`);
//             }

            // 이미지를 다운로드하는 함수
//             function downloadImage(imageUrl) {
//                 // 이미지 다운로드 링크 생성
//                 var link = document.createElement('a');
//                 link.href = imageUrl;
//                 link.download = 'image.jpg';
//                 document.body.appendChild(link);
//                 link.click();
//                 document.body.removeChild(link);
//             }

            // 이미지 경로 설정 (서버에서 가져와야 함)
//             var imageUrl = '이미지의 URL';

            // 이미지 뷰어에 표시
//             displayImage(imageUrl);

            // '이미지 다운로드' 버튼 클릭 시 이미지 다운로드
            $('#downloadBtn').on('click', function() {
            	
      		  var xhr = new XMLHttpRequest();
    		  xhr.open("GET", "/admin/cm/cm08/fileDownloadAuth2?fileKey=2669&userId=js.nam", true);
    		  xhr.responseType = 'blob';
			  xhr.setRequestHeader("Authorization", authorizationToken);

    		  xhr.onload = function() {
    		      if (xhr.status === 200) {
    		    	  

// 	 		          var blob = xhr.response;
// 	 		          var url = window.URL.createObjectURL(blob);
// 	 		          var a = document.createElement('a');
// 	 		          a.href = url;
// 	 		          a.download = "test.jpg"; // 파일명 변경은 여기서
// 	 		          document.body.appendChild(a);
// 	 		          a.click();
// 	 		          document.body.removeChild(a);
// 	 		          window.URL.revokeObjectURL(url);
	 		          
    		          var blob = xhr.response;
    		          
    		       // Blob을 base64 데이터 URL로 변환
    		          var reader = new FileReader();
    		          reader.readAsDataURL(blob);
    		          reader.onloadend = function() {
    		              var base64data = reader.result;

    		              // base64 데이터를 이미지로 표시하는 img 요소에 설정
    		              var imgElement = document.getElementById('imgData');
    		              imgElement.src = base64data;
    		          };
    		          
    		      }
    		  };

    		 xhr.send();
            });
        });
        
        

        
    </script>
</body>
</html>
</html>