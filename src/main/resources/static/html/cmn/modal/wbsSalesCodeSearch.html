<div id="commonPopup">
	<div class="popup_area">
		<div class="popup_table">
		    <table>
                <colgroup>
                    <col width="20%">
                    <col width="">
                </colgroup>
                <tr> 
                    <td>
                    SALES CODE 
                    </td>
                    <td>
                        <div class="search_form">
                            <input type="text" id="searchValue" data-search="searchValue" onkeypress="if(event.keyCode == 13){wbsSalesCodeGridView.setData(0);}"> 
                            <a onclick="wbsPlanNoGridView.setData(0);">
                                <i class="i_search_w"></i>
                            </a>
                        </div>
                    </td>
                </tr>
            </table>
			<div class="ax5_grid" data-ax5grid="wbssalescode-grid" data-ax5grid-config="{}" style="height: 330px; width: 100%"></div>
		</div>
	</div>
	<div class="popup_bottom_btn">
		<button type="button" onclick="executeCallback();">선택</button>
		<button type="button" class="close_btn" onclick="modalStack.close();">닫기</button>
	</div>
</div>
<script type="text/javascript">
    var coCd = modalStack.last().paramObj.coCd;
    var salesCd = modalStack.last().paramObj.salesCd;
    $('#searchValue').val(modalStack.last().paramObj.salesCd);
    var wbsSalesCodeGridView = {
		initView : function() {
			this.target = new ax5.ui.grid();
			this.target.setConfig({
				showRowSelector : true,
				multipleSelect : false,
				target : $('[data-ax5grid="wbssalescode-grid"]'),
				header : {
					align : "center",
					selector : false
				},
				body : {
					onClick : function() {
						this.self.select(this.dindex);
					},
					onDBLClick: function () {
						executeCallback();
					}
				},

				columns : [
					{key : "coCd", label : "회사", hidden : true},
					{key : "coCdNm", label : "회사명", align : "left", width : 100},
					{key : "ordrsNo", label : "수주번호", align : "left", width : 100},
					{key : "salesCd", label : "SALES CODE", align : "left", width : 100},
					{key : "orgnSalesCd", label : "원천 SALES CODE",  align : "left", width : 100},
					{key : "ordrsClntCd", label : "고객사", align : "left", width : 100},
					{key : "ordrsClntNm", label : "고객사명", align : "left", width : 100},
					{key : "clntPjt", label : "고객사 PJT", align : "left", width : 100},
					{key : "ordrsDtlDiv30", label : "신작구분", align : "left", width : 100},
					{key : "ordrsDtlDiv30Nm", label : "신작구분", align : "left", width : 100},
					{key : "prdtCd", label : "제품구분", align : "left", width : 100},
					{key : "prdtCdNm", label : "제품명", align : "left", width : 100},
					{key : "itemDiv", label : "아이템구분", align : "center", width: 100},
					{key : "eqNm", label : "설비명", align : "center", width : 100}
				]
			});
			return this;
		},
		setData : function() {
			var targetObj = this.target;
			var formData = {
	                   "coCd" : coCd,
	                   "salesCd": salesCd
	               }
			postAjax("/user/wb/wb01/selectWbsSalesCodeList", formData, null, function(data) {
                var list = data.codeInfoList;
                targetObj.setData({
                    list : list,
                    page : {
                    	totalElements : list.length
                    }
                });
            });
		}
	}
	
	
	function executeCallback(){
		if(selectGridValidation(wbsSalesCodeGridView.target)) return;
		modalStack.last().callback(wbsSalesCodeGridView);
		modalStack.close();
	}
    
    $(document).ready(function() {
    	wbsSalesCodeGridView.initView().setData();  
    })

</script>
