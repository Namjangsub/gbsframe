<style>
.empTR{
	height : 30px;
}
.emp_red {
	background-color: red;
	width: 6px;
	height: 6px;
	border-radius: 3px;
}

.emp_orange {
	background-color: orange;
	width: 6px;
	height: 6px;
	border-radius: 3px;
}

.emp_green {
	background-color: green;
	width: 6px;
	height: 6px;
	border-radius: 3px;
}
</style>

<div id="commonPopup">
	<div class="popup_area" style="min-height: 130px !important;">
		<div class="popup_table">
		<div id="employeeStatusListContainer"></div>	

		</div>
	</div>
	<div class="popup_bottom_btn">
		<button class="close_btn" onclick="modalStack.close();">닫기</button>
	</div>
</div>
<script type="text/javascript">
  
	$(document).ready(function() {
		createCheckBox();
	});
	

	function createCheckBox() {

		$('#employeeStatusListContainer').empty();
		var param = {};
		postAjaxSync("/admin/cm/cm06/selectEmployeeStatusList", param , null,  function(data){
			var codeList = data.result;
			var container = $('#employeeStatusListContainer');
			var lastDept = '';
			const table = $('<table>').appendTo('#employeeStatusListContainer')
			var tableRow = '';
			var tdCount = 0;
			$.each(codeList, function (index, item){
				if (lastDept != item.dept) {
					if (tdCount != 0 || tdCount != 4) {
						for (let i = tdCount; i < 4; i++) {
							const tdElement  = $('<td>').appendTo(tableRow);
						}
					}
					
					tableRow = $('<tr>').addClass('empTR').appendTo(table);
					var trElement = $('<tr>');
					const rowCnt = Math.ceil(item.cnt / 4) // 양의 정부만 추출 ex) 4/3 = 2
					$('<th>').attr('rowspan', rowCnt).css('width', '14%').text(item.deptNm).appendTo(tableRow);
					lastDept = item.dept;
					tdCount = 0;
				} else {
// 					tableRow = $('<tr>').appendTo(table);
// 					var trElement = $('<tr>');
				}
				if (tdCount == 4) {
					tableRow = $('<tr>').addClass('empTR').appendTo(table);
					var trElement = $('<tr>');
					tdCount = 0;
				}
				const iHtml = 
						item.name + ' ' + item.levelNm + '\n' +
						'<i class="fas fa-calendar-alt"></i><i class="fas ' + setStatus(item.scdLoad) + '"></i>\n' +
						'<i class="fas fa-tasks"></i><i class="fas ' + setStatus(item.qcLoad) + '"></i>\n' +
						'<i class="fas fa-user-shield"></i><i class="fas ' + setStatus(item.jobLoad) + '"></i>\n' +
						'<i class="fas fa-people-carry"></i><i class="fas ' + setStatus(item.commLoad) + '"></i>\n' 
				const tdElement  = $('<td>').appendTo(tableRow);
				tdElement.append(iHtml);
				tdCount += 1;

			});

			if (tdCount != 0 || tdCount != 4) {
				for (let i = tdCount; i < 4; i++) {
					const tdElement  = $('<td>').appendTo(tableRow);
				}
			}
		})	
	}

	function setStatus(set) {
		return (set == "comm3") ? "emp_red" : (set == "comm2") ? "emp_orange" : "emp_green";
	}
	
</script>
