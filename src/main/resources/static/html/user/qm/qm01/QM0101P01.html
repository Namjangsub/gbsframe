<div class="popup_area of_a" style="width: 100%; height: 100%;">
    <div class="tit_contents">
      <h4 class="tit">요인별 발주 및 출장요청 등록</h4>
    </div>
  <form id="popForm" onSubmit="return false;">
    <div class="form-group popup_table">
		<input type="hidden" id="fileTrgtKey"  	name="fileTrgtKey">
		<input type="hidden" id="userId"     	name="userId">
		<input type="hidden" id="pgmId"     	name="pgmId"	value="QM0101P01">
 	<table>
        <colgroup>
          <col width="11%">
          <col width="14%">
          <col width="11%">
          <col width="14%">
          <col width="11%">
          <col width="14%">
          <col width="11%">
          <col width="14%">
          <col width="11%">
          <col width="14%">
        </colgroup>
        <tr>
			<th class="hit">회사</th>
			<td>
				<select id="coCd" name="coCd" data-kind="CO" msg="회사" required >
				</select>
			</td>
			<th >관리번호</th>
			<td>
				 <div class="search_form">
				  <input type="text" id="reqNo" name="reqNo" >
				  <a onclick="reqNoCodeSearch();"><i class="i_search_w"></i></a>
				 </div>
			</td>
			<th class="hit">발행일자</th>
			<td>
				<input id="ordrgDt" name="ordrgDt" class="input_calendar form-control" autocomplete="off" onkeyup="dateMask(this);"   msg="발행일자"  date  required>
			</td>			
			<th class="hit">발행자</th>
			<td>
                 <div class="search_form">						
			    	<input type="hidden" id="ordrgId" name="ordrgId"  data-search="ordrgId" >
             		<input type="text"	id="ordrgNm" data-search="ordrgNm" msg="발행자" required>
             		<a onclick="openFirstUserSearch();"><i class="i_search_w" id="userIdBtn"></i></a>
                 </div>
			</td>
			<th class="hit">접수자</th>
			<td>
			     <div class="search_form">						
			    	<input type="hidden" id="regId" name="regId" data-search="regId" >
             		<input type="text"	id="regNm" data-search="regNm" msg="접수자" required>
             		<a onclick="openSecondUserSearch();"><i class="i_search_w" id="userIdBtn"></i></a>
                 </div>
			</td>
        </tr>
		 <tr>     
		   <th class="hit">SalesCode</th>
				<td>
					<div class="search_form">
					    <input type="text" id="salesCd" name="salesCd"  onkeyup="event.keyCode == 13 ? gridView.setData(0) : ''" msg="Sales Code" required>
					   	<a onclick="wbsSalesCodeSearch();"><i class="i_search_w"></i></a>
				    </div>
				</td>
			<th>대표도면번호</th>
			<td>
				<input type="text" id="matrDrwNo" name="matrDrwNo" >
			</td>
			<th>고객사</th>
			<td>
			    <input type="hidden" id="clntCd" name="clntCd" data-search="clntCd" msg="고객사">				
				<div class="search_form">
					<input type="text" id="clntNm" name="clntNm" data-search="clntNm" >
					<a onclick="clntSearch();"><i class="i_search_w"></i></a>
				</div>
			</td>
			<th>고객사PJT</th>
			<td>
				<input type="text" id="clntPjt" name="clntPjt" msg="고객사PJT"> 
			</td>
			<th>신작구분</th>
			<td>
			   <select id="newCd" name="newCd" data-kind="NEWCD" data-search="newCd" >
				 <option value="">전체</option>
			   </select>
			</td>
        </tr>
        <tr>
			<th class="hit">요청구분</th>
			<td style="text-align:left;">
			  <input type="hidden" id="reqCd"  name="reqCd" msg="요청구분" required>
			  <div data-kind="REQCD"></div> 
			</td>
			<th class="hit">요구일정</th>
			<td>
				<input id="reqDt" name="reqDt" class="input_calendar form-control" autocomplete="off" onkeyup="dateMask(this);"    msg="요구일정"  date  required >
			</td>
			<th>수주번호</th>
			<td>
			    <input type="text" id="ordrsNo" name="ordrsNo" >
			</td>
			<th>Project명</th>
			<td>
			    <input type="text" id="projNm" name="projNm" >
			</td>
			<th colspan="2">
			</th>
        </tr>

        <tr>
			<th>출장자</th>
			<td style="text-align:left;">
			   <input type="hidden" id="bustCd"  name="bustCd" >
			    <div data-kind="BUSTCD"></div>
			  <!--  <input type="radio" id="BUSTCDCP"  name="BUSTCDCP" value="BUSTCD01"> 발주
			   <input type="radio" id="BUSTCDCP"  name="BUSTCDCP" value="BUSTCD02"> 출장 -->
			</td>
			<th>출장자명</th>
			<td>
			     <input type="text" id="bustNm" name="bustNm" >
			</td>
			<th>사내작업</th>
			<td style="text-align:left;">
			    <input type="hidden" id="inwkCd" name="inwkCd" >
			    <div data-kind="INWKCD"></div>
			</td>
			<th>출장장소(고객사)</th>
			<td>
			     <input type="text" id="bustPe" name="bustPe">
			</td>
			<th colspan="2">
			</th>
        </tr>
        <tr style="height:25px;">
			<th class="hit">분류</th>
			<td colspan= "9" style="text-align:left;">	
			  <input type="hidden" id="partCd" name="partCd">		   
			  <div data-kind="COBTP"></div>
			</td>
       </tr>
      </table>
      <table>
        <colgroup>
          <col width="7%">
          <col width="13%">
          <col width="20%">
          <col width="13%">
          <col width="20%">
          <col width="5%">
        </colgroup>
           <tr>
             <th> 
                <input type="hidden" name="deptCd" id="deptCd"><!-- COBGB -->
                <input type="hidden" name="deptCd2" id="deptCd2"><!-- COBGBP -->
             </th>           
               <th style="text-align:center;font-weight:bold;" >
	                             영업<br>
	             <input type="checkbox" id="COBGBP1" name="COBGBPCP" value="COBGBP11" onClick="checkOneDept(this,'COBGBPCP');"> 국내
	             <input type="checkbox" id="COBGBP2" name="COBGBPCP" value="COBGBP12" onClick="checkOneDept(this,'COBGBPCP');"> 해외
             </th>
             <th style="text-align:center;font-weight:bold;" >
                                      기술연구소<br>
                 <input type="checkbox" id="COBGBP3" name="COBGBPCP" value="COBGBP21" onClick="checkOneDept(this,'COBGBPCP');"> 선형개발
                 <input type="checkbox" id="COBGBP4" name="COBGBPCP" value="COBGBP22" onClick="checkOneDept(this,'COBGBPCP');"> 개발설계
                 <input type="checkbox" id="COBGBP5" name="COBGBPCP" value="COBGBP23" onClick="checkOneDept(this,'COBGBPCP');"> 양산설계
             </th>
             <th style="text-align:center;font-weight:bold;">
                              생산<br>
             </th>
             <th style="text-align:center;font-weight:bold;">
				 구매외주팀<br>
				 <input type="checkbox" id="COBGBP6" name="COBGBPCP" value="COBGBP41" onClick="checkOneDept(this,'COBGBPCP');"> 기계
				 <input type="checkbox" id="COBGBP7" name="COBGBPCP" value="COBGBP42" onClick="checkOneDept(this,'COBGBPCP');"> 가공
				 <input type="checkbox" id="COBGBP8" name="COBGBPCP" value="COBGBP43" onClick="checkOneDept(this,'COBGBPCP');"> 전기
		     </th>
             <th style="text-align:center;font-weight:bold;">
                 <input type="checkbox" id="COBGBP9" name="COBGBPCP" value="COBGBP91" onClick="checkOneDept(this,'COBGBPCP');">기타( )
             </th> 
          </tr>
             <tr> 
                 <th><input type="hidden" name="midCd" id="midCd" >
			         <input type="hidden" name="subCd" id="subCd" >      
			    </th>               
                 <td>
                 <!--<table data-kind="COBGB1"></table> -->
                       <table>
			             <tr>
			                <th style="width:25%;height:20px;">            
			                                      수주
			                </th>
			                 <td style="width:75%;text-align:left;">
			                  <input type="checkbox" id="COBGB111" name="COBGBCP" value="COBGB1101"  onClick="checkOne(this,'COBGBCP','COBGB11','COBGB1101');"> 정상
			                 </td>
			             </tr>
			             <tr>
			                 <th rowspan="6">사양</th>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB121" name="COBGBCP" value="COBGB1201"  onClick="checkOne(this,'COBGBCP','COBGB12','COBGB1201');"> PFU누락
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB122" name="COBGBCP" value="COBGB1202"  onClick="checkOne(this,'COBGBCP','COBGB12','COBGB1202');"> PFU오기
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB123" name="COBGBCP" value="COBGB1203"  onClick="checkOne(this,'COBGBCP','COBGB12','COBGB1203');"> 사양협의 미흡
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;"> 
			                  <input type="checkbox" id="COBGB124" name="COBGBCP" value="COBGB1204"  onClick="checkOne(this,'COBGBCP','COBGB12','COBGB1204');"> 고객추가 요구
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB125" name="COBGBCP" value="COBGB1205"  onClick="checkOne(this,'COBGBCP','COBGB12','COBGB1205');"> 고객사양 변경
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB126" name="COBGBCP" value="COBGB1206"  onClick="checkOne(this,'COBGBCP','COBGB12','COBGB1206');"> 제품Data 오류
			                 </td>
			             </tr>
			             <tr>
			                 <th rowspan="3">출장</th>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB131" name="COBGBCP" value="COBGB1301"  onClick="checkOne(this,'COBGBCP','COBGB13','COBGB1301');"> 이벤트 대응
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB132" name="COBGBCP" value="COBGB1302"  onClick="checkOne(this,'COBGBCP','COBGB13','COBGB1302');"> 양산 대응
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB133" name="COBGBCP" value="COBGB1303"  onClick="checkOne(this,'COBGBCP','COBGB13','COBGB1303');"> 추가조건작업
			                 </td>
			             </tr>
			             <tr>
			                 <th>기타</th>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB191" name="COBGB19" value="COBGB1901"  onClick="checkOne(this,'COBGBCP','COBGB19','COBGB1901');">기타
			                 </th>
			             </tr> 
			              <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr> 
			              <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr> 
			              <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr> 
			              <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr>                     
		             </table>
                 </td>
                 <td>  <!-- <table data-kind="COBGB2"></table> 기술연구소-->
		             <table>
		              <tr>
		               <th style="width:20%;" rowspan="2">
		                                     출도
		               </th>
		               <td style="width:33%;text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB211" name="COBGBCP" value="COBGB2101" onClick="checkOne(this,'COBGBCP','COBGB21','COBGB2101');"> 정상
		               </td><!-- 출도 -->		               
		               <th style="width:15%" rowspan="7">
		                                       도면
		               </th>
		               <td style="width:35%;text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB251" name="COBGBCP" value="COBGB2501" onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2501');">대칭오류
		               </td><!-- 도면 -->	
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB212" name="COBGBCP" value="COBGB2102"  onClick="checkOne(this,'COBGBCP','COBGB21','COBGB2102');"> 선발주
		               </td><!-- 출도 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB252" name="COBGBCP" value="COBGB2502"  onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2502');">조립간섭/조립불일치
		               </td>
		              </tr>	
		               <tr>
		               <th rowspan="4">3D적용</th>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB221" name="COBGBCP" value="COBGB2201"  onClick="checkOne(this,'COBGBCP','COBGB22','COBGB2201');"> 1단계
		               </td><!-- 3D적용 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB253" name="COBGBCP" value="COBGB2503"  onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2503');">도면표기 부적합
		               </td>	<!-- 도면 -->
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB222" name="COBGBCP" value="COBGB2202"  onClick="checkOne(this,'COBGBCP','COBGB22','COBGB2202');"> 2단계
		               </td><!-- 3D적용 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB254" name="COBGBCP" value="COBGB2504"  onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2504');">가공표기 부적합
		               </td>	<!-- 도면 -->
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB223" name="COBGBCP" value="COBGB2203"  onClick="checkOne(this,'COBGBCP','COBGB22','COBGB2203');"> 3단계
		               </td><!-- 3D적용 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB255" name="COBGBCP" value="COBGB2505"  onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2505');">가공기준 부적합
		               </td><!-- 도면 -->
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB224" name="COBGBCP" value="COBGB2204"  onClick="checkOne(this,'COBGBCP','COBGB22','COBGB2204');"> 4단계
		               </td><!-- 3D적용 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB256" name="COBGBCP" value="COBGB2506"  onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2506');">모델링 부적합
		               </td><!--도면 -->
		              </tr>	
		               <tr>
		               <th rowspan="5">단순</th>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB231" name="COBGBCP" value="COBGB2301"  onClick="checkOne(this,'COBGBCP','COBGB23','COBGB2301');"> 수량과다
		               </td><!--단순 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB257" name="COBGBCP" value="COBGB2507"  onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2507');">표면처리 부적합
		               </td><!--도면 -->
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB232" name="COBGBCP" value="COBGB2302"  onClick="checkOne(this,'COBGBCP','COBGB23','COBGB2302');"> 수량부족
		               </td><!--단순 -->
		               <th rowspan="3">지침</th>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB261" name="COBGBCP" value="COBGB2601"  onClick="checkOne(this,'COBGBCP','COBGB26','COBGB2601');">PFU와 불일치
		               </td><!--지침 -->
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB233" name="COBGBCP" value="COBGB2303"  onClick="checkOne(this,'COBGBCP','COBGB23','COBGB2303');"> 부품누락
		               </td><!--단순 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB262" name="COBGBCP" value="COBGB2602"  onClick="checkOne(this,'COBGBCP','COBGB26','COBGB2602');"> Rev. 미적용
		               </td><!--지침 -->
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB234" name="COBGBCP" value="COBGB2304"  onClick="checkOne(this,'COBGBCP','COBGB23','COBGB2304');"> 치수누락
		               </td><!--단순 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB263" name="COBGBCP" value="COBGB2603"  onClick="checkOne(this,'COBGBCP','COBGB26','COBGB2603');">표준 미준수
		               </td><!--지침 -->
		              </tr>	
		              <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB235" name="COBGBCP" value="COBGB2305"  onClick="checkOne(this,'COBGBCP','COBGB23','COBGB2305');"> 도면누락(추가)
		               </td><!--단순 -->
		               <th>기타</th>
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB291" name="COBGBCP" value="COBGB2999"  onClick="checkOne(this,'COBGBCP','COBGB29','COBGB2999');">기타
		               </td>
		              </tr>	
		              <tr>
		               <th rowspan="4">사양</th>
		               <td style="text-align:left;height:20px;">
		                 <input type="checkbox" id="COBGB241" name="COBGBCP" vlaue="COBGB2401"  onClick="checkOne(this,'COBGBCP','COBGB24','COBGB2401');">소재 부적합
		               </td><!-- 사양 -->
		               <th></th>
		               <td></td>
		              </tr>
		              <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB242" name="COBGBCP" vlaue="COBGB2402"  onClick="checkOne(this,'COBGBCP','COBGB24','COBGB2402');">용량 부적합
		               </td><!-- 사양 -->
		               <th></th>
		               <td></td>
		              </tr>
		              <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB243" name="COBGBCP" vlaue="COBGB2403"  onClick="checkOne(this,'COBGBCP','COBGB24','COBGB2403');">강도 부적합
		               </td><!-- 사양 -->
		               <th></th>
		               <td></td>
		              </tr>	
		              <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB244" name="COBGBCP" vlaue="COBGB2404"  onClick="checkOne(this,'COBGBCP','COBGB24','COBGB2404');">기능 부적합
		               </td><!-- 사양 -->
		               <th></th>
		               <td></td>
		              </tr>			                           
		             </table>
		         </td>
                 <td><!-- <table data-kind="COBGB3"></table> 생산-->
                 <table>
                   <tr>
                       <th style="width:25%" rowspan="2">제작</th>
                       <td style="width:75%;text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB311" name="COBGBCP" value="COBGB3101" onClick="checkOne(this,'COBGBCP','COBGB31','COBGB3101');"> 조립불량
                       </td>
                   </tr>
                   <tr>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB312" name="COBGBCP" value="COBGB3102" onClick="checkOne(this,'COBGBCP','COBGB31','COBGB3102');"> 생산필요추가
                       </td>
                   </tr>
                   <tr>
                       <th rowspan="5">지침</th>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB321" name="COBGBCP" value="COBGB3201" onClick="checkOne(this,'COBGBCP','COBGB32','COBGB3201');"> 분실
                       </td>
                   </tr>
                   <tr>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB322" name="COBGBCP" value="COBGB3202" onClick="checkOne(this,'COBGBCP','COBGB32','COBGB3202');"> 파손
                       </td>
                   </tr>
                   <tr>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB323" name="COBGBCP" value="COBGB3203" onClick="checkOne(this,'COBGBCP','COBGB32','COBGB3203');"> 정품 미사용
                       </td>
                   </tr>
                   <tr>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB324" name="COBGBCP" value="COBGB3204" onClick="checkOne(this,'COBGBCP','COBGB32','COBGB3204');"> 발송장애
                       </td>
                   </tr>
                   <tr>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB325" name="COBGBCP" value="COBGB3205" onClick="checkOne(this,'COBGBCP','COBGB32','COBGB3205');"> 납기미준수
                       </td>
                  </tr>
                   <tr>
                       <th>기타</th>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB396" name="COBGBCP" value="COBGB3999" onClick="checkOne(this,'COBGBCP','COBGB39','COBGB3999');">기타
                       </td>
                   </tr>
                   <tr style="height:20px;">
	                   <th> </th>
	                   <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                  <th> </th>
	                  <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                  <th> </th>
	                  <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                  <th></th>
	                  <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                  <th> </th>
	                  <td> </th>
			       </tr> 
			      <tr style="height:20px;">
	                  <th> </th>
	                  <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                  <th> </th>
	                  <td> </th>
			       </tr> 
                  </table>                 
                 </td>
                 <td><!-- <table data-kind="COBGB3"></table> 구매외주팀-->
                  <table>
                  <tr>
                   <th style="width:15%" rowspan="2">단순</th>
	               <td style="width:35%;text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB411" name="COBGBCP" value="COBGB4101" onClick="checkOne(this,'COBGBCP','COBGB41','COBGB4101');"> 발주누락
	               </td><!--단순 -->
	               <th style="width:15%" rowspan="4">도면</th>
	               <td style="width:35%;text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB454" name="COBGBCP" value="COBGB4504" onClick="checkOne(this,'COBGBCP','COBGB45','COBGB4504');">도면 누락
	               </td><!--도면 -->
		          </tr>
		          <tr>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB412" name="COBGBCP" value="COBGB4102" onClick="checkOne(this,'COBGBCP','COBGB41','COBGB4102');"> 발주수량오류
	               </td><!--단순 -->
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB453" name="COBGBCP" value="COBGB4503" onClick="checkOne(this,'COBGBCP','COBGB45','COBGB4503');">표기 장애
	               </td><!--도면 -->
		          </tr>
		          <tr>
                   <th>해독</th>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB421" name="COBGBCP" value="COBGB4201" onClick="checkOne(this,'COBGBCP','COBGB42','COBGB4201');">도면해독오류
	               </td><!--해독 -->
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB452" name="COBGBCP" value="COBGB4502" onClick="checkOne(this,'COBGBCP','COBGB45','COBGB4502');">기능 부적합
	               </td><!--도면 -->
		          </tr>
		          <tr>
                   <th rowspan="4">외주</th>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB431" name="COBGBCP" value="COBGB4301" onClick="checkOne(this,'COBGBCP','COBGB43','COBGB4301');"> 외주가공
	               </td><!--외주 -->
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB451" name="COBGBCP" value="COBGB4501" onClick="checkOne(this,'COBGBCP','COBGB45','COBGB4501');">용량 부적합
	               </td><!--도면 -->
		          </tr>
		          <tr>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB432" name="COBGBCP" value="COBGB4302" onClick="checkOne(this,'COBGBCP','COBGB43','COBGB4302');"> 외주설계
	               </td><!--외주 -->
	               <th rowspan="2">제작</th>
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB461" name="COBGBCP" value="COBGB4601" onClick="checkOne(this,'COBGBCP','COBGB46','COBGB4601');">조립장애
	               </td><!--제작 -->
		          </tr>
		          <tr>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB433" name="COBGBCP" value="COBGB4303" onClick="checkOne(this,'COBGBCP','COBGB43','COBGB4303');"> 외주제작
	               </td><!--외주 -->
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB462" name="COBGBCP" value="COBGB4602" onClick="checkOne(this,'COBGBCP','COBGB46','COBGB4602');">제작 누락
	               </td><!--제작  -->
		          </tr>
		          <tr>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB434" name="COBGBCP" value="COBGB4303" onClick="checkOne(this,'COBGBCP','COBGB43','COBGB4303');"> 운송장애
	               </td><!--외주 -->
	               <th rowspan="3">프로그램</th>
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB471" name="COBGBCP" value="COBGB4701" onClick="checkOne(this,'COBGBCP','COBGB47','COBGB4701');">인터록 장애
	               </td>
		          </tr>
		          <tr>
                   <th>지침</th><!--지침 -->
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB441" name="COBGBCP" value="COBGB4401" onClick="checkOne(this,'COBGBCP','COBGB44','COBGB4401');"> 일정미준수
	               </td>
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB472" name="COBGBCP" value="COBGB4702" onClick="checkOne(this,'COBGBCP','COBGB47','COBGB4702');">기능누락
	               </td><!-- 프로그램 -->
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB473" name="COBGBCP" value="COBGB4702" onClick="checkOne(this,'COBGBCP','COBGB47','COBGB4702');">프로그램 부적합
	               </td><!-- 프로그램 -->
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <th rowspan="4">부품</th></th>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB481" name="COBGBCP" value="COBGB4801" onClick="checkOne(this,'COBGBCP','COBGB48','COBGB4801');">제작사 불량
	               </td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB482" name="COBGBCP" value="COBGB4802" onClick="checkOne(this,'COBGBCP','COBGB48','COBGB4802');"> 수량부족
	               </td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB483" name="COBGBCP" value="COBGB4803" onClick="checkOne(this,'COBGBCP','COBGB48','COBGB4803');">파손
	               </td>
		          </tr>
		           <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB484" name="COBGBCP" value="COBGB4804" onClick="checkOne(this,'COBGBCP','COBGB48','COBGB4804');">분실
	               </td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <th></th>
	               <td></td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <th></th>
	               <td></td>
		          </tr>
		         </table>		
                 </td>
                 <td>
                   <input type="hidden" id="COBGB91" name="COBGB91" value="COBGB9999"><!-- 기타 -->
                 </td>
             </tr>
           <tr style="height:25px;">
			<th class="hit">비고</th> <!-- 기타선택시 비고 입력값 필수 -->
			<td colspan= "9" style="text-align:left;">	
			  <input type="text" id="reqRmk" name="reqRmk">	
			</td>
           </tr>
      </table>
      
		<!-- 공유대상자 
		<div class="popup_table">
         <div class="toggle-div" style="padding-left: 0;">
            <div class="" style="padding-left: 0;">
                <div id="est_grid" class="contents"
                     style="margin:0px; padding:0px; height: 380px; width: 100%; min-width: 200px;border-radius:0;">
                    <div style="float:right" style="" class="add_btn pdl10">
                        <a id="addDetailButton" style="margin-top:8px">+</a>
                        <a id="deleteDetailButton" style="margin-top:8px;margin-right:8px;">-</a>
                    </div>
                    <h3 class="location">
                        <a class="file_tag" id="file_tag"
                           style="font-weight:bold ; color: blue; padding-left: 20px;padding-right: 10px;"></a>
                        <span class="page_tit" style="text-align: right;"></span>
                    </h3>
                    <div class="contents" style="height:100%; width:100%; min-width:300px">
                        <div data-ax5grid="approval-grid-modal" data-ax5grid-config="{}" style="height: 100%;"></div>
                    </div>
                </div>
            </div>
        </div>
        </div>-->

    </form>
	</div>

	<!-- 공통 파일 영역 -->
	<div id="fileList_area"></div>
	

</div>
    <!-- 하단 버튼 -->
	<div class ="popup_bottom_btn">
		<button type="button" id="actionBtn" authChk>등록</button>
		<button type="button" class="close_btn"
			onclick="modalStack.close();">닫기</button>
	</div>

<script type="text/javascript">
  //debugger;
	var actionType = null;
	var fileTrgtKey = null;
	
	
	function checkOneDept(element,itemCd) {
		 const checkboxes = document.getElementsByName(itemCd);
		  checkboxes.forEach((cb) => {   cb.checked = false; })		  
		  element.checked = true;
	}
	
	function checkOne(element,itemCd,midVal,subVal) {
		 const checkboxes = document.getElementsByName(itemCd);
		  checkboxes.forEach((cb) => {   cb.checked = false; })		  
		  element.checked = true;		  
		  $("#midCd").val(midVal);
		  $("#subCd").val(subVal);
	}
	
	$(document).ready(function() {
		setCommonSelect($(".popup_area select[data-kind]"));
		setCommonDiv($(".popup_area div[data-kind]"));
		setCommonItem($(".popup_area table[data-kind]"));
		//setCommonCheck($(".popup_area th[data-kind]"));
		setByCoCd(modalStack.last().paramObj.coCd);
		$("#popForm #userId").val(jwt.userId);
		
		//발행일자//
		$('#ordrgDt').datepicker({
			format : "yyyy-mm-dd",
			language : "ko",
			autoclose : true
		}).datepicker("setDate", "today");
		
		//요구일정//
		$('#reqDt').datepicker({
			format : "yyyy-mm-dd",
			language : "ko",
			autoclose : true
		}).datepicker("setDate", "today");

		authChk();						// 권한체크

		actionType = modalStack.last().paramObj.actionType;
		fileTrgtKey = modalStack.last().paramObj.fileTrgtKey;
				
		if (actionType == "C") {
		     $("#costNo").prop("readonly", true);
			$("#actionBtn").text("등록");
			$('#actionBtn').on("click", function() {
				//insertPchsCost();
			});

		} else if (actionType == "U") {
			$('.tit').text('요인별 발주 및 출장요청 수정');
			
			selectQtyReqInfo();
			
			$("#coCd").prop("disabled", true); //??
			$("#ordrgDt").prop("disabled", true);
			$("#ordrgId").prop("disabled", true);
			$("#ordrgNm").prop("disabled", true);
			$("#regId").prop("disabled", true);
			$("#regNm").prop("disabled", true);
			$("#salesCd").prop("disabled", true);
			$("#REQCD1").prop("disabled", true); //reqCd
			$("#REQCD2").prop("disabled", true); 
			$("#reqDt").prop("disabled", true);
			
			$("#reqNo").prop("disabled", true);
			$("#clntCd").prop("disabled", true);
			$("#clntNm").prop("disabled", true);
			$("#newCd").prop("disabled", true);
			$("#clntPjt").prop("disabled", true);
			$("#projNm").prop("disabled", true);
			
			$('#actionBtn').text("수정");
			$('#actionBtn').on("click", function() {
				//updatePchsCost();
				updateQualityReq();
			});
		}
		
		//---------------------------------------------------------------  
		//첨부 화일 처리 시작 
		//---------------------------------------------------------------  
		fileParam = {
				fileTrgtTyp	: $("#pgmId").val(),
				fileTrgtKey		:fileTrgtKey
		}
  		treeModule.initAll('deptTreeOrdars', 'file-grid', 'FILETREE', fileParam);
		//---------------------------------------------------------------  
		//첨부 화일 처리 끝
		//---------------------------------------------------------------  		
	});
	
	
	 // 발행자 검색 //  
    function openFirstUserSearch() {
    	var paramObj = {
    		  "coCd" : $('#coCd').val(),
    		"userId" : $('#ordrgNm').val(),
    	};
    	openSecondModal("/static/html/cmn/modal/userSearch.html", 300, 500,
    			"사용자 검색", paramObj, function(tree) {
    				var checkedId = tree.get_checked()[0];
    				var checkedNode = tree.get_node(checkedId);    				
    				$('#ordrgId').val(checkedNode.id);
    				$('#ordrgNm').val(checkedNode.text);
    				 gridView.setData(0);
    			});
    }   
	 
	 // 접수자 검색 //  
    function openSecondUserSearch() {
    	var paramObj = {
    		  "coCd" : $('#coCd').val(),
    		"userId" : $('#regNm').val(),
    	};
    	openSecondModal("/static/html/cmn/modal/userSearch.html", 300, 500,
    			"사용자 검색", paramObj, function(tree) {
    				var checkedId = tree.get_checked()[0];
    				var checkedNode = tree.get_node(checkedId);    				
    				$('#regId').val(checkedNode.id);
    				$('#regNm').val(checkedNode.text);
    				 gridView.setData(0);
    			});
    }  	
    
    
	function selectQtyReqInfo() {						//그리드에 뿌리는 데이터
		var formData = {
			"fileTrgtKey" : fileTrgtKey,
		}
		postAjax("/user/qm/qm01/selectQtyReqInfo", formData, null, function(data) {
				$.each(data.result, function(key, value) {
					if ($('#popForm #' + key)[0]) {
						$('#popForm #' + key).val(value);	
							if(key == "reqCd"){ 
								if(value == $("#REQCD1").val()){ $("#REQCD1").prop("checked", true); }
								if(value == $("#REQCD2").val()){ $("#REQCD2").prop("checked", true); }
							}
							if(key == "bustCd"){ 
								if(value == $("#BUSTCD1").val()){ $("#BUSTCD1").prop("checked", true); }
								if(value == $("#BUSTCD2").val()){ $("#BUSTCD2").prop("checked", true); }
							}
							if(key == "inwkCd"){ 
								if(value == $("#INWKCD1").val()){ $("#INWKCD1").prop("checked", true); }
								if(value == $("#INWKCD2").val()){ $("#INWKCD2").prop("checked", true); }	
							}
							if(key == "partCd"){ 
								if(value == $("#COBTP1").val()){ $("#COBTP1").prop("checked", true); }
								if(value == $("#COBTP2").val()){ $("#COBTP2").prop("checked", true); }	
								if(value == $("#COBTP3").val()){ $("#COBTP3").prop("checked", true); }	
								if(value == $("#COBTP4").val()){ $("#COBTP4").prop("checked", true); }	
								if(value == $("#COBTP5").val()){ $("#COBTP5").prop("checked", true); }	
								if(value == $("#COBTP6").val()){ $("#COBTP6").prop("checked", true); }	
								if(value == $("#COBTP7").val()){ $("#COBTP7").prop("checked", true); }	
								if(value == $("#COBTP8").val()){ $("#COBTP8").prop("checked", true); }	
								if(value == $("#COBTP9").val()){ $("#COBTP9").prop("checked", true); }	
								if(value == $("#COBTP10").val()){ $("#COBTP10").prop("checked", true); }
							}
						
						  if(key == "deptCd2"){
							    if (value == $("#COBGBP1").val()){ $("#COBGBP1").prop("checked", true); }
							    if (value == $("#COBGBP2").val()){ $("#COBGBP2").prop("checked", true); } 
							    if (value == $("#COBGBP3").val()){ $("#COBGBP3").prop("checked", true); } 
							    if (value == $("#COBGBP4").val()){ $("#COBGBP4").prop("checked", true); } 
							    if (value == $("#COBGBP5").val()){ $("#COBGBP5").prop("checked", true); } 
							    if (value == $("#COBGBP6").val()){ $("#COBGBP6").prop("checked", true); } 
							    if (value == $("#COBGBP7").val()){ $("#COBGBP7").prop("checked", true); } 
							    if (value == $("#COBGBP8").val()){ $("#COBGBP8").prop("checked", true); } 
							    if (value == $("#COBGBP9").val()){ $("#COBGBP9").prop("checked", true); } 
							  
						  }
						  if(key == "subCd"){
							    if (value == $("#COBGB111").val()){ $("#COBGB111").prop("checked", true); }
							    if (value == $("#COBGB121").val()){ $("#COBGB121").prop("checked", true); } 
							    if (value == $("#COBGB122").val()){ $("#COBGB122").prop("checked", true); } 
							    if (value == $("#COBGB123").val()){ $("#COBGB123").prop("checked", true); } 
							    if (value == $("#COBGB124").val()){ $("#COBGB124").prop("checked", true); } 
							    if (value == $("#COBGB125").val()){ $("#COBGB125").prop("checked", true); } 
							    if (value == $("#COBGB126").val()){ $("#COBGB126").prop("checked", true); } 
							    if (value == $("#COBGB131").val()){ $("#COBGB131").prop("checked", true); } 
							    if (value == $("#COBGB132").val()){ $("#COBGB132").prop("checked", true); } 
							    if (value == $("#COBGB133").val()){ $("#COBGB133").prop("checked", true); } 
							    if (value == $("#COBGB191").val()){ $("#COBGB191").prop("checked", true); } 							    
							    //기술연구소
							    if (value == $("#COBGB211").val()){ $("#COBGB211").prop("checked", true); }
							    if (value == $("#COBGB212").val()){ $("#COBGB212").prop("checked", true); } 							    
							    if (value == $("#COBGB221").val()){ $("#COBGB221").prop("checked", true); } 
							    if (value == $("#COBGB222").val()){ $("#COBGB222").prop("checked", true); } 
							    if (value == $("#COBGB223").val()){ $("#COBGB223").prop("checked", true); } 
							    if (value == $("#COBGB224").val()){ $("#COBGB224").prop("checked", true); } 							    
							    if (value == $("#COBGB231").val()){ $("#COBGB231").prop("checked", true); } 
							    if (value == $("#COBGB232").val()){ $("#COBGB232").prop("checked", true); } 
							    if (value == $("#COBGB233").val()){ $("#COBGB233").prop("checked", true); } 
							    if (value == $("#COBGB234").val()){ $("#COBGB234").prop("checked", true); } 
							    if (value == $("#COBGB235").val()){ $("#COBGB235").prop("checked", true); } 							    
							    if (value == $("#COBGB241").val()){ $("#COBGB241").prop("checked", true); } 
							    if (value == $("#COBGB242").val()){ $("#COBGB242").prop("checked", true); } 
							    if (value == $("#COBGB243").val()){ $("#COBGB243").prop("checked", true); } 
							    if (value == $("#COBGB244").val()){ $("#COBGB244").prop("checked", true); } 
							    if (value == $("#COBGB235").val()){ $("#COBGB235").prop("checked", true); } 							    
							    if (value == $("#COBGB251").val()){ $("#COBGB251").prop("checked", true); } 
							    if (value == $("#COBGB252").val()){ $("#COBGB252").prop("checked", true); } 
							    if (value == $("#COBGB253").val()){ $("#COBGB253").prop("checked", true); } 
							    if (value == $("#COBGB254").val()){ $("#COBGB254").prop("checked", true); } 
							    if (value == $("#COBGB255").val()){ $("#COBGB255").prop("checked", true); } 
							    if (value == $("#COBGB256").val()){ $("#COBGB256").prop("checked", true); } 
							    if (value == $("#COBGB257").val()){ $("#COBGB257").prop("checked", true); } 							    
							    if (value == $("#COBGB261").val()){ $("#COBGB261").prop("checked", true); } 
							    if (value == $("#COBGB262").val()){ $("#COBGB262").prop("checked", true); } 
							    if (value == $("#COBGB263").val()){ $("#COBGB263").prop("checked", true); } 							    
							    if (value == $("#COBGB291").val()){ $("#COBGB291").prop("checked", true); } 							    
							    //생산
							    if (value == $("#COBGB311").val()){ $("#COBGB311").prop("checked", true); } 
							    if (value == $("#COBGB312").val()){ $("#COBGB312").prop("checked", true); } 
							    if (value == $("#COBGB321").val()){ $("#COBGB321").prop("checked", true); } 
							    if (value == $("#COBGB322").val()){ $("#COBGB322").prop("checked", true); } 
							    if (value == $("#COBGB323").val()){ $("#COBGB323").prop("checked", true); } 
							    if (value == $("#COBGB324").val()){ $("#COBGB324").prop("checked", true); } 
							    if (value == $("#COBGB325").val()){ $("#COBGB325").prop("checked", true); } 
							    if (value == $("#COBGB391").val()){ $("#COBGB391").prop("checked", true); } 
							    //구메외주팀
							    if (value == $("#COBGB411").val()){ $("#COBGB411").prop("checked", true); } 
							    if (value == $("#COBGB412").val()){ $("#COBGB412").prop("checked", true); } 
							    if (value == $("#COBGB421").val()){ $("#COBGB421").prop("checked", true); } 
							    if (value == $("#COBGB431").val()){ $("#COBGB431").prop("checked", true); } 
							    if (value == $("#COBGB432").val()){ $("#COBGB432").prop("checked", true); } 
							    if (value == $("#COBGB433").val()){ $("#COBGB433").prop("checked", true); } 
							    if (value == $("#COBGB434").val()){ $("#COBGB434").prop("checked", true); } 
							    if (value == $("#COBGB441").val()){ $("#COBGB441").prop("checked", true); } 
							    if (value == $("#COBGB451").val()){ $("#COBGB451").prop("checked", true); } 
							    if (value == $("#COBGB452").val()){ $("#COBGB452").prop("checked", true); } 
							    if (value == $("#COBGB453").val()){ $("#COBGB453").prop("checked", true); } 
							    if (value == $("#COBGB454").val()){ $("#COBGB454").prop("checked", true); } 
							    if (value == $("#COBGB461").val()){ $("#COBGB461").prop("checked", true); } 
							    if (value == $("#COBGB462").val()){ $("#COBGB462").prop("checked", true); } 
							    if (value == $("#COBGB471").val()){ $("#COBGB471").prop("checked", true); } 
							    if (value == $("#COBGB472").val()){ $("#COBGB472").prop("checked", true); } 
							    if (value == $("#COBGB473").val()){ $("#COBGB473").prop("checked", true); } 
							    if (value == $("#COBGB481").val()){ $("#COBGB481").prop("checked", true); } 
							    if (value == $("#COBGB482").val()){ $("#COBGB482").prop("checked", true); } 
							    if (value == $("#COBGB483").val()){ $("#COBGB483").prop("checked", true); } 
							    if (value == $("#COBGB484").val()){ $("#COBGB484").prop("checked", true); } 
							    //기타
							    if(value == $("#COBGB91").val()){ }
						  }
						 
						if ($('#popForm #' + key).is('[comma]')) {
							onlyNumber($('#popForm #' + key)[0]);
						     
						}
					}
				});
				
		});
	}



	 // 등록
	function insertPchsCost() {
		if (inputValidation($('.popup_area [required]'))) {						// 필수 필드의 유효성 검사
			var formData = makeFormData();										// 요청이 통과하면 makeFormData() 함수를 이용해 formData를 생성
			filePostAjax("/user/sm/sm10/insertPchsCost", formData,				// 파일을 포함한 데이터를 서버로 전송하는 비동기적인 AJAX 요청을 수행
					function(data) {
						alert(data.resultMessage);								// 결과 메시지를 alert으로 출력
						if (data.resultCode == 200) {							//  요청이 성공(200)한 경우, gridView.setData(0)를 호출하여 그리드 뷰를 업데이트하고,
							gridView.setData(0);
							modalStack.close();									// 모달을 닫음
						}
					});
		}
	}
	
	// 수정
	function updateQualityReq(){	
		
		 if (inputValidation($('.popup_area [required]'))) {						// 필수 필드의 유효성 검사
			 
		    if($("#REQCD1").prop("checked")){ $("#reqCd").val($("#REQCD1").val()); }
			if($("#REQCD2").prop("checked")){ $("#reqCd").val($("#REQCD2").val()); }
			if($("#BUSTCD1").prop("checked")){ $("#bustCd").val($("#REQCD1").val()); }
			if($("#BUSTCD2").prop("checked")){ $("#bustCd").val($("#REQCD2").val()); }
			if($("#INWKCD1").prop("checked")){ $("#inwkCd").val($("#INWKCD1").val()); }
			if($("#INWKCD2").prop("checked")){ $("#inwkCd").val($("#INWKCD2").val()); }				
			if($("#COBTP1").prop("checked")){ $("#partCd").val($("#COBTP1").val()); }
			if($("#COBTP2").prop("checked")){ $("#partCd").val($("#COBTP2").val()); }
			if($("#COBTP3").prop("checked")){ $("#partCd").val($("#COBTP3").val()); }
			if($("#COBTP4").prop("checked")){ $("#partCd").val($("#COBTP4").val()); }
			if($("#COBTP5").prop("checked")){ $("#partCd").val($("#COBTP5").val()); }
			if($("#COBTP6").prop("checked")){ $("#partCd").val($("#COBTP6").val()); }
			if($("#COBTP7").prop("checked")){ $("#partCd").val($("#COBTP7").val()); }
			if($("#COBTP8").prop("checked")){ $("#partCd").val($("#COBTP8").val()); }
			if($("#COBTP9").prop("checked")){ $("#partCd").val($("#COBTP9").val()); }
			if($("#COBTP10").prop("checked")){ $("#partCd").val($("#COBTP10").val()); } 		 
		 
			var formData = makeFormData();										// 요청이 통과하면 makeFormData() 함수를 이용해 formData를 생성
	      	filePostAjax("/user/qm/qm01/updateQualityReq", formData,function(data) {
						alert(data.resultMessage);
						if (data.resultCode == 200) {
							gridView.setData(0);
							modalStack.close();
						}
					});
			}
	}

	//----------------------------------------------//

	function makeFormData() {
		// 금액 콤마 제거
		$.each($('.popup_area input[comma]'), function(idx, elem) {
			deleteComma(elem);
		});
		// 날짜 하이픈 제거
		$.each($('.popup_area input[date]'), function(idx, elem) {
			deleteHyphen(elem);
		});
		// 폼데이터 생성
		var formData = new FormData($("#popForm")[0]);
		
		//---------------------------------------------------------------  
		//-------itemarr  --첨부화일 처리를 위한 부분 시작
		//---------------------------------------------------------------  
		// 유저아이디 추가
		formData.append("userId", jwt.userId);
		formData.append("clntCd", $('#clntCd').val());			//첨부화일용
		formData.append("prdtCd", $('#prdtCd').val());			//첨부화일용
		//formData.append("itemCd", $('#itemDiv').val());			//첨부화일용
		formData.append("itemCd", ' ');
		formData.append("salesCd", $('#salesCd').val());
		formData.append("prjctCd", $('#clntPjt').val());		//첨부화일용
		
		//-------itemarr  --첨부화일 처리를 위한 부분 시작
		formData.append("comonCd", treeModule.getFileNodeId());	//첨부화일용
		
		//---------------------------------------------------------------  
        
        //---------------------------------------------------------------  
		var fileUploadArr = [];
		var tempArr = [];
		
		tempArr = treeModule.getFileArr();
		$.each(tempArr, function(idx, obj) {
			if (obj.fileKey == 0) {
                formData.append("files", obj.file);
                obj.file = '';
                fileUploadArr.push(obj);
			}
		});

		formData.append("uploadFileArr", JSON.stringify(fileUploadArr));
		formData.append("deleteFileArr", JSON.stringify(treeModule.getDeleteFileArr()));
		//---------------------------------------------------------------  
		//--첨부화일 처리를 위한 부분 끝
		//--------------------------------------------------------------- 

		return formData;
	}

	
    //Sales Code (수주마스터, 수주상세테이블 조인) 검색
    function wbsSalesCodeSearch() {
        var paramObj = {
           "coCd" : $('#coCd').val(),
           "salesCd": $('#salesCd').val()
        };
        openSecondModal("/static/html/cmn/modal/SalesCodeTreeSearch.html", 1000, 500, "SALES CODE 검색", paramObj, function (grid){
            var row = grid.target.getList("selected")[0];
            $('#salesCd').val(row.salesCd);
            $('#clntPjt').val(row.clntPjt);
            $('#eqpNm').val(row.eqNm);
            $('#vendCd').val(row.ordrsClntCd);
            $('#vendNm').val(row.ordrsClntNm);
            $('#eqpNm').val(row.clntPjt);
            $('#prdtCd').val(row.prdtCd);
			$('#prdtNm').val(row.prdtCdNm);
            $('#itemDiv').val(row.itemDiv);
            $('#itemDivNm').val(row.itemDivNm);
        });
    }
    		
	
	// 고객사 검색
	function clntSearch() {
		openSecondModal("/static/html/cmn/modal/clntSearch.html", 600, 420,
				"고객사 검색", {}, function(grid) {
					var row = grid.target.getList("selected")[0];
					$('#clntCd').val(row.clntCd);
					$('#clntNm').val(row.clntNm);
				});
	}
	
	// 자재 품번 팝업 호출하는 함수
    function openMatListSearch(openType) {
          //debugger;
          var paramObj = {
      			"searchValue" : $("#matrNm").val()
          }
          openSecondModal("/static/html/cmn/modal/matListSearch.html", 600, 420, "자재 품번 검색", paramObj, function(grid) {
                        var row = grid.target.getList("selected")[0];
                        if (openType == "P") {
							$('#matrCd').val(row.matrCd);		// 	품번 값 가져오기
							$('#matrNm').val(row.matrNm);	//	품번 값 가져오기
                        } 
                 });
    }
		
	function setByCoCd(value) {
		$('#coCd option:not([value="'+value+'"])').remove();
	}

</script>