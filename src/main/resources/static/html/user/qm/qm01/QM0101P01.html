<div class="popup_area of_a" style="width: 100%; height: 100%;">
    <div class="tit_contents">
      <h4 class="tit">요인별 발주 및 출장요청 등록</h4>
    </div>
  <form id="popForm" onSubmit="return false;">
    <div class="form-group popup_table">
		<input type="hidden" id="fileTrgtKey"  	name="fileTrgtKey">
		<input type="hidden" id="userId"     	name="userId">
		<input type="hidden" id="pgmId"     	name="pgmId"	value="QM0101P01">
 	<table>
        <colgroup>
          <col width="11%">
          <col width="14%">
          <col width="11%">
          <col width="14%">
          <col width="11%">
          <col width="14%">
          <col width="11%">
          <col width="14%">
          <col width="11%">
          <col width="14%">
        </colgroup>
        <tr>
			<th class="hit">회사</th>
			<td>
				<select id="coCd1" name="coCd1" data-kind="CO" >
				</select>
			</td>
			<th >관리번호</th>
			<td>
				<div class="search_form">
				   <input type="text" id="reqNo" name="reqNo" >
				   	<a onclick="reqNoCodeSearch();"><i class="i_search_w"></i></a>
			    </div>
			</td>
			<th class="hit">발행일자</th>
			<td>
				<input id="ordrgDt" name="ordrgDt" class="input_calendar form-control" autocomplete="off" onkeyup="dateMask(this);"   msg="발행일자"  date >
			</td>			
			<th class="hit">발행자</th>
			<td>
			     <div class="search_form">						
			    	<input type="hidden" id="userId_S1" name="userId_S1" >
             		<input type="text"	id="userName_S1">
             		<a onclick="openFirstUserSearch();"><i class="i_search_w" id="userIdBtn"></i></a>
                 </div>
			</td>
			<th class="hit">접수자</th>
			<td>
			     <div class="search_form">						
			    	<input type="hidden" id="regId_S1" name="regId_S1" >
             		<input type="text"	id="regNm_S1"  >
             		<a onclick="openSecondUserSearch();"><i class="i_search_w" id="userIdBtn"></i></a>
                 </div>
			</td>
        </tr>
		 <tr>     
		   <th class="hit">SalesCode</th>
				<td>
					<div class="search_form">
					    <input type="text" id="salesCd" name="salesCd"  onkeyup="event.keyCode == 13 ? gridView.setData(0) : ''">
					   	<a onclick="wbsSalesCodeSearch();"><i class="i_search_w"></i></a>
				    </div>
				</td>
			<th>대표도면번호</th>
			<td>
				<input type="text" id="matrDrwNo_S" name="matrDrwNo_S" >
			</td>
			<th>고객사</th>
			<td>
			    <input type="hidden" id="clntCd" name="clntCd" >
				<div class="search_form">
					<input type="text" id="clntNm" name="clntNm" >
					<a onclick="clntSearch();"><i class="i_search_w"></i></a>
				</div>
			</td>
			<th>고객사PJT</th>
			<td>
			    <input type="hidden" id="clntPjtCd" name="clntPjtCd" msg="고객사PJT">
				<input type="text" id="clntPjt" name="clntPjt" msg="고객사PJT"> 
			</td>
			<th>신작구분</th>
			<td>
			</td>
        </tr>
        <tr>
			<th class="hit">요청구분</th>
			<td >
			     <div data-kind="REQCD"></div>
			</td>
			<th class="hit">요구일정</th>
			<td>
				<input id="reqDt" name="reqDt" class="input_calendar form-control" autocomplete="off" onkeyup="dateMask(this);"  date>
			</td>
			<th>수주번호</th>
			<td>
			    <input type="text" id="ordrsNo" name="ordrsNo" >
			</td>
			<th>Project명</th>
			<td>
			    <input type="text" id="clntPjt" name="clntPjt" >
			</td>
			<th colspan="2">
			</th>
        </tr>

        <tr>
			<th>출장자</th>
			<td>
			    <div data-kind="BUSTCD"></div>
			</td>
			<th>출장자명</th>
			<td>
			     <input type="text" id="bustNm" name="bustNm" >
			</td>
			<th>사내작업</th>
			<td>
			     <div data-kind="INWKCD"></div>
			</td>
			<th>출장장소(고객사)</th>
			<td>
			     <input type="text" id="bustPe" name="bustPe">
			</td>
			<th colspan="2">
			</th>
        </tr>
        <tr>
			<th class="hit">분류</th>
			<td colspan= "9">			   
			     <div data-kind="COBTP"></div>
			</td>
       </tr>
      </table>
      <table>
        <colgroup>
          <col width="7%">
          <col width="13%">
          <col width="20%">
          <col width="13%">
          <col width="20%">
          <col width="5%">
        </colgroup>
           <tr>
             <th></th>
             <th style="text-align:center;font-weight:bold;" >
	             <input type="hidden" name="COBGB" id="COBGB" value="COBGB1"> 영업<br>
	             <input type="checkbox" id="COBGBP"  name="COBGBP" value="COBGBP11" "> 국내
	             <input type="checkbox" id="COBGBP"  name="COBGBP" value="COBGBP12" "> 해외
             </th>
             <th style="text-align:center;font-weight:bold;" >
                 <input type="hidden" name="COBGB" id="COBGB" value="COBGB2"> 기술연구소<br>
                 <input type="checkbox" id="COBGBP"  name="COBGBP" value="COBGBP21" > 선형개발
                 <input type="checkbox" id="COBGBP"  name="COBGBP" value="COBGBP22" > 개발설계
                 <input type="checkbox" id="COBGBP"  name="COBGBP" value="COBGBP23"> 양산설계
             </th>
             <th style="text-align:center;font-weight:bold;"  ><input type="hidden" name="COBGB" id="COBGB" value="COBGB3"> 생산<br> </th>
             <th style="text-align:center;font-weight:bold;"  ><input type="hidden" name="COBGB" id="COBGB" value="COBGB4"> 구매외주팀<br>
              <input type="checkbox" id="COBGBP"  name="COBGBP" value="COBGBP41" > 기계
              <input type="checkbox" id="COBGBP"  name="COBGBP" value="COBGBP42"> 가공
              <input type="checkbox" id="COBGBP"  name="COBGBP" value="COBGBP43"> 전기</th>
             <th style="text-align:center;font-weight:bold;">
               <input type="hidden" name="COBGB" id="COBGB" value="COBGB9"> 
               <input type="checkbox" id="COBGBP"  name="COBGBP" value="COBGBP91">기타( )
             </th> 
          </tr>
             <tr> 
                 <th></th>               
                 <td>
                     <!-- <table data-kind="COBGB1"></table> 영업-->
                   <table>
			             <tr>
			                 <th style="width:25%"><input type="hidden" name="COBGB1" id="COBGB1" value="COBGB11">수주</th>
			                 <td style="width:75%"><input type="checkbox" id="COBGB11" name="COBGB11" value="COBGB1101"> 정상</td>
			             </tr>
			             <tr>
			                 <th rowspan="6"><input type="hidden" name="COBGB1" id="COBGB1" value="COBGB12">사양</th>
			                 <td><input type="checkbox" id="COBGB12" name="COBGB12" value="COBGB1201"> PFU누락</td>
			             </tr>
			             <tr>
			                 <td><input type="checkbox" id="COBGB12" name="COBGB12" value="COBGB1202"> PFU오기</td>
			             </tr>
			             <tr>
			                 <td><input type="checkbox" id="COBGB12" name="COBGB12" value="COBGB1203"> 사양협의 미흡</td>
			             </tr>
			             <tr>
			                 <td><input type="checkbox" id="COBGB12" name="COBGB12" value="COBGB1204"> 고객추가 요구</td>
			             </tr>
			             <tr>
			                 <td><input type="checkbox" id="COBGB12" name="COBGB12" value="COBGB1205"> 고객사양 변경</td>
			             </tr>
			             <tr>
			                 <td><input type="checkbox" id="COBGB12" name="COBGB12" value="COBGB1206"> 제품Data 오류</td>
			             </tr>
			             <tr>
			                 <th rowspan="3"><input type="hidden" name="COBGB1" id="COBGB1" value="COBGB13">출장</th>
			                 <td><input type="checkbox" id="COBGB13" name="COBGB13" value="COBGB1301"> 이벤트 대응</td>
			             </tr>
			             <tr>
			                 <td><input type="checkbox" id="COBGB13" name="COBGB13" value="COBGB1302"> 양산 대응</td>
			             </tr>
			             <tr>
			                 <td><input type="checkbox" id="COBGB13" name="COBGB13" value="COBGB1303"> 추가조건작업</td>
			             </tr>
			             <tr>
			                 <th><input type="hidden" name="COBGB1" id="COBGB1" value="COBGB19">기타</th>
			                 <td><input type="checkbox" id="COBGB19" name="COBGB19" value="COBGB19">기타</th>
			             </tr> 
			              <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr> 
			              <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr> 
			              <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr> 
			              <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr>   
			               <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr> 			                     
		             </table>
                 </td>
                 <td>  <!-- <table data-kind="COBGB2"></table> 기술연구소-->
		             <table>
		              <tr>
		               <th style="width:15%" rowspan="2"><input type="hidden" name="COBGB2" id="COBGB2" value="COBGB21">출도</th>
		               <td style="width:35%"><input type="checkbox" id="COBGB21" name="COBGB21" value="COBGB2101"> 정상</td><!-- 출도 -->		               
		               <th style="width:15%" rowspan="7"><input type="hidden" name="COBGB2" id="COBGB2" value="COBGB25">도면</th>
		               <td style="width:35%" ><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2501">대칭오류</td><!-- 도면 -->	
		              </tr>	
		               <tr>
		               <td><input type="checkbox" id="COBGB21" name="COBGB21" value="COBGB2102"> 선발주</td><!-- 출도 -->
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2502">조립간섭/조립불일치</td>
		              </tr>	
		               <tr>
		               <th rowspan="4"><input type="hidden" name="COBGB2" id="COBGB2" value="COBGB22">3D적용</th>
		               <td><input type="checkbox" id="COBGB22" name="COBGB22" value="COBGB2201"> 1단계 </td><!-- 3D적용 -->
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2503">도면표기 부적합</td>	<!-- 도면 -->
		              </tr>	
		               <tr>
		               <td><input type="checkbox" id="COBGB22" name="COBGB22" value="COBGB2202"> 2단계</td><!-- 3D적용 -->
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2504">가공표기 부적합</td>	<!-- 도면 -->
		              </tr>	
		               <tr>
		               <td><input type="checkbox" id="COBGB22" name="COBGB22" value="COBGB2203"> 3단계</td><!-- 3D적용 -->
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2505">가공기준 부적합</td><!-- 도면 -->
		              </tr>	
		               <tr>
		               <td><input type="checkbox" id="COBGB22" name="COBGB22" value="COBGB2204"> 4단계</td><!-- 3D적용 -->
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2506">모델링 부적합</td><!--도면 -->
		              </tr>	
		               <tr>
		               <th rowspan="5"><input type="hidden" name="COBGB2" id="COBGB2" value="COBGB23">단순</th>
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2301"> 수량과다</td><!--단순 -->
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2507">표면처리 부적합</td><!--도면 -->
		              </tr>	
		               <tr>
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2302"> 수량부족</td><!--단순 -->
		               <th rowspan="3"><input type="hidden" name="COBGB2" id="COBGB2" value="COBGB26">지침</th>
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2601">PFU와 불일치</td><!--지침 -->
		              </tr>	
		               <tr>
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2303"> 부품누락</td><!--단순 -->
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2602">Rev. 미적용</td><!--지침 -->
		              </tr>	
		               <tr>
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2304"> 치수누락</td><!--단순 -->
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2603">표준 미준수</td><!--지침 -->
		              </tr>	
		              <tr>
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2305"> 도면누락(추가)</td><!--단순 -->
		               <th><input type="hidden" name="COBGB2" id="COBGB2" value="COBGB29">기타</th>
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" value="COBGB2999">기타</td>
		              </tr>	
		              <tr>
		               <th rowspan="4"><input type="hidden" name="COBGB2" id="COBGB2" value="COBGB24">사양</th>
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" vlaue="COBGB2404">소재 부적합</td><!-- 사양 -->
		               <th></th>
		               <td></td>
		              </tr>
		              <tr>
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" vlaue="COBGB2403">용량 부적합</td><!-- 사양 -->
		               <th></th>
		               <td></td>
		              </tr>
		              <tr>
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" vlaue="COBGB2402">강도 부적합</td><!-- 사양 -->
		               <th></th>
		               <td></td>
		              </tr>	
		              <tr>
		               <td><input type="checkbox" id="COBGB23" name="COBGB23" vlaue="COBGB2401">기능 부적합</td><!-- 사양 -->
		               <th></th>
		               <td></td>
		              </tr>
		              <tr style="height:20px;">
		               <th></th>
		               <td></td>
		               <th></th>
		               <td></td>
		              </tr>						                           
		             </table>
		         </td>
                 <td><!-- <table data-kind="COBGB3"></table> 생산-->
                 <table>
                   <tr>
                       <th style="width:25%" rowspan="2"><input type="hidden" name="COBGB3" id="COBGB3" value="COBGB31">제작</th>
                       <td style="width:75%"><input type="checkbox" id="COBGB31" name="COBGB31" value="COBGB3101"> 조립불량</td>
                   </tr>
                   <tr>
                       <td> <input type="checkbox" id="COBGB31" name="COBGB31" value="COBGB3102"> 생산필요추가</td>
                   </tr>
                   <tr>
                       <th rowspan="5"><input type="hidden" name="COBGB3" id="COBGB3" value="COBGB32">지침</th>
                       <td><input type="checkbox" id="COBGB32" name="COBGB32" value="COBGB3201"> 분실</td>
                   </tr>
                   <tr>
                       <td><input type="checkbox" id="COBGB32" name="COBGB32" value="COBGB3202"> 파손</td>
                   </tr>
                   <tr>
                      <td> <input type="checkbox" id="COBGB32" name="COBGB32" value="COBGB3203"> 정품 미사용</td>
                   </tr>
                   <tr>
                     <td><input type="checkbox" id="COBGB32" name="COBGB32" value="COBGB3204"> 발송장애</td>
                   </tr>
                   <tr>
                     <td><input type="checkbox" id="COBGB32" name="COBGB32" value="COBGB3205"> 납기미준수</td>
                  </tr>
                   <tr>
                     <th><input type="hidden" name="COBGB3" id="COBGB3" value="COBGB39">기타</th>
                     <td><input type="checkbox" id="COBGB39" name="COBGB39" value="COBGB3999">기타</td>
                   </tr>
                   <tr style="height:20px;">
	                 <th> </th>
	                 <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                 <th> </th>
	                 <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                 <th> </th>
	                 <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                 <th></th>
	                 <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                 <th> </th>
	                 <td> </th>
			       </tr> 
			      <tr style="height:20px;">
	                 <th> </th>
	                 <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                 <th> </th>
	                 <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                <th> </th>
	                 <td> </th>
			       </tr> 
                  </table>                 
                 </td>
                 <td><!-- <table data-kind="COBGB3"></table> 구매외주팀-->
                  <table>
                  <tr>
                   <th style="width:15%" rowspan="2"><input type="hidden" name="COBGB4" id="COBGB4" value="COBGB41">단순</th>
	               <td style="width:35%"><input type="checkbox" id="COBGB41" name="COBGB41" value="COBGB4101"> 발주누락</td><!--단순 -->
	               <th style="width:15%" rowspan="4"><input type="hidden" name="COBGB4" id="COBGB4" value="COBGB45">도면</th>
	               <td style="width:35%"><input type="checkbox" id="COBGB45" name="COBGB45" value="COBGB4504">도면 누락</td><!--도면 -->
		          </tr>
		          <tr>
	               <td><input type="checkbox" id="COBGB41" name="COBGB41" value="COBGB4102"> 발주수량오류</td><!--단순 -->
	               <td ><input type="checkbox" id="COBGB45" name="COBGB45" value="COBGB4503">표기 장애</td><!--도면 -->
		          </tr>
		          <tr>
                   <th><input type="hidden" name="COBGB4" id="COBGB4" value="COBGB42">해독</th>
	               <td><input type="checkbox" id="COBGB42" name="COBGB42" value="COBGB4201">도면해독오류</td><!--해독 -->
	               <td><input type="checkbox" id="COBGB45" name="COBGB45" value="COBGB4502">기능 부적합</td><!--도면 -->
		          </tr>
		          <tr>
                   <th rowspan="4"><input type="hidden" name="COBGB4" id="COBGB4" value="COBGB43">외주</th>
	               <td><input type="checkbox" id="COBGB43" name="COBGB43" value="COBGB4301"> 외주가공</td><!--외주 -->
	               <td><input type="checkbox" id="COBGB45" name="COBGB45" value="COBGB4501">용량 부적합</td><!--도면 -->
		          </tr>
		          <tr>
	               <td><input type="checkbox" id="COBGB43" name="COBGB43" value="COBGB4302"> 외주설계</td><!--외주 -->
	               <th rowspan="2"><input type="hidden" name="COBGB4" id="COBGB4" value="COBGB46">제작</th>
	               <td><input type="checkbox" id="COBGB46" name="COBGB46" value="COBGB4601">조립장애</td><!--제작 -->
		          </tr>
		          <tr>
	               <td><input type="checkbox" id="COBGB43" name="COBGB43" value="COBGB4303"> 외주제작</td><!--외주 -->
	               <td><input type="checkbox" id="COBGB46" name="COBGB46" value="COBGB4602">제작 누락</td><!--제작 누락 -->
		          </tr>
		          <tr>
	               <td><input type="checkbox" id="COBGB43" name="COBGB43" value="COBGB4303"> 운송장애</td><!--외주 -->
	               <th rowspan="3"><input type="hidden" name="COBGB4" id="COBGB4" value="COBGB47">프로그램</th>
	               <td><input type="checkbox" id="COBGB47" name="COBGB47" value="COBGB4701">인터록 장애</td>
		          </tr>
		          <tr>
                   <th><input type="hidden" name="COBGB4" id="COBGB4" value="COBGB44">지침</th><!--지침 -->
	               <td><input type="checkbox" id="COBGB44" name="COBGB44" value="COBGB4401"> 일정미준수</td>
	               <td><input type="checkbox" id="COBGB47" name="COBGB47" value="COBGB4702">기능누락</td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <td><input type="checkbox" id="COBGB47" name="COBGB47" value="COBGB4702">프로그램 부적합</td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <th rowspan="4"><input type="hidden" name="COBGB4" id="COBGB4" value="COBGB48">부품</th></th>
	               <td><input type="checkbox" id="COBGB48" name="COBGB48" value="COBGB4801">제작사 불량</td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <td><input type="checkbox" id="COBGB48" name="COBGB48" value="COBGB4802">수량부족</td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <td><input type="checkbox" id="COBGB48" name="COBGB48" value="COBGB4803">파손</td>
		          </tr>
		           <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <td><input type="checkbox" id="COBGB48" name="COBGB48" value="COBGB4804">분실</td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <th></th>
	               <td></td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <th></th>
	               <td></td>
		          </tr>	
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <th></th>
	               <td></td>
		          </tr>	
		         </table>		
                 </td>
                 <td>
                 </td>
             </tr>
      </table>

    </form>
	</div>

	<!-- 공통 파일 영역 -->
	<div id="fileList_area"></div>
	

</div>
    <!-- 하단 버튼 -->
	<div class ="popup_bottom_btn">
		<button type="button" id="actionBtn" authChk>등록</button>
		<button type="button" class="close_btn"
			onclick="modalStack.close();">닫기</button>
	</div>

<script type="text/javascript">
  debugger;
	var actionType = null;
	var fileTrgtKey = null;
	var partCd = "COBTP";

	$(document).ready(function() {
		setCommonSelect($(".popup_area select[data-kind]"));
		setCommonDiv($(".popup_area div[data-kind]"));
		setCommonItem($(".popup_area table[data-kind]"));
		//setCommonCheck($(".popup_area th[data-kind]"));
		setByCoCd(modalStack.last().paramObj.coCd);
		$("#popForm #userId").val(jwt.userId);
		
		//발행일자//
		$('#ordrgDt').datepicker({
			format : "yyyy-mm-dd",
			language : "ko",
			autoclose : true
		}).datepicker("setDate", "today");
		
		//요구일정//
		$('#reqDt').datepicker({
			format : "yyyy-mm-dd",
			language : "ko",
			autoclose : true
		}).datepicker("setDate", "today");

		authChk();						// 권한체크

		actionType = modalStack.last().paramObj.actionType;
		fileTrgtKey = modalStack.last().paramObj.fileTrgtKey;
		
	    $("#vendNm").prop("readonly", true);
	    $("#clntPjt").prop("readonly", true);
	    $("#prdtNm").prop("readonly", true);
	    $("#itemDivNm").prop("readonly", true);
	    $("#eqpNm").prop("readonly", true);
	    $("#matrNm").prop("readonly", true);
		
		if (actionType == "C") {
		     $("#costNo").prop("readonly", true);
			$("#actionBtn").text("등록");
			$('#actionBtn').on("click", function() {
				//insertPchsCost();
			});

		} else if (actionType == "U") {
			$('.tit').text('요인별 발주 및 출장요청 수정');
			
			selectQtyReqInfo();

			$('#actionBtn').text("수정");
			$('#actionBtn').on("click", function() {
				updatePchsCost();
			});
		}
		
		//---------------------------------------------------------------  
		//첨부 화일 처리 시작 
		//---------------------------------------------------------------  
		fileParam = {
				fileTrgtTyp	: $("#pgmId").val(),
				fileTrgtKey		:fileTrgtKey
		}
  		treeModule.initAll('deptTreeOrdars', 'file-grid', 'FILETREE', fileParam);
		//---------------------------------------------------------------  
		//첨부 화일 처리 끝
		//---------------------------------------------------------------  

		
	});
	
	
	 // 발행자 검색 //  
    function openFirstUserSearch() {
    	var paramObj = {
    		  "coCd" : $('#coCd1').val(),
    		"userId" : $('#userName_S1').val(),
    	};
    	openSecondModal("/static/html/cmn/modal/userSearch.html", 300, 500,
    			"사용자 검색", paramObj, function(tree) {
    				var checkedId = tree.get_checked()[0];
    				var checkedNode = tree.get_node(checkedId);    				
    				$('#userId_S1').val(checkedNode.id);
    				$('#userName_S1').val(checkedNode.text);
    				 gridView.setData(0);
    			});
    }   
	 
	 // 접수자 검색 //  
    function openSecondUserSearch() {
    	var paramObj = {
    		  "coCd" : $('#coCd1').val(),
    		"userId" : $('#regNm_S1').val(),
    	};
    	openSecondModal("/static/html/cmn/modal/userSearch.html", 300, 500,
    			"사용자 검색", paramObj, function(tree) {
    				var checkedId = tree.get_checked()[0];
    				var checkedNode = tree.get_node(checkedId);    				
    				$('#regId_S1').val(checkedNode.id);
    				$('#regNm_S1').val(checkedNode.text);
    				 gridView.setData(0);
    			});
    }  	
	 
    
    
	function selectQtyReqInfo() {						//그리드에 뿌리는 데이터
		var formData = {
			"fileTrgtKey" : fileTrgtKey,
		}
		postAjax("/user/qm/qm01/selectQtyReqInfo", formData, null, function(data) {
				$.each(data.result, function(key, value) {
					if ($('#popForm #' + key)[0]) {
						$('#popForm #' + key).val(value);
						if ($('#popForm #' + key).is('[comma]')) {
							onlyNumber($('#popForm #' + key)[0]);
						}
					}
				});
				
		});
	}



	 // 등록
	function insertPchsCost() {
		if (inputValidation($('.popup_area [required]'))) {						// 필수 필드의 유효성 검사
			var formData = makeFormData();										// 요청이 통과하면 makeFormData() 함수를 이용해 formData를 생성
			filePostAjax("/user/sm/sm10/insertPchsCost", formData,				// 파일을 포함한 데이터를 서버로 전송하는 비동기적인 AJAX 요청을 수행
					function(data) {
						alert(data.resultMessage);								// 결과 메시지를 alert으로 출력
						if (data.resultCode == 200) {							//  요청이 성공(200)한 경우, gridView.setData(0)를 호출하여 그리드 뷰를 업데이트하고,
							gridView.setData(0);
							modalStack.close();									// 모달을 닫음
						}
					});
		}
	}

	// 수정
	function updatePchsCost() {
		if (inputValidation($('.popup_area [required]'))) {						// 필수 필드의 유효성 검사
			var formData = makeFormData();										// 요청이 통과하면 makeFormData() 함수를 이용해 formData를 생성
	      	filePostAjax("/user/sm/sm10/updatePchsCost", formData,function(data) {
						alert(data.resultMessage);
						if (data.resultCode == 200) {
							gridView.setData(0);
							modalStack.close();
						}
					});
		}
	}

	//----------------------------------------------//

	function makeFormData() {
		// 금액 콤마 제거
		$.each($('.popup_area input[comma]'), function(idx, elem) {
			deleteComma(elem);
		});
		// 날짜 하이픈 제거
		$.each($('.popup_area input[date]'), function(idx, elem) {
			deleteHyphen(elem);
		});
		// 폼데이터 생성
		var formData = new FormData($("#popForm")[0]);
		
		//---------------------------------------------------------------  
		//-------itemarr  --첨부화일 처리를 위한 부분 시작
		//---------------------------------------------------------------  
		// 유저아이디 추가
		formData.append("userId", jwt.userId);
		formData.append("clntCd", $('#vendCd').val());			//첨부화일용
		formData.append("prdtCd", $('#prdtCd').val());			//첨부화일용
		formData.append("itemCd", $('#itemDiv').val());			//첨부화일용
		formData.append("prjctCd", $('#clntPjt').val());		//첨부화일용
		
		//-------itemarr  --첨부화일 처리를 위한 부분 시작
		formData.append("comonCd", treeModule.getFileNodeId());	//첨부화일용
		
		//---------------------------------------------------------------  
        
        //---------------------------------------------------------------  
		var fileUploadArr = [];
		var tempArr = [];
		
		tempArr = treeModule.getFileArr();
		$.each(tempArr, function(idx, obj) {
			if (obj.fileKey == 0) {
                formData.append("files", obj.file);
                obj.file = '';
                fileUploadArr.push(obj);
			}
		});

		formData.append("uploadFileArr", JSON.stringify(fileUploadArr));
		formData.append("deleteFileArr", JSON.stringify(treeModule.getDeleteFileArr()));
		//---------------------------------------------------------------  
		//--첨부화일 처리를 위한 부분 끝
		//--------------------------------------------------------------- 

		return formData;
	}

	
    //Sales Code (수주마스터, 수주상세테이블 조인) 검색
    function wbsSalesCodeSearch() {
        var paramObj = {
           "coCd" : $('#coCd_S').val(),
           "salesCd": $('#salesCd').val()
        };
        openSecondModal("/static/html/cmn/modal/SalesCodeTreeSearch.html", 1000, 500, "SALES CODE 검색", paramObj, function (grid){
            var row = grid.target.getList("selected")[0];
            $('#salesCd').val(row.salesCd);
            $('#clntPjt').val(row.clntPjt);
            $('#eqpNm').val(row.eqNm);
            $('#vendCd').val(row.ordrsClntCd);
            $('#vendNm').val(row.ordrsClntNm);
            $('#eqpNm').val(row.clntPjt);
            $('#prdtCd').val(row.prdtCd);
			$('#prdtNm').val(row.prdtCdNm);
            $('#itemDiv').val(row.itemDiv);
            $('#itemDivNm').val(row.itemDivNm);
        });
    }
    		
	
	// 고객사 검색
	function clntSearch() {
		openSecondModal("/static/html/cmn/modal/clntSearch.html", 600, 420,
				"업체명 검색", {}, function(grid) {
					var row = grid.target.getList("selected")[0];
					$('#clntCd').val(row.clntCd);
					$('#clntNm').val(row.clntNm);
				});
	}
	
	// 자재 품번 팝업 호출하는 함수
    function openMatListSearch(openType) {
          //debugger;
          var paramObj = {
      			"searchValue" : $("#matrNm").val()
          }
          openSecondModal("/static/html/cmn/modal/matListSearch.html", 600, 420, "자재 품번 검색", paramObj, function(grid) {
                        var row = grid.target.getList("selected")[0];
                        if (openType == "P") {
							$('#matrCd').val(row.matrCd);		// 	품번 값 가져오기
							$('#matrNm').val(row.matrNm);	//	품번 값 가져오기
                        } 
                 });
    }
		
	function setByCoCd(value) {
		$('#coCd option:not([value="'+value+'"])').remove();
	}

</script>