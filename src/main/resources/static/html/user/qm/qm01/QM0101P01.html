<div class="popup_area of_a" style="width: 100%; height: 100%;">
    <div class="tit_contents">
      <h4 class="tit">요인별 발주 및 출장요청 등록</h4>
    </div>
  <form id="popForm" onSubmit="return false;">
    <div class="form-group popup_table">
		<input type="hidden" id="fileTrgtKey"  	name="fileTrgtKey">
		<input type="hidden" id="userId"     	name="userId">
		<input type="hidden" id="pgmId"     	name="pgmId"	value="QM0101M01">
		<input type="hidden" id="sharId1"       name="sharId1" >
		<input type="hidden" id="sharId2"       name="sharId2" >
		<input type="hidden" id="sharId3"       name="sharId3" >
		<input type="hidden" id="sharId4"       name="sharId4" >
		<input type="hidden" id="sharId5"       name="sharId5" >
		<input type="hidden" id="sharId6"       name="sharId6" >
		<input type="hidden" id="sharId7"       name="sharId7" >
		<input type="hidden" id="sharId8"       name="sharId8" >
		<input type="hidden" id="sharId9"       name="sharId9" >
		<input type="hidden" id="sharId10"      name="sharId10" >
		<input type="hidden" id="sharIdNull"    name="sharIdNull" >
		<input type="hidden" id="userEmpNo"     name="userEmpNo" >
		<input type="hidden" id="userDeptId"    name="userDeptId" >
		<input type="hidden" id="userDept"      name="userDept" >
		<input type="hidden" id="appCnt"      name="appCnt">
 	<table>
        <colgroup>
          <col width="11%">
          <col width="14%">
          <col width="11%">
          <col width="14%">
          <col width="11%">
          <col width="14%">
          <col width="11%">
          <col width="14%">
          <col width="11%">
          <col width="14%">
        </colgroup>
        <tr>
			<th class="hit">회사</th>
			<td>
				<select id="coCd" name="coCd" data-kind="CO" class="form-control input-sm"  msg="회사" required >
				</select>
			</td>
			<th >관리번호</th>
			<td>
				 <div class="search_form">
				  <input type="text" id="reqNo" name="reqNo" readonly="readonly" >
				 </div>
			</td>
			<th class="hit">발행일자</th>
			<td>
				<input id="ordrgDt" name="ordrgDt" class="input_calendar form-control" autocomplete="off" onkeyup="dateMask(this);"   msg="발행일자"  date  required>
			</td>			
			<th class="hit">발행자</th>
			<td>
                 <div class="search_form">						
			    	<input type="hidden" id="ordrgId" name="ordrgId"  data-search="ordrgId" msg="발행자아이디" >
             		<input type="text"	id="ordrgNm" data-search="ordrgNm" msg="발행자" readonly="readonly">
             		<a onclick="openFirstUserSearch();"><i class="i_search_w" id="userIdBtn"></i></a>
                 </div>
			</td>
			<th class="hit">접수자</th>
			<td>
			     <div class="search_form">						
			    	<input type="hidden" id="regId" name="regId" data-search="regId" msg="접수자아이디">
             		<input type="text"	id="regNm" data-search="regNm" msg="접수자이름" readonly="readonly">
             		<a onclick="openSecondUserSearch();"><i class="i_search_w" id="userIdBtn"></i></a>
                 </div>
			</td>
        </tr>
		 <tr>     
		   <th class="hit">SalesCode</th>
				<td>
					<div class="search_form">
					    <input type="text" id="salesCd" name="salesCd" msg="salesCode" readonly="readonly" >
					   	<a onclick="wbsSalesCodeSearch();"><i class="i_search_w"></i></a>
				    </div>
				</td>
			<th>대표도면번호</th>
			<td>
				<input type="text" id="matrDrwNo" name="matrDrwNo" readonly="readonly" >
			</td>
			<th>고객사</th>
			<td>
			    <input type="hidden" id="clntCd" name="clntCd" data-search="clntCd" msg="고객사코드">				
				<input type="text" id="clntNm" name="clntNm" data-search="clntNm" msg="고객사" readonly="readonly">
			</td>
			<th>고객사PJT</th>
			<td>
				<input type="text" id="clntPjt" name="clntPjt" msg="고객사PJT" readonly="readonly"> 
			</td>
			<th>신작구분</th>
			<td>
			   <input type="hidden" id="ordrsdtldiv20" name="ordrsdtldiv20">
			   <input type="text" id="newCd" name="newCd" readonly="readonly" >
			</td>
        </tr>
        <tr>
			<th class="hit">요청구분</th>
			<td style="text-align:left;">
			  <input type="hidden" id="reqCd"  name="reqCd" msg="요청구분" required>
			 <!--   <div data-kind="REQCD"></div> -->
			    <input type="radio" id="REQCD1" name="REQCDCP" value="REQCD01" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'REQCDCP','REQCD01');"> 발주
			    <input type="radio" id="REQCD2" name="REQCDCP" value="REQCD02" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'REQCDCP','REQCD02');"> 출장
			</td>
			<th class="hit">요구일정</th>
			<td>
				<input id="reqDt" name="reqDt" class="input_calendar form-control" autocomplete="off" onkeyup="dateMask(this);"    msg="요구일정"  date  required >
			</td>
			<th>수주번호</th>
			<td>
                <input type="text" id="ordrsNo" name="ordrsNo" readonly="readonly">
			</td>
			<th>Project명</th>
			<td>
			    <input type="text" id="projNm" name="projNm" readonly="readonly">
			</td>
			<th colspan="2">
			</th>
        </tr>

        <tr>
			<th>출장자</th>
			<td style="text-align:left;">
			   <input type="hidden" id="bustCd"  name="bustCd" >
			  <!--  -  <div data-kind="BUSTCD"></div>-->
			    <input type="radio" id="BUSTCD1" name="BUSTCDCP" value="BUSTCD01" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'BUSTCDCP','BUSTCD01');"> 생산
			     <input type="radio" id="BUSTCD2" name="BUSTCDCP" value="BUSTCD02" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'BUSTCDCP','BUSTCD02');"> 전기
			</td>
			<th>출장자명</th>
			<td>
			     <input type="text" id="bustNm" name="bustNm" >
			</td>
			<th>사내작업</th>
			<td style="text-align:left;">
			    <input type="hidden" id="inwkCd" name="inwkCd" >
			   <!-- <div data-kind="INWKCD"></div>-->
			    <input type="radio" id="INWKCD1" name="INWKCDCP" value="INWK01" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'INWKCDCP','INWK01');"> 생산
			    <input type="radio" id="INWKCD2" name="INWKCDCP" value="INWK02" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'INWKCDCP','INWK02');"> 전기
			</td>
			<th>출장장소(고객사)</th>
			<td>
			     <input type="text" id="bustPe" name="bustPe">
			</td>
			<th colspan="2">
			</th>
        </tr>
        <tr style="height:25px;">
			<th>분류</th>
			<td colspan= "9" style="text-align:left;">	
			  <input type="hidden" id="partCd" name="partCd">		   
			 <!--  <div data-kind="COBTP"></div>-->
			 <input type="radio" id="COBTP1" name="COBTPCP" value="COBTP01" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'COBTPCP','COBTP01');"> 출도
			 <input type="radio" id="COBTP2" name="COBTPCP" value="COBTP02" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'COBTPCP','COBTP02');"> 추가
			 <input type="radio" id="COBTP3" name="COBTPCP" value="COBTP03" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'COBTPCP','COBTP03');"> 장애
			 <input type="radio" id="COBTP4" name="COBTPCP" value="COBTP04" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'COBTPCP','COBTP04');"> A/S유상
			 <input type="radio" id="COBTP5" name="COBTPCP" value="COBTP05" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'COBTPCP','COBTP05');"> A/S무상
			 <input type="radio" id="COBTP6" name="COBTPCP" value="COBTP06" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'COBTPCP','COBTP06');"> SPARE유상
			 <input type="radio" id="COBTP7" name="COBTPCP" value="COBTP07" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'COBTPCP','COBTP07');"> SPARE무상
			 <input type="radio" id="COBTP8" name="COBTPCP" value="COBTP08" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'COBTPCP','COBTP08');"> 고객E/O
			 <input type="radio" id="COBTP9" name="COBTPCP" value="COBTP09" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'COBTPCP','COBTP09');"> 설치시운전
			 <input type="radio" id="COBTP10" name="COBTPCP" value="COBTP99" style="padding:0px;margin:0;width:auto;" onClick="checkCd(this,'COBTPCP','COBTP99');"> 기타
			</td>
       </tr>
      </table>
      <table width="100%">
        <colgroup>
          <col width="8%">
          <col width="15%">
          <col width="26%">
          <col width="15%">
          <col width="26%">
          <col width="10%">
        </colgroup>
           <tr>
             <th> 
                <input type="hidden" name="deptCd" id="deptCd" msg="소속부서" required><!-- COBGB -->
                <input type="hidden" name="deptCd2" id="deptCd2" msg="소속부서 구분" required><!-- COBGBP -->
             </th>           
               <th style="text-align:center;font-weight:bold;" >
	                             영업<br>
	             <input type="checkbox" id="COBGBP1" name="COBGBPCP" value="COBGBP11" onClick="checkOneDept(this,'COBGBPCP','COBGB1','COBGBP11');"> 국내
	             <input type="checkbox" id="COBGBP2" name="COBGBPCP" value="COBGBP12" onClick="checkOneDept(this,'COBGBPCP','COBGB1','COBGBP12');"> 해외
             </th>
             <th style="text-align:center;font-weight:bold;" >
                                      기술연구소<br>
                 <input type="checkbox" id="COBGBP3" name="COBGBPCP" value="COBGBP21" onClick="checkOneDept(this,'COBGBPCP','COBGB2','COBGBP21');"> 선형개발
                 <input type="checkbox" id="COBGBP4" name="COBGBPCP" value="COBGBP22" onClick="checkOneDept(this,'COBGBPCP','COBGB2','COBGBP22');"> 개발설계
                 <input type="checkbox" id="COBGBP5" name="COBGBPCP" value="COBGBP23" onClick="checkOneDept(this,'COBGBPCP','COBGB2','COBGBP23');"> 양산설계
             </th>
             <th style="text-align:center;font-weight:bold;">
                              생산<br>
             </th>
             <th style="text-align:center;font-weight:bold;">
				 구매외주팀<br>
				 <input type="checkbox" id="COBGBP6" name="COBGBPCP" value="COBGBP41" onClick="checkOneDept(this,'COBGBPCP','COBGB4','COBGBP41');"> 기계
				 <input type="checkbox" id="COBGBP7" name="COBGBPCP" value="COBGBP42" onClick="checkOneDept(this,'COBGBPCP','COBGB4','COBGBP42');"> 가공
				 <input type="checkbox" id="COBGBP8" name="COBGBPCP" value="COBGBP43" onClick="checkOneDept(this,'COBGBPCP','COBGB4','COBGBP43');"> 전기
		     </th>
             <th style="text-align:center;font-weight:bold;">
                 <input type="checkbox" id="COBGBP9" name="COBGBPCP" value="COBGBP91" onClick="checkOneDept(this,'COBGBPCP','COBGB9','COBGBP91');">기타( )
             </th> 
          </tr>
             <tr> 
                 <th><input type="hidden" name="midCd" id="midCd" msg="소속부서의 분류" >
			         <input type="hidden" name="subCd" id="subCd" msg="소속부서의 분류 항목 " required>      
			    </th>               
                 <td>
                 <!--<table data-kind="COBGB1"></table> 영업-->
                       <table>
			             <tr>
			                <th style="width:25%;height:20px;">            
			                                      수주
			                </th>
			                 <td style="width:75%;text-align:left;">
			                  <input type="checkbox" id="COBGB111" name="COBGBCP" value="COBGB1101"  onClick="checkOne(this,'COBGBCP','COBGB11','COBGB1101');"> 정상
			                 </td>
			             </tr>
			             <tr>
			                 <th rowspan="6">사양</th>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB121" name="COBGBCP" value="COBGB1201"  onClick="checkOne(this,'COBGBCP','COBGB12','COBGB1201');"> PFU누락
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB122" name="COBGBCP" value="COBGB1202"  onClick="checkOne(this,'COBGBCP','COBGB12','COBGB1202');"> PFU오기
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB123" name="COBGBCP" value="COBGB1203"  onClick="checkOne(this,'COBGBCP','COBGB12','COBGB1203');"> 사양협의 미흡
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;"> 
			                  <input type="checkbox" id="COBGB124" name="COBGBCP" value="COBGB1204"  onClick="checkOne(this,'COBGBCP','COBGB12','COBGB1204');"> 고객추가 요구
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB125" name="COBGBCP" value="COBGB1205"  onClick="checkOne(this,'COBGBCP','COBGB12','COBGB1205');"> 고객사양 변경
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB126" name="COBGBCP" value="COBGB1206"  onClick="checkOne(this,'COBGBCP','COBGB12','COBGB1206');"> 제품Data 오류
			                 </td>
			             </tr>
			             <tr>
			                 <th rowspan="3">출장</th>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB131" name="COBGBCP" value="COBGB1301"  onClick="checkOne(this,'COBGBCP','COBGB13','COBGB1301');"> 이벤트 대응
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB132" name="COBGBCP" value="COBGB1302"  onClick="checkOne(this,'COBGBCP','COBGB13','COBGB1302');"> 양산 대응
			                 </td>
			             </tr>
			             <tr>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB133" name="COBGBCP" value="COBGB1303"  onClick="checkOne(this,'COBGBCP','COBGB13','COBGB1303');"> 추가조건작업
			                 </td>
			             </tr>
			             <tr>
			                 <th>기타</th>
			                 <td style="text-align:left;height:20px;">
			                  <input type="checkbox" id="COBGB191" name="COBGB19" value="COBGB1901"  onClick="checkOne(this,'COBGBCP','COBGB19','COBGB1901');">기타
			                 </th>
			             </tr> 
			              <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr> 
			              <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr> 
			              <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr> 
			              <tr style="height:20px;">
			                 <th> </th>
			                 <td> </th>
			             </tr>                     
		             </table>
                 </td>
                 <td>  <!-- <table data-kind="COBGB2"></table> 기술연구소-->
		             <table>
		              <tr>
		               <th style="width:20%;" rowspan="2">
		                                     출도
		               </th>
		               <td style="width:33%;text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB211" name="COBGBCP" value="COBGB2101" onClick="checkOne(this,'COBGBCP','COBGB21','COBGB2101');"> 정상
		               </td><!-- 출도 -->		               
		               <th style="width:15%" rowspan="7">
		                                       도면
		               </th>
		               <td style="width:35%;text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB251" name="COBGBCP" value="COBGB2501" onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2501');">대칭오류
		               </td><!-- 도면 -->	
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB212" name="COBGBCP" value="COBGB2102"  onClick="checkOne(this,'COBGBCP','COBGB21','COBGB2102');"> 선발주
		               </td><!-- 출도 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB252" name="COBGBCP" value="COBGB2502"  onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2502');">조립간섭/조립불일치
		               </td>
		              </tr>	
		               <tr>
		               <th rowspan="4">3D적용</th>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB221" name="COBGBCP" value="COBGB2201"  onClick="checkOne(this,'COBGBCP','COBGB22','COBGB2201');"> 1단계
		               </td><!-- 3D적용 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB253" name="COBGBCP" value="COBGB2503"  onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2503');">도면표기 부적합
		               </td>	<!-- 도면 -->
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB222" name="COBGBCP" value="COBGB2202"  onClick="checkOne(this,'COBGBCP','COBGB22','COBGB2202');"> 2단계
		               </td><!-- 3D적용 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB254" name="COBGBCP" value="COBGB2504"  onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2504');">가공표기 부적합
		               </td>	<!-- 도면 -->
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB223" name="COBGBCP" value="COBGB2203"  onClick="checkOne(this,'COBGBCP','COBGB22','COBGB2203');"> 3단계
		               </td><!-- 3D적용 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB255" name="COBGBCP" value="COBGB2505"  onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2505');">가공기준 부적합
		               </td><!-- 도면 -->
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB224" name="COBGBCP" value="COBGB2204"  onClick="checkOne(this,'COBGBCP','COBGB22','COBGB2204');"> 4단계
		               </td><!-- 3D적용 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB256" name="COBGBCP" value="COBGB2506"  onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2506');">모델링 부적합
		               </td><!--도면 -->
		              </tr>	
		               <tr>
		               <th rowspan="5">단순</th>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB231" name="COBGBCP" value="COBGB2301"  onClick="checkOne(this,'COBGBCP','COBGB23','COBGB2301');"> 수량과다
		               </td><!--단순 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB257" name="COBGBCP" value="COBGB2507"  onClick="checkOne(this,'COBGBCP','COBGB25','COBGB2507');">표면처리 부적합
		               </td><!--도면 -->
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB232" name="COBGBCP" value="COBGB2302"  onClick="checkOne(this,'COBGBCP','COBGB23','COBGB2302');"> 수량부족
		               </td><!--단순 -->
		               <th rowspan="3">지침</th>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB261" name="COBGBCP" value="COBGB2601"  onClick="checkOne(this,'COBGBCP','COBGB26','COBGB2601');">PFU와 불일치
		               </td><!--지침 -->
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB233" name="COBGBCP" value="COBGB2303"  onClick="checkOne(this,'COBGBCP','COBGB23','COBGB2303');"> 부품누락
		               </td><!--단순 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB262" name="COBGBCP" value="COBGB2602"  onClick="checkOne(this,'COBGBCP','COBGB26','COBGB2602');"> Rev. 미적용
		               </td><!--지침 -->
		              </tr>	
		               <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB234" name="COBGBCP" value="COBGB2304"  onClick="checkOne(this,'COBGBCP','COBGB23','COBGB2304');"> 치수누락
		               </td><!--단순 -->
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB263" name="COBGBCP" value="COBGB2603"  onClick="checkOne(this,'COBGBCP','COBGB26','COBGB2603');">표준 미준수
		               </td><!--지침 -->
		              </tr>	
		              <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB235" name="COBGBCP" value="COBGB2305"  onClick="checkOne(this,'COBGBCP','COBGB23','COBGB2305');"> 도면누락(추가)
		               </td><!--단순 -->
		               <th>기타</th>
		               <td style="text-align:left;">
		                <input type="checkbox" id="COBGB291" name="COBGBCP" value="COBGB2999"  onClick="checkOne(this,'COBGBCP','COBGB29','COBGB2999');">기타
		               </td>
		              </tr>	
		              <tr>
		               <th rowspan="4">사양</th>
		               <td style="text-align:left;height:20px;">
		                 <input type="checkbox" id="COBGB241" name="COBGBCP" vlaue="COBGB2401"  onClick="checkOne(this,'COBGBCP','COBGB24','COBGB2401');">소재 부적합
		               </td><!-- 사양 -->
		               <th></th>
		               <td></td>
		              </tr>
		              <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB242" name="COBGBCP" vlaue="COBGB2402"  onClick="checkOne(this,'COBGBCP','COBGB24','COBGB2402');">용량 부적합
		               </td><!-- 사양 -->
		               <th></th>
		               <td></td>
		              </tr>
		              <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB243" name="COBGBCP" vlaue="COBGB2403"  onClick="checkOne(this,'COBGBCP','COBGB24','COBGB2403');">강도 부적합
		               </td><!-- 사양 -->
		               <th></th>
		               <td></td>
		              </tr>	
		              <tr>
		               <td style="text-align:left;height:20px;">
		                <input type="checkbox" id="COBGB244" name="COBGBCP" vlaue="COBGB2404"  onClick="checkOne(this,'COBGBCP','COBGB24','COBGB2404');">기능 부적합
		               </td><!-- 사양 -->
		               <th></th>
		               <td></td>
		              </tr>			                           
		             </table>
		         </td>
                 <td><!-- <table data-kind="COBGB3"></table> 생산-->
                 <table>
                   <tr>
                       <th style="width:25%" rowspan="2">제작</th>
                       <td style="width:75%;text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB311" name="COBGBCP" value="COBGB3101" onClick="checkOne2(this,'COBGBCP','COBGB31','COBGB3101','COBGB3','COBGB31');"> 조립불량
                       </td>
                   </tr>
                   <tr>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB312" name="COBGBCP" value="COBGB3102" onClick="checkOne2(this,'COBGBCP','COBGB31','COBGB3102','COBGB3','COBGB31');"> 생산필요추가
                       </td>
                   </tr>
                   <tr>
                       <th rowspan="5">지침</th>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB321" name="COBGBCP" value="COBGB3201" onClick="checkOne2(this,'COBGBCP','COBGB32','COBGB3201','COBGB3','COBGB31');"> 분실
                       </td>
                   </tr>
                   <tr>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB322" name="COBGBCP" value="COBGB3202" onClick="checkOne2(this,'COBGBCP','COBGB32','COBGB3202','COBGB3','COBGB31');"> 파손
                       </td>
                   </tr>
                   <tr>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB323" name="COBGBCP" value="COBGB3203" onClick="checkOne2(this,'COBGBCP','COBGB32','COBGB3203','COBGB3','COBGB31');"> 정품 미사용
                       </td>
                   </tr>
                   <tr>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB324" name="COBGBCP" value="COBGB3204" onClick="checkOne2(this,'COBGBCP','COBGB32','COBGB3204','COBGB3','COBGB31');"> 발송장애
                       </td>
                   </tr>
                   <tr>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB325" name="COBGBCP" value="COBGB3205" onClick="checkOne2(this,'COBGBCP','COBGB32','COBGB3205','COBGB3','COBGB31');"> 납기미준수
                       </td>
                  </tr>
                   <tr>
                       <th>기타</th>
                       <td style="text-align:left;height:20px;">
                        <input type="checkbox" id="COBGB396" name="COBGBCP" value="COBGB3999" onClick="checkOne2(this,'COBGBCP','COBGB39','COBGB3999','COBGB3','COBGB31');">기타
                       </td>
                   </tr>
                   <tr style="height:20px;">
	                   <th> </th>
	                   <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                  <th> </th>
	                  <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                  <th> </th>
	                  <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                  <th></th>
	                  <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                  <th> </th>
	                  <td> </th>
			       </tr> 
			      <tr style="height:20px;">
	                  <th> </th>
	                  <td> </th>
			       </tr> 
			       <tr style="height:20px;">
	                  <th> </th>
	                  <td> </th>
			       </tr> 
                  </table>                 
                 </td>
                 <td><!-- <table data-kind="COBGB3"></table> 구매외주팀-->
                  <table>
                  <tr>
                   <th style="width:15%" rowspan="2">단순</th>
	               <td style="width:35%;text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB411" name="COBGBCP" value="COBGB4101" onClick="checkOne(this,'COBGBCP','COBGB41','COBGB4101');"> 발주누락
	               </td><!--단순 -->
	               <th style="width:15%" rowspan="4">도면</th>
	               <td style="width:35%;text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB454" name="COBGBCP" value="COBGB4504" onClick="checkOne(this,'COBGBCP','COBGB45','COBGB4504');">도면 누락
	               </td><!--도면 -->
		          </tr>
		          <tr>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB412" name="COBGBCP" value="COBGB4102" onClick="checkOne(this,'COBGBCP','COBGB41','COBGB4102');"> 발주수량오류
	               </td><!--단순 -->
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB453" name="COBGBCP" value="COBGB4503" onClick="checkOne(this,'COBGBCP','COBGB45','COBGB4503');">표기 장애
	               </td><!--도면 -->
		          </tr>
		          <tr>
                   <th>해독</th>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB421" name="COBGBCP" value="COBGB4201" onClick="checkOne(this,'COBGBCP','COBGB42','COBGB4201');">도면해독오류
	               </td><!--해독 -->
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB452" name="COBGBCP" value="COBGB4502" onClick="checkOne(this,'COBGBCP','COBGB45','COBGB4502');">기능 부적합
	               </td><!--도면 -->
		          </tr>
		          <tr>
                   <th rowspan="4">외주</th>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB431" name="COBGBCP" value="COBGB4301" onClick="checkOne(this,'COBGBCP','COBGB43','COBGB4301');"> 외주가공
	               </td><!--외주 -->
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB451" name="COBGBCP" value="COBGB4501" onClick="checkOne(this,'COBGBCP','COBGB45','COBGB4501');">용량 부적합
	               </td><!--도면 -->
		          </tr>
		          <tr>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB432" name="COBGBCP" value="COBGB4302" onClick="checkOne(this,'COBGBCP','COBGB43','COBGB4302');"> 외주설계
	               </td><!--외주 -->
	               <th rowspan="2">제작</th>
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB461" name="COBGBCP" value="COBGB4601" onClick="checkOne(this,'COBGBCP','COBGB46','COBGB4601');">조립장애
	               </td><!--제작 -->
		          </tr>
		          <tr>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB433" name="COBGBCP" value="COBGB4303" onClick="checkOne(this,'COBGBCP','COBGB43','COBGB4303');"> 외주제작
	               </td><!--외주 -->
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB462" name="COBGBCP" value="COBGB4602" onClick="checkOne(this,'COBGBCP','COBGB46','COBGB4602');">제작 누락
	               </td><!--제작  -->
		          </tr>
		          <tr>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB434" name="COBGBCP" value="COBGB4303" onClick="checkOne(this,'COBGBCP','COBGB43','COBGB4303');"> 운송장애
	               </td><!--외주 -->
	               <th rowspan="3">프로그램</th>
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB471" name="COBGBCP" value="COBGB4701" onClick="checkOne(this,'COBGBCP','COBGB47','COBGB4701');">인터록 장애
	               </td>
		          </tr>
		          <tr>
                   <th>지침</th><!--지침 -->
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB441" name="COBGBCP" value="COBGB4401" onClick="checkOne(this,'COBGBCP','COBGB44','COBGB4401');"> 일정미준수
	               </td>
	               <td style="text-align:left;">
	                <input type="checkbox" id="COBGB472" name="COBGBCP" value="COBGB4702" onClick="checkOne(this,'COBGBCP','COBGB47','COBGB4702');">기능누락
	               </td><!-- 프로그램 -->
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB473" name="COBGBCP" value="COBGB4703" onClick="checkOne(this,'COBGBCP','COBGB47','COBGB4703');">프로그램 부적합
	               </td><!-- 프로그램 -->
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <th rowspan="4">부품</th></th>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB481" name="COBGBCP" value="COBGB4801" onClick="checkOne(this,'COBGBCP','COBGB48','COBGB4801');">제작사 불량
	               </td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB482" name="COBGBCP" value="COBGB4802" onClick="checkOne(this,'COBGBCP','COBGB48','COBGB4802');"> 수량부족
	               </td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB483" name="COBGBCP" value="COBGB4803" onClick="checkOne(this,'COBGBCP','COBGB48','COBGB4803');">파손
	               </td>
		          </tr>
		           <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <td style="text-align:left;height:20px;">
	                <input type="checkbox" id="COBGB484" name="COBGBCP" value="COBGB4804" onClick="checkOne(this,'COBGBCP','COBGB48','COBGB4804');">분실
	               </td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <th></th>
	               <td></td>
		          </tr>
		          <tr style="height:20px;">
                   <th></th>
	               <td></td>
	               <th></th>
	               <td></td>
		          </tr>
		         </table>		
                 </td>
                 <td>
                   <input type="hidden" id="COBGB91" name="COBGB91" value="COBGB9999"><!-- 기타 -->
                 </td>
             </tr>
           <tr style="height:25px;">
			<th >비고</th> <!-- 기타선택시 비고 입력값 필수 -->
			<td colspan= "9" style="text-align:left;">	
			  <input type="text" id="reqRmk" name="reqRmk">	
			<!--  <input type="text" name="prdtCd"><input type="text" name="itemDiv">-->
			</td>
           </tr>
           
      </table>
    </form>
    
    <!-- 공유대상자-->
     <div class="popup_table">               
        <table style="border:0px;">
            <tr style="height:30px;">
              <td style="text-align: LEFT; border-right: 0px;;font-size:13px;font-weight:bold;">※ 공유대상자</td>
              <td>
	              <div class="add_btn_small pdl10">       
	              	  <button type="button" class="btn btn-primary btn-sm" id="shareBtn" onclick="opendModalSharngListList();">공유라인</button>
			          <a onclick="insertShareUserModal();" style="height: 30px; line-height: 28px;" authchk>+</a>
			          <a onclick="deleteShareUser();" style="height: 30px; line-height: 28px;" authchk>-</a>    
			      </div>
              </td>
            </tr>
            <tr>
              <td colspan="2">
               <div class="contents">
				 <div class="ax5_grid" data-ax5grid="first-grid-modal" data-ax5grid-config="{}" style="height: 350px; width: 100%" ></div>
			   </div>
			  </td> 
			</tr>  
        </table>
    </div> 
    
	</div>

	<!-- 공통 파일 영역-->
    <div id="fileList_area"></div>
	<!-- 공통 파일 영역 -->
	
</div>
    <!-- 하단 버튼 -->
	<div class ="popup_bottom_btn">
		<button type="button" id="actionBtn" authChk>등록</button>
		<button type="button" class="close_btn"
			onclick="modalStack.close();">닫기</button>
	</div>

<script type="text/javascript">
	var actionType = null;
	var fileTrgtKey = null;
    var approvalList = null;
    var reqNo = null;
	//onClick="checkCd(this,'REQCDCP','REQCD01');
	
	var gridViewPop = {
		initView : function() {
  			this.target = new ax5.ui.grid();
  			this.target.setConfig({
  		    	showRowSelector: true,
  		    	multipleSelect: false,
  		    	sortable: true,
  		        target: $('[data-ax5grid="first-grid-modal"]'),
  		        header: {
  		        	align: "center",
  		        	selector: true
  		        },
  		        body: {
  		        	 onClick: function () {
  		                this.self.select(this.dindex);
  		            },
  		            onDBLClick: function () {
  		            },
  		        },
				page : {
					navigationItemCount : 10,
					height : 30,
					display : true,
					firstIcon : '<i class="fa fa-step-backward" aria-hidden="true"></i>',
					prevIcon : '<i class="fa fa-caret-left" aria-hidden="true"></i>',
					nextIcon : '<i class="fa fa-caret-right" aria-hidden="true"></i>',
					lastIcon : '<i class="fa fa-step-forward" aria-hidden="true"></i>',
					onChange : function() {
						gridView.setData(this.page.selectPage);
					}
				},
		    	columns : [
			    		{key: "rn",      label: "No.",      align: "center",   width: 60},
	                    {key: "salesCd",      label: "SALES CODE",      align: "center",   width: 130, hidden: true},
	                    {key: "wbsPlanNo",      label: "관리번호",      align: "center",   width: 130, hidden: true},
// 	                    {key: "wbsPlanCodeId",      label: "계획항목코드",      hidden: true},
// 	                    {key: "wbsPlanCodeNm",      label: "LEVEL",      align: "center",   width: 130, hidden: true},
	                    {key: "todoCfDt",      label: "확인일자",      align: "center",   width: 130, hidden: true},
	                    {key: "todoCfOpn",      label: "확인의견",      align: "left",   width: 200, hidden: true},
	                    {key: "wbsPlancoCd",      label: "회사",          hidden: false},
	                    {key: "wbsPlancoCdNm",      label: "회사명",      align: "center",   width: 130},
	                    {key: "wbsSharngUserId",      label: "ID",      align: "center",   width: 130},
	                    {key: "empNo",      label: "사원번호",      align: "center",   width: 130},
	                    {key: "name",      label: "성명",      align: "center",   width: 130},
	                    {key: "telNo",      label: "H.P",      align: "center",   width: 130},
	                    {key: "email",      label: "E-Mail",      align: "center",   width: 200}
    	              ]
					});
        			return this;
        		},

        		setData : function(_pageNo) {
        			var targetObj = this.target;
        			var formData = {
     	        			"fileTrgtKey" : fileTrgtKey,
     	        			"reqNo" : reqNo, 
     	        			"pageNo" : _pageNo + 1
     	    		}
        			
   					postAjax("/user/qm/qm01/selectShareUserlst", formData, null, function(data){	
   					var list = data.result;
   						targetObj.setData({
   	  						list : list,
	   	  					page : {
// // 	   	  							currentPage : _pageNo,
// // 				                    pageSize : data.paginationInfo.pageSize,
				                    	totalElements :  data.paginationInfo.totalRecordCount,
// // 				                    totalPages : data.paginationInfo.totalPageCount
						    } 
   	  					});
   	  				});
          		}
  	}
	
	
	function checkCd(element,itemCd,val){
		if(itemCd == "REQCDCP") { $("#reqCd").val(val);  }
		if(itemCd == "BUSTCDCP"){ $("#bustCd").val(val); }
		if(itemCd == "INWKCDCP"){ $("#inwkCd").val(val); }
		if(itemCd == "COBTPCP") { $("#partCd").val(val); }
	}	
	function checkOneDept(element,itemCd,deptVal,deptVal2) {
		 /////https://hianna.tistory.com/434 [체크박스 하나만 선택되도록 구현하기]
		 const checkboxes = document.getElementsByName(itemCd);

		  checkboxes.forEach((cb) => {   cb.checked = false; })		  
		  element.checked = true;
		/////https://hianna.tistory.com/434 [체크박스 하나만 선택되도록 구현하기]
// 		  element.checked = true;
		  $("#deptCd").val(deptVal);
		  $("#deptCd2").val(deptVal2);
	}
	
	function checkOne(element,itemCd,midVal,subVal) {
		 /////https://hianna.tistory.com/434 [체크박스 하나만 선택되도록 구현하기]
		 const checkboxes = document.getElementsByName(itemCd);

		  checkboxes.forEach((cb) => {   cb.checked = false; })		  
		  element.checked = true;
		/////https://hianna.tistory.com/434 [체크박스 하나만 선택되도록 구현하기]
		  $("#midCd").val(midVal);
		  $("#subCd").val(subVal);		  
	}
	
	function checkOne2(element,itemCd,midVal,subVal,deptVal,deptVal2) {
		/////https://hianna.tistory.com/434 [체크박스 하나만 선택되도록 구현하기]
		 const checkboxes = document.getElementsByName(itemCd);
		  checkboxes.forEach((cb) => {   cb.checked = false; })		  
		  element.checked = true;
		/////https://hianna.tistory.com/434 [체크박스 하나만 선택되도록 구현하기]
		  $("#midCd").val(midVal);
		  $("#subCd").val(subVal);
		  $("#deptCd").val(deptVal);
		  $("#deptCd2").val(deptVal2);
	}
	
	$(document).ready(function() {
		actionType = modalStack.last().paramObj.actionType;
		fileTrgtKey = modalStack.last().paramObj.fileTrgtKey;
		reqNo = modalStack.last().paramObj.reqNo;
		$("#fileTrgtKey").val(fileTrgtKey);
		
		setCommonSelect($(".popup_area select[data-kind]"));
		setCommonDiv($(".popup_area div[data-kind]"));
		setCommonItem($(".popup_area table[data-kind]"));
		//setCommonCheck($(".popup_area th[data-kind]"));
		setByCoCd(modalStack.last().paramObj.coCd);
		$("#popForm #userId").val(jwt.userId);
		$("#userEmpNo").val(jwt.empNo);
		$("#userDeptId").val(jwt.deptId); 
		var userDeptId = jwt.deptId;
		var userDept = userDeptId.substr(0, 5);
		$("#userDept").val(userDept);
		
		$("#coCd").prop("disabled", true);
		
		$("#COBGBP1").prop("disabled", true); //국내영업
		$("#COBGBP2").prop("disabled", true); //해외영업
		$("#COBGBP3").prop("disabled", true); //선형개발
		$("#COBGBP4").prop("disabled", true); //개발설계
		$("#COBGBP5").prop("disabled", true); //양산설계
		$("#COBGBP6").prop("disabled", true); //기계
		$("#COBGBP7").prop("disabled", true); //가공
		$("#COBGBP8").prop("disabled", true); //전기
		$("#COBGBP9").prop("disabled", true); //기타()
		//영업 item
		$("#COBGB111").prop("disabled", true);
		$("#COBGB121").prop("disabled", true);
		$("#COBGB122").prop("disabled", true);
		$("#COBGB123").prop("disabled", true);
		$("#COBGB124").prop("disabled", true);
		$("#COBGB125").prop("disabled", true);
		$("#COBGB126").prop("disabled", true);
		$("#COBGB131").prop("disabled", true);
		$("#COBGB132").prop("disabled", true);
		$("#COBGB133").prop("disabled", true);
		$("#COBGB191").prop("disabled", true);		
		//기술연구소item
		$("#COBGB211").prop("disabled", true);
		$("#COBGB251").prop("disabled", true);
		$("#COBGB212").prop("disabled", true);
		$("#COBGB252").prop("disabled", true);
		$("#COBGB221").prop("disabled", true);
		$("#COBGB253").prop("disabled", true);
		$("#COBGB222").prop("disabled", true);
		$("#COBGB254").prop("disabled", true);
		$("#COBGB223").prop("disabled", true);
		$("#COBGB255").prop("disabled", true);
		$("#COBGB224").prop("disabled", true);
		$("#COBGB256").prop("disabled", true);
		$("#COBGB231").prop("disabled", true);
		$("#COBGB257").prop("disabled", true);
		$("#COBGB232").prop("disabled", true);
		$("#COBGB261").prop("disabled", true);
		$("#COBGB233").prop("disabled", true);
		$("#COBGB262").prop("disabled", true);
		$("#COBGB234").prop("disabled", true);
		$("#COBGB263").prop("disabled", true);
		$("#COBGB235").prop("disabled", true);
		$("#COBGB291").prop("disabled", true);
		$("#COBGB241").prop("disabled", true);
		$("#COBGB242").prop("disabled", true);
		$("#COBGB243").prop("disabled", true);
		$("#COBGB244").prop("disabled", true);
		//생산 item
		$("#COBGB311").prop("disabled", true);
		$("#COBGB312").prop("disabled", true);
		$("#COBGB321").prop("disabled", true);
		$("#COBGB322").prop("disabled", true);
		$("#COBGB323").prop("disabled", true);
		$("#COBGB324").prop("disabled", true);
		$("#COBGB325").prop("disabled", true);
		$("#COBGB396").prop("disabled", true);
		//구매외주팀
		$("#COBGB411").prop("disabled", true);
		$("#COBGB454").prop("disabled", true);
		$("#COBGB412").prop("disabled", true);
		$("#COBGB453").prop("disabled", true);
		$("#COBGB421").prop("disabled", true);
		$("#COBGB452").prop("disabled", true);
		$("#COBGB431").prop("disabled", true);
		$("#COBGB451").prop("disabled", true);
		$("#COBGB432").prop("disabled", true);
		$("#COBGB461").prop("disabled", true);
		$("#COBGB433").prop("disabled", true);
		$("#COBGB462").prop("disabled", true);
		$("#COBGB434").prop("disabled", true);
		$("#COBGB471").prop("disabled", true);
		$("#COBGB441").prop("disabled", true);
		$("#COBGB472").prop("disabled", true);
		$("#COBGB473").prop("disabled", true);
		$("#COBGB481").prop("disabled", true);
		$("#COBGB482").prop("disabled", true);
		$("#COBGB483").prop("disabled", true);
		$("#COBGB484").prop("disabled", true);
		//기타 hidden COBGB91	
		
		selectAuth(jwt.deptId);
		
       	//발행일자//
		$('#ordrgDt').datepicker({
			format : "yyyy-mm-dd",
			language : "ko",
			autoclose : true
		}).datepicker("setDate", "today");
		
		//요구일정//
		$('#reqDt').datepicker({
			format : "yyyy-mm-dd",
			language : "ko",
			autoclose : true
		}).datepicker("setDate", "today");

		authChk();						// 권한체크
		
		gridViewPop.initView(); 
		
		var paramObj = {"coCd" : $('#coCd').val(), "userId" : jwt.userId};
        postAjaxSync("/user/qm/qm01/selectApprovalList", paramObj, null, function(data) {
        	approvalList = data.resultList;
        });
        
		if (actionType == "C") {
			
			$("#ordrgId").val(modalStack.last().paramObj.userId);
			$("#ordrgNm").val(modalStack.last().paramObj.userName);
			$("#regId").val(modalStack.last().paramObj.userId);
			$("#regNm").val(modalStack.last().paramObj.userName);
			$("#creatId").val(modalStack.last().paramObj.userId);
			
			 
			$("#actionBtn").text("등록");
			$('#actionBtn').on("click", function() {
				insertQualityReq();
			});

		} else if (actionType == "U") {
			$('.tit').text('요인별 발주 및 출장요청 수정');

			selectQtyReqInfo();
			
			$('#popForm input#coCd').attr('required', 'required');
			$('#coCd').css({'background-color':'#e6e6e6', 'pointer-events':'none'});

			$("#ordrgDt").prop("disabled", true);
			$("#REQCD1").prop("disabled", true); //reqCd
			$("#REQCD2").prop("disabled", true); 
			$("#reqDt").prop("disabled", true);
			$("#newCd").prop("disabled", true);
			$("#creatId").val(modalStack.last().paramObj.userId);			
			gridViewPop.initView().setData(0);
			
			$('#actionBtn').text("수정");
			$('#actionBtn').on("click", function() {
				updateQualityReq();
			});
		}
		 // TODO 리스트에서 호출 시 공유 : actionType:T  결재: actionType:S 처리 부분 
        else if (actionType == "T"){
        	$('.tit').text('발주 및 출장요청서 공유')
        	shareBtn.style.display = "none";
        	actionBtn.style.display = "none";
        	selectQtyReqInfo();
        	gridViewPop.setData();

        }
		//---------------------------------------------------------------  
		//첨부 화일 처리 시작 
		//---------------------------------------------------------------  
		fileParam = {
				fileTrgtTyp	: $("#pgmId").val(),
				fileTrgtKey		:fileTrgtKey
		}
  		treeModule.initAll('deptTreeOrdars', 'file-grid', 'FILETREE', fileParam);
		//---------------------------------------------------------------  
		//첨부 화일 처리 끝
		//---------------------------------------------------------------  
        
		if (approvalList.length == 0) {
			alert("결재선 지정 정보가 존재하지 않습니다. 기준관리에서 결재선을 추가 하세요");
		}
	});
	
	
	// 공유대상자 추가//  
    function insertShareUserModal() {    
		var paramObj = {"coCd" : $('#coCd').val()	};	    
    	openSecondModal("/static/html/cmn/modal/userSearch.html", 300, 500,
    			"사용자 검색", paramObj, function(tree) {
    				var checkedId = tree.get_checked()[0];
    				var checkedNode = tree.get_node(checkedId); 
    				var paramObj = {"coCd" : $(".popup_area #coCd").val(), "userId" : checkedId};

                    postAjax("/user/qm/qm01/selectShareUserInfo", paramObj, null, function(data) {
    						gridViewPop.target.addRow($.extend({}, "last", false));                             
    						var row = gridViewPop.target.getList().length -1 ;

    						gridViewPop.target.setValue(row, "rnum", "");
    						if(row == 0){ $('#sharId1').val(data.resultList[0].id); gridViewPop.target.setValue(row, "wbsSharngUserId", data.resultList[0].empNo);}
    						if(row == 1){ $('#sharId2').val(data.resultList[0].id); gridViewPop.target.setValue(row, "wbsSharngUserId", data.resultList[0].empNo);}
    						if(row == 2){ $('#sharId3').val(data.resultList[0].id); gridViewPop.target.setValue(row, "wbsSharngUserId", data.resultList[0].empNo);}
    						if(row == 3){ $('#sharId4').val(data.resultList[0].id); gridViewPop.target.setValue(row, "wbsSharngUserId", data.resultList[0].empNo);}
    						if(row == 4){ $('#sharId5').val(data.resultList[0].id); gridViewPop.target.setValue(row, "wbsSharngUserId", data.resultList[0].empNo);}
    						if(row == 5){ $('#sharId6').val(data.resultList[0].id); gridViewPop.target.setValue(row, "wbsSharngUserId", data.resultList[0].empNo);}
    						if(row == 6){ $('#sharId7').val(data.resultList[0].id); gridViewPop.target.setValue(row, "wbsSharngUserId", data.resultList[0].empNo);}
    						if(row == 7){ $('#sharId8').val(data.resultList[0].id); gridViewPop.target.setValue(row, "wbsSharngUserId", data.resultList[0].empNo);}
    						if(row == 8){ $('#sharId9').val(data.resultList[0].id); gridViewPop.target.setValue(row, "wbsSharngUserId", data.resultList[0].empNo);}
    						if(row == 9){ $('#sharId10').val(data.resultList[0].id); gridViewPop.target.setValue(row, "wbsSharngUserId", data.resultList[0].empNo);}
    						gridViewPop.target.setValue(row, "wbsPlancoCd", data.resultList[0].coCd);
    						gridViewPop.target.setValue(row, "wbsPlancoCdNm", data.resultList[0].coNm);
    						gridViewPop.target.setValue(row, "empNo", data.resultList[0].empNo);
    						gridViewPop.target.setValue(row, "name", data.resultList[0].usrNm);
    						gridViewPop.target.setValue(row, "telNo", data.resultList[0].telNo);
    						gridViewPop.target.setValue(row, "levelNm", data.resultList[0].levelNm);
    						gridViewPop.target.setValue(row, "email", data.resultList[0].eMail);
    						gridViewPop.target.setValue(row, "dtNm", data.resultList[0].dtNm);
    				});     
    			});
    }   
	
    function deleteShareUser(){
    	
    	var selRow = parseInt(gridViewPop.target.selectedDataIndexs);    
 		if( isNaN(selRow) ) {
 			alert("선택된 행이 없습니다.");
 			return;
 		} else {			
 				if( selRow > -1 ) {
 					gridViewPop.target.removeRow(selRow); 					
 					//$.gridNoSet(gridViewPop);	
 					if(selRow == 0){ $('#sharId1').val($('#sharIdNull').val()); }
					if(selRow == 1){ $('#sharId2').val($('#sharIdNull').val()); }
					if(selRow == 2){ $('#sharId3').val($('#sharIdNull').val()); }
					if(selRow == 3){ $('#sharId4').val($('#sharIdNull').val()); }
					if(selRow == 4){ $('#sharId5').val($('#sharIdNull').val()); }
					if(selRow == 5){ $('#sharId6').val($('#sharIdNull').val()); }
					if(selRow == 6){ $('#sharId7').val($('#sharIdNull').val()); }
					if(selRow == 7){ $('#sharId8').val($('#sharIdNull').val()); }
					if(selRow == 8){ $('#sharId9').val($('#sharIdNull').val()); }
					if(selRow == 9){ $('#sharId10').val($('#sharIdNull').val()); }
 				}
 		}
    }
	
	
	 // 발행자 검색 //  
    function openFirstUserSearch() {
		 if (actionType == "C"){
		    	var paramObj = {
		    		  "coCd" : $('#coCd').val(),
		    		"userId" : $('#ordrgNm').val(),
		    	};
		    	openSecondModal("/static/html/cmn/modal/userSearch.html", 300, 500,
		    			"사용자 검색", paramObj, function(tree) {
		    				var checkedId = tree.get_checked()[0];
		    				var checkedNode = tree.get_node(checkedId);
		    				$('#ordrgId').val(checkedNode.id);
		    				$('#ordrgNm').val(checkedNode.text);
		    				selectAuth(checkedNode.original.parent);
		    				  //gridView.setData(0);
		    			});
		 }
    }   
	 
	 // 접수자 검색 //  
    function openSecondUserSearch() {
		 if (actionType =="C"){
	    	var paramObj = {
	    		  "coCd" : $('#coCd').val(),
	    		"userId" : $('#regNm').val(),
	    	};
	    	openSecondModal("/static/html/cmn/modal/userSearch.html", 300, 500,
	    			"사용자 검색", paramObj, function(tree) {
	    				var checkedId = tree.get_checked()[0];
	    				var checkedNode = tree.get_node(checkedId);    				
	    				$('#regId').val(checkedNode.id);
	    				$('#regNm').val(checkedNode.text);
	    				 gridView.setData(0);
	    			});
		 }
    }  	
    
    
	function selectQtyReqInfo() {						//그리드에 뿌리는 데이터
		var formData = {
			"fileTrgtKey" : fileTrgtKey,
		}
		postAjax("/user/qm/qm01/selectQtyReqInfo", formData, null, function(data) {
				$.each(data.result, function(key, value) {
					if ($('#popForm #' + key)[0]) {
						$('#popForm #' + key).val(value);	
							if(key == "reqCd"){ 
								if(value == $("#REQCD1").val()){ $("#REQCD1").prop("checked", true); }
								if(value == $("#REQCD2").val()){ $("#REQCD2").prop("checked", true); }
							}
							if(key == "bustCd"){ 
								if(value == $("#BUSTCD1").val()){ $("#BUSTCD1").prop("checked", true); }
								if(value == $("#BUSTCD2").val()){ $("#BUSTCD2").prop("checked", true); }
							}
							if(key == "inwkCd"){ 
								if(value == $("#INWKCD1").val()){ $("#INWKCD1").prop("checked", true); }
								if(value == $("#INWKCD2").val()){ $("#INWKCD2").prop("checked", true); }	
							}
							if(key == "partCd"){ 
								if(value == $("#COBTP1").val()){ $("#COBTP1").prop("checked", true); }
								if(value == $("#COBTP2").val()){ $("#COBTP2").prop("checked", true); }	
								if(value == $("#COBTP3").val()){ $("#COBTP3").prop("checked", true); }	
								if(value == $("#COBTP4").val()){ $("#COBTP4").prop("checked", true); }	
								if(value == $("#COBTP5").val()){ $("#COBTP5").prop("checked", true); }	
								if(value == $("#COBTP6").val()){ $("#COBTP6").prop("checked", true); }	
								if(value == $("#COBTP7").val()){ $("#COBTP7").prop("checked", true); }	
								if(value == $("#COBTP8").val()){ $("#COBTP8").prop("checked", true); }	
								if(value == $("#COBTP9").val()){ $("#COBTP9").prop("checked", true); }	
								if(value == $("#COBTP10").val()){ $("#COBTP10").prop("checked", true); }
							}
						
						  if(key == "deptCd2"){
							    if (value == $("#COBGBP1").val()){ $("#COBGBP1").prop("checked", true); }
							    if (value == $("#COBGBP2").val()){ $("#COBGBP2").prop("checked", true); } 
							    if (value == $("#COBGBP3").val()){ $("#COBGBP3").prop("checked", true); } 
							    if (value == $("#COBGBP4").val()){ $("#COBGBP4").prop("checked", true); } 
							    if (value == $("#COBGBP5").val()){ $("#COBGBP5").prop("checked", true); } 
							    if (value == $("#COBGBP6").val()){ $("#COBGBP6").prop("checked", true); } 
							    if (value == $("#COBGBP7").val()){ $("#COBGBP7").prop("checked", true); } 
							    if (value == $("#COBGBP8").val()){ $("#COBGBP8").prop("checked", true); } 
							    if (value == $("#COBGBP9").val()){ $("#COBGBP9").prop("checked", true); } 
							  
						  }
						  if(key == "subCd"){
							    if (value == $("#COBGB111").val()){ $("#COBGB111").prop("checked", true); }
							    if (value == $("#COBGB121").val()){ $("#COBGB121").prop("checked", true); } 
							    if (value == $("#COBGB122").val()){ $("#COBGB122").prop("checked", true); } 
							    if (value == $("#COBGB123").val()){ $("#COBGB123").prop("checked", true); } 
							    if (value == $("#COBGB124").val()){ $("#COBGB124").prop("checked", true); } 
							    if (value == $("#COBGB125").val()){ $("#COBGB125").prop("checked", true); } 
							    if (value == $("#COBGB126").val()){ $("#COBGB126").prop("checked", true); } 
							    if (value == $("#COBGB131").val()){ $("#COBGB131").prop("checked", true); } 
							    if (value == $("#COBGB132").val()){ $("#COBGB132").prop("checked", true); } 
							    if (value == $("#COBGB133").val()){ $("#COBGB133").prop("checked", true); } 
							    if (value == $("#COBGB191").val()){ $("#COBGB191").prop("checked", true); } 							    
							    //기술연구소
							    if (value == $("#COBGB211").val()){ $("#COBGB211").prop("checked", true); }
							    if (value == $("#COBGB212").val()){ $("#COBGB212").prop("checked", true); } 							    
							    if (value == $("#COBGB221").val()){ $("#COBGB221").prop("checked", true); } 
							    if (value == $("#COBGB222").val()){ $("#COBGB222").prop("checked", true); } 
							    if (value == $("#COBGB223").val()){ $("#COBGB223").prop("checked", true); } 
							    if (value == $("#COBGB224").val()){ $("#COBGB224").prop("checked", true); } 							    
							    if (value == $("#COBGB231").val()){ $("#COBGB231").prop("checked", true); } 
							    if (value == $("#COBGB232").val()){ $("#COBGB232").prop("checked", true); } 
							    if (value == $("#COBGB233").val()){ $("#COBGB233").prop("checked", true); } 
							    if (value == $("#COBGB234").val()){ $("#COBGB234").prop("checked", true); } 
							    if (value == $("#COBGB235").val()){ $("#COBGB235").prop("checked", true); } 							    
							    if (value == $("#COBGB241").val()){ $("#COBGB241").prop("checked", true); } 
							    if (value == $("#COBGB242").val()){ $("#COBGB242").prop("checked", true); } 
							    if (value == $("#COBGB243").val()){ $("#COBGB243").prop("checked", true); } 
							    if (value == $("#COBGB244").val()){ $("#COBGB244").prop("checked", true); } 
							    if (value == $("#COBGB235").val()){ $("#COBGB235").prop("checked", true); } 							    
							    if (value == $("#COBGB251").val()){ $("#COBGB251").prop("checked", true); } 
							    if (value == $("#COBGB252").val()){ $("#COBGB252").prop("checked", true); } 
							    if (value == $("#COBGB253").val()){ $("#COBGB253").prop("checked", true); } 
							    if (value == $("#COBGB254").val()){ $("#COBGB254").prop("checked", true); } 
							    if (value == $("#COBGB255").val()){ $("#COBGB255").prop("checked", true); } 
							    if (value == $("#COBGB256").val()){ $("#COBGB256").prop("checked", true); } 
							    if (value == $("#COBGB257").val()){ $("#COBGB257").prop("checked", true); } 							    
							    if (value == $("#COBGB261").val()){ $("#COBGB261").prop("checked", true); } 
							    if (value == $("#COBGB262").val()){ $("#COBGB262").prop("checked", true); } 
							    if (value == $("#COBGB263").val()){ $("#COBGB263").prop("checked", true); } 							    
							    if (value == $("#COBGB291").val()){ $("#COBGB291").prop("checked", true); } 							    
							    //생산
							    if (value == $("#COBGB311").val()){ $("#COBGB311").prop("checked", true); } 
							    if (value == $("#COBGB312").val()){ $("#COBGB312").prop("checked", true); } 
							    if (value == $("#COBGB321").val()){ $("#COBGB321").prop("checked", true); } 
							    if (value == $("#COBGB322").val()){ $("#COBGB322").prop("checked", true); } 
							    if (value == $("#COBGB323").val()){ $("#COBGB323").prop("checked", true); } 
							    if (value == $("#COBGB324").val()){ $("#COBGB324").prop("checked", true); } 
							    if (value == $("#COBGB325").val()){ $("#COBGB325").prop("checked", true); }			    
							    if (value == $("#COBGB391").val()){ $("#COBGB391").prop("checked", true); } 
							    //구메외주팀
							    if (value == $("#COBGB411").val()){ $("#COBGB411").prop("checked", true); } 
							    if (value == $("#COBGB412").val()){ $("#COBGB412").prop("checked", true); } 
							    if (value == $("#COBGB421").val()){ $("#COBGB421").prop("checked", true); } 
							    if (value == $("#COBGB431").val()){ $("#COBGB431").prop("checked", true); } 
							    if (value == $("#COBGB432").val()){ $("#COBGB432").prop("checked", true); } 
							    if (value == $("#COBGB433").val()){ $("#COBGB433").prop("checked", true); } 
							    if (value == $("#COBGB434").val()){ $("#COBGB434").prop("checked", true); } 
							    if (value == $("#COBGB441").val()){ $("#COBGB441").prop("checked", true); } 
							    if (value == $("#COBGB451").val()){ $("#COBGB451").prop("checked", true); } 
							    if (value == $("#COBGB452").val()){ $("#COBGB452").prop("checked", true); } 
							    if (value == $("#COBGB453").val()){ $("#COBGB453").prop("checked", true); } 
							    if (value == $("#COBGB454").val()){ $("#COBGB454").prop("checked", true); } 
							    if (value == $("#COBGB461").val()){ $("#COBGB461").prop("checked", true); } 
							    if (value == $("#COBGB462").val()){ $("#COBGB462").prop("checked", true); } 
							    if (value == $("#COBGB471").val()){ $("#COBGB471").prop("checked", true); } 
							    if (value == $("#COBGB472").val()){ $("#COBGB472").prop("checked", true); } 
							    if (value == $("#COBGB473").val()){ $("#COBGB473").prop("checked", true); } 
							    if (value == $("#COBGB481").val()){ $("#COBGB481").prop("checked", true); } 
							    if (value == $("#COBGB482").val()){ $("#COBGB482").prop("checked", true); } 
							    if (value == $("#COBGB483").val()){ $("#COBGB483").prop("checked", true); } 
							    if (value == $("#COBGB484").val()){ $("#COBGB484").prop("checked", true); } 
							    //기타
							    if(value == $("#COBGB91").val()){ }
						  }
						 
						if ($('#popForm #' + key).is('[comma]')) {
							onlyNumber($('#popForm #' + key)[0]);
						     
						}
					}
				});
				
		});
	}

	
	 // 등록
	function insertQualityReq() {
		
		if (inputValidation($('.popup_area [required]'))) {						// 필수 필드의 유효성 검사			
			if($("#ordrgId").val() == ""){	
				alert("발행자 아이디를 선택해주세요");			
			}else if($("#regId").val() == ""){	
				alert("접수자 아이디를 선택해주세요");
			}else if($("#salesCd").val() == ""){	
				alert("세일즈코드를 선택해주세요");					
			}else if($("#deptCd").val() == "COBGB9" && $("#reqRmk").val() == ""){ //비고
		        alert("기타사항 비고를 입력해주세요"); 
			}else{	
				var formData = makeFormData();										// 요청이 통과하면 makeFormData() 함수를 이용해 formData를 생성
				filePostAjax("/user/qm/qm01/insertQualityReq", formData,				// 파일을 포함한 데이터를 서버로 전송하는 비동기적인 AJAX 요청을 수행
						function(data) {
							alert(data.resultMessage);								// 결과 메시지를 alert으로 출력
							if (data.resultCode == 200) {							//  요청이 성공(200)한 경우, gridView.setData(0)를 호출하여 그리드 뷰를 업데이트하고,
								gridView.setData(0);
								modalStack.close();									// 모달을 닫음
							}
						});
			}
		}
	}
	
	// 수정
	function updateQualityReq(){	
		
		 if (inputValidation($('.popup_area [required]'))) {						// 필수 필드의 유효성 검사
			 
		    if($("#REQCD1").prop("checked")){ $("#reqCd").val($("#REQCD1").val()); }
			if($("#REQCD2").prop("checked")){ $("#reqCd").val($("#REQCD2").val()); }
			if($("#BUSTCD1").prop("checked")){ $("#bustCd").val($("#BUSTCD1").val()); }
			if($("#BUSTCD2").prop("checked")){ $("#bustCd").val($("#BUSTCD2").val()); }
			if($("#INWKCD1").prop("checked")){ $("#inwkCd").val($("#INWKCD1").val()); }
			if($("#INWKCD2").prop("checked")){ $("#inwkCd").val($("#INWKCD2").val()); }				
			if($("#COBTP1").prop("checked")){ $("#partCd").val($("#COBTP1").val()); }
			if($("#COBTP2").prop("checked")){ $("#partCd").val($("#COBTP2").val()); }
			if($("#COBTP3").prop("checked")){ $("#partCd").val($("#COBTP3").val()); }
			if($("#COBTP4").prop("checked")){ $("#partCd").val($("#COBTP4").val()); }
			if($("#COBTP5").prop("checked")){ $("#partCd").val($("#COBTP5").val()); }
			if($("#COBTP6").prop("checked")){ $("#partCd").val($("#COBTP6").val()); }
			if($("#COBTP7").prop("checked")){ $("#partCd").val($("#COBTP7").val()); }
			if($("#COBTP8").prop("checked")){ $("#partCd").val($("#COBTP8").val()); }
			if($("#COBTP9").prop("checked")){ $("#partCd").val($("#COBTP9").val()); }
			if($("#COBTP10").prop("checked")){ $("#partCd").val($("#COBTP10").val()); } 		 
		 
			var formData = makeFormData();										// 요청이 통과하면 makeFormData() 함수를 이용해 formData를 생성
	      	filePostAjax("/user/qm/qm01/updateQualityReq", formData,function(data) {
						alert(data.resultMessage);
						if (data.resultCode == 200) {
							gridView.setData(0);
							modalStack.close();
						}
					});
			}
	}

	//----------------------------------------------//

	function makeFormData() {		
		// 금액 콤마 제거
		$.each($('.popup_area input[comma]'), function(idx, elem) {
			deleteComma(elem);
		});
		// 날짜 하이픈 제거
		$.each($('.popup_area input[date]'), function(idx, elem) {
			deleteHyphen(elem);
		});
		// 폼데이터 생성
		var formData = new FormData($("#popForm")[0]);
		formData.append("coCd", $('#coCd').val());
        //---------------------------------------------------------------
		//-------itemarr  --첨부화일 처리를 위한 부분 시작
		//---------------------------------------------------------------
		formData.append("ordrsNo", $("#ordrsNo").val());
		formData.append("userId" , jwt.userId);
		formData.append("clntCd" , $('#clntCd').val());			//첨부화일용
		formData.append("prdtCd" , $('#prdtCd').val(""));			//첨부화일용
		formData.append("itemCd" , $('#itemDiv').val(""));			//첨부화일용
		formData.append("prjctCd", $('#clntPjt').val());		//첨부화일용
		formData.append("comonCd", treeModule.getFileNodeId());	//첨부화일용
		
		//---------------------------------------------------------------  
        
        //---------------------------------------------------------------  
		var fileUploadArr = [];
		var tempArr = [];
		
		tempArr = treeModule.getFileArr();
		$.each(tempArr, function(idx, obj) {
			if (obj.fileKey == 0) {
                formData.append("files", obj.file);
                obj.file = '';
                fileUploadArr.push(obj);
			}
		});

		formData.append("uploadFileArr", JSON.stringify(fileUploadArr));
		formData.append("deleteFileArr", JSON.stringify(treeModule.getDeleteFileArr()));
		
		
		//---------------------------------------------------------------  
		//--첨부화일 처리를 위한 부분 끝
		//--------------------------------------------------------------- 

       // 공유대상자 리스트  TODO LIST에 등록하기 위한 모듈 추가 (박성준 : 2023.08.03) 
      // 공유 : TODODIV10, TODODIV1040  결재 :TODODIV20, TODODIV2020
       var rowSharngList = gridViewPop.target.list;
       var ParamObj = modalStack.last().paramObj.ParamObj;

       if(rowSharngList.length > 0) {
           var rowSharngListArr = [];
           $.each(rowSharngList, function(idx, elem){
               var rowSharngListObj = elem;
               rowSharngListObj["coCd"] = $('#coCd').val();
               rowSharngListObj["salesCd"] = $('#salesCd').val();
               rowSharngListObj["todoDiv1CodeId"] = "TODODIV10";
               rowSharngListObj["todoDiv2CodeId"] = "TODODIV1040";
               rowSharngListObj["todoId"] = elem.id;
               rowSharngListObj["todoCoCd"] = elem.coCd;
               rowSharngListObj["empNo"] = elem.empNo;
               rowSharngListObj["name"] = elem.usrNm;
               rowSharngListObj["telNo"] = elem.telNo;
               rowSharngListObj["email"] = elem.eMail;    
               rowSharngListObj["pgPath"] = "/user/qm/qm01/QM0101P01.html";
               //rowSharngListObj["pgParam"] = ParamObj;
              
               rowSharngListArr.push(rowSharngListObj);
           });
           formData.append("rowSharngListArr", JSON.stringify(rowSharngListArr));           
       }
       formData.append("S_todoDiv1CodeId", "TODODIV10");
       formData.append("S_todoDiv2CodeId", "TODODIV1040");

//        if (actionType == "C") {
//     	   if (approvalList.length > 0) {
//     		   $.each(approvalList, function(idx, elem) {
//     			   var rowApprovalListArr = [];
//     			   var rowApprovalListObj = elem;
//     			   rowApprovalListObj["coCd"] = $('#coCd').val();
//     			   rowApprovalListObj["salesCd"] = $('#salesCd').val();
//     			   rowApprovalListObj["todoDiv1CodeId"] = "TODODIV20";
//     			   rowApprovalListObj["todoDiv2CodeId"] = "TODODIV2020";
//     			   rowApprovalListObj["todoId"] = elem.id;
//     			   rowApprovalListObj["todoCoCd"] = elem.coCd;
//     			   rowApprovalListObj["empNo"] = elem.empNo;
//     			   rowApprovalListObj["name"] = elem.usrNm;
//     			   rowApprovalListObj["telNo"] = elem.telNo;
//     			   rowApprovalListObj["email"] = elem.eMail;    
//     			   rowApprovalListObj["pgPath"] = "/user/qm/qm01/QM0101P12.html";
//     			   //rowApprovalListObj["pgParam"] = ParamObj;
//     			   rowApprovalListArr.push(rowApprovalListObj);
//                });
//     		   formData.append("rowApprovalListArr", JSON.stringify(approvalList));
//     	   }
//        }
//        else if (actionType == "U") {
//     	   formData.append("reqNo", $('#reqNo').val());
//            formData.append("salesCd", $('#salesCd').val());           
//        }
       
//        formData.append("A_todoDiv1CodeId", "TODODIV20");
//        formData.append("A_todoDiv2CodeId", "TODODIV2020");
       
	   return formData;
	}
	
	function opendOrdrsSearch() {
    	var paramObj = {
    			"searchValue" : $('#ordrsNo').val(),
    			"coCd" : $('#coCd').val()
    		};
    	
    	openSecondModal("/static/html/cmn/modal/ordrsSearch.html", 800, 420, "수주번호 검색", paramObj, function (grid) {
            var row = grid.target.getList("selected")[0];
            $('#ordrsNo').val(row.ordrsNo);
        });
    }
	
    //Sales Code (수주마스터, 수주상세테이블 조인) 검색
    function wbsSalesCodeSearch() {
    	if (actionType == "C"){
	        var paramObj = {
	           "coCd" : $('#coCd').val(),
	           "salesCd": $('#salesCd').val()
	        };
	        openSecondModal("/static/html/cmn/modal/SalesCodeTreeSearch.html", 1000, 500, "SALES CODE 검색", paramObj, function (grid){
	            var row = grid.target.getList("selected")[0];
	
	             $('#salesCd').val(row.salesCd);
	             $('#matrDrwNo').val(row.salesCd);
	             $('#clntPjt').val(row.clntPjt);
	             $('#clntCd').val(row.ordrsClntCd);
	             $('#clntNm').val(row.ordrsClntNm);
	             $('#newCd').val(row.ordrsDtlDiv20Nm);
	             $('#ordrsdtldiv20').val(row.ordrsDtlDiv20);
	             $('#ordrsNo').val(row.ordrsNo);
	             $('#prdtCd').val(row.prdtCd);
	             $('#itemDiv').val(row.itemDiv);
	             $('#projNm').val(row.ctrtNm);
	        });
    	}
    }
    		
	
	// 고객사 검색
	function clntSearch() {
		openSecondModal("/static/html/cmn/modal/clntSearch.html", 600, 420,
				"고객사 검색", {}, function(grid) {
					var row = grid.target.getList("selected")[0];
					$('#clntCd').val(row.clntCd);
					$('#clntNm').val(row.clntNm);
				});
	}
	
	// 자재 품번 팝업 호출하는 함수
    function openMatListSearch(openType) {
          //debugger;
          var paramObj = {
      			"searchValue" : $("#matrNm").val()
          }
          openSecondModal("/static/html/cmn/modal/matListSearch.html", 600, 420, "자재 품번 검색", paramObj, function(grid) {
                        var row = grid.target.getList("selected")[0];
                        if (openType == "P") {
							$('#matrCd').val(row.matrCd);		// 	품번 값 가져오기
							$('#matrNm').val(row.matrNm);	//	품번 값 가져오기
                        } 
                 });
    }
		
	function setByCoCd(value) {
		$('#coCd option:not([value="'+value+'"])').remove();
	}
	
	//공유대상자 팝업
	   function opendModalSharngListList() { 
		   //debugger;
	       var formData = {};
	       openSecondModal("/static/html/user/wb/wb02/WB0202P01.html", 1300, 780, "결재선 지정", formData, function (grid){
	               var rowList = grid.target.getList("selected");
	               if (rowList.length > 0) {
	                   var chk = false;
	                   $.each(rowList, function(idx, elem){ 
	                       if (elem.check == "Y") { 
	                           var userId = elem.appId;
	                           var rowList1 = gridViewPop.target.getList();
	                           $.each(rowList1, function(idx, elem){
	                                if (elem.wbsSharngUserId == userId) {
	                                   chk = true;
	                               }
	                           });
	                       }
	                   });
	                   if (chk == false) {
	                       $.each(rowList, function(idx, elem){
	                           if (elem.check == "Y") {
	                                   var paramObj = {"coCd" : elem.coCd, "userId" : elem.appId};            
	                                   postAjax("/user/wb/wb02/selectRsltsMemberList", paramObj, null, function(data){
	                                	   
	                                	   		gridViewPop.target.addRow($.extend({}, "last", false));
	                                           var row = gridViewPop.target.getList().length - 1;
	                                           gridViewPop.target.setValue(row, "salesCd", $("#salesCd").val());
	                                           //gridViewPop.target.setValue(row, "wbsPlanNo", $("#wbsPlanNo").val());
// 	                                           if (lvl == 1) {
// 	                                        	   gridViewPop.target.setValue(row, "wbsPlanCodeId", $("#wbsLevel1").val());
// 	                                               gridViewPop.target.setValue(row, "wbsPlanCodeNm", $("#wbsLevel1 option:checked").text());
// 	                                           }
// 	                                           else if (lvl == 2) {
// 	                                        	   gridViewPop.target.setValue(row, "wbsPlanCodeId", $("#wbsLevel2").val());
// 	                                              gridViewPop.target.setValue(row, "wbsPlanCodeNm", $("#wbsLevel2 option:checked").text());
// 	                                           }
// 	                                           else if (lvl == 3) {
// 	                                        	   gridViewPop.target.setValue(row, "wbsPlanCodeId", $("#wbsLevel3").val());
// 	                                              gridViewPop.target.setValue(row, "wbsPlanCodeNm", $("#wbsLevel3 option:checked").text());
// 	                                           }
	                                           
	                                           gridViewPop.target.setValue(row, "wbsPlancoCd", data.resultList[0].coCd);
	                                           gridViewPop.target.setValue(row, "wbsPlancoCdNm", data.resultList[0].coCdNm);
	                                           gridViewPop.target.setValue(row, "wbsSharngUserId", data.resultList[0].id);
	                                           gridViewPop.target.setValue(row, "empNo", data.resultList[0].empNo);
	                                           gridViewPop.target.setValue(row, "name", data.resultList[0].name);
	                                           gridViewPop.target.setValue(row, "telNo", data.resultList[0].telNo);
	                                           gridViewPop.target.setValue(row, "email", data.resultList[0].email);                                        
	                                   });
	                             }
	                       });
	                  }
	                  else {
	                      alert("중복 공유를 지정할 수 없습니다.");
	                      return;
	                  }
	               }
	               
	       });
	   }
	
	
	function selectAuth(value){
		var userDeptId = value;
		var userDept = userDeptId.substr(0, 5);
		
		$("#COBGBP1").prop("disabled", true); //국내영업
		$("#COBGBP2").prop("disabled", true); //해외영업
		$("#COBGBP3").prop("disabled", true); //선형개발
		$("#COBGBP4").prop("disabled", true); //개발설계
		$("#COBGBP5").prop("disabled", true); //양산설계
		$("#COBGBP6").prop("disabled", true); //기계
		$("#COBGBP7").prop("disabled", true); //가공
		$("#COBGBP8").prop("disabled", true); //전기
		$("#COBGBP9").prop("disabled", true); //기타()
		//영업 item
		$("#COBGB111").prop("disabled", true);
		$("#COBGB121").prop("disabled", true);
		$("#COBGB122").prop("disabled", true);
		$("#COBGB123").prop("disabled", true);
		$("#COBGB124").prop("disabled", true);
		$("#COBGB125").prop("disabled", true);
		$("#COBGB126").prop("disabled", true);
		$("#COBGB131").prop("disabled", true);
		$("#COBGB132").prop("disabled", true);
		$("#COBGB133").prop("disabled", true);
		$("#COBGB191").prop("disabled", true);		
		//기술연구소item
		$("#COBGB211").prop("disabled", true);
		$("#COBGB251").prop("disabled", true);
		$("#COBGB212").prop("disabled", true);
		$("#COBGB252").prop("disabled", true);
		$("#COBGB221").prop("disabled", true);
		$("#COBGB253").prop("disabled", true);
		$("#COBGB222").prop("disabled", true);
		$("#COBGB254").prop("disabled", true);
		$("#COBGB223").prop("disabled", true);
		$("#COBGB255").prop("disabled", true);
		$("#COBGB224").prop("disabled", true);
		$("#COBGB256").prop("disabled", true);
		$("#COBGB231").prop("disabled", true);
		$("#COBGB257").prop("disabled", true);
		$("#COBGB232").prop("disabled", true);
		$("#COBGB261").prop("disabled", true);
		$("#COBGB233").prop("disabled", true);
		$("#COBGB262").prop("disabled", true);
		$("#COBGB234").prop("disabled", true);
		$("#COBGB263").prop("disabled", true);
		$("#COBGB235").prop("disabled", true);
		$("#COBGB291").prop("disabled", true);
		$("#COBGB241").prop("disabled", true);
		$("#COBGB242").prop("disabled", true);
		$("#COBGB243").prop("disabled", true);
		$("#COBGB244").prop("disabled", true);
		//생산 item
		$("#COBGB311").prop("disabled", true);
		$("#COBGB312").prop("disabled", true);
		$("#COBGB321").prop("disabled", true);
		$("#COBGB322").prop("disabled", true);
		$("#COBGB323").prop("disabled", true);
		$("#COBGB324").prop("disabled", true);
		$("#COBGB325").prop("disabled", true);
		$("#COBGB396").prop("disabled", true);
		//구매외주팀
		$("#COBGB411").prop("disabled", true);
		$("#COBGB454").prop("disabled", true);
		$("#COBGB412").prop("disabled", true);
		$("#COBGB453").prop("disabled", true);
		$("#COBGB421").prop("disabled", true);
		$("#COBGB452").prop("disabled", true);
		$("#COBGB431").prop("disabled", true);
		$("#COBGB451").prop("disabled", true);
		$("#COBGB432").prop("disabled", true);
		$("#COBGB461").prop("disabled", true);
		$("#COBGB433").prop("disabled", true);
		$("#COBGB462").prop("disabled", true);
		$("#COBGB434").prop("disabled", true);
		$("#COBGB471").prop("disabled", true);
		$("#COBGB441").prop("disabled", true);
		$("#COBGB472").prop("disabled", true);
		$("#COBGB473").prop("disabled", true);
		$("#COBGB481").prop("disabled", true);
		$("#COBGB482").prop("disabled", true);
		$("#COBGB483").prop("disabled", true);
		$("#COBGB484").prop("disabled", true);
		
		
		$("#COBGBP1").prop("checked", false);
		$("#COBGBP2").prop("checked", false);
		$("#COBGBP3").prop("checked", false);
		$("#COBGBP4").prop("checked", false);
		$("#COBGBP5").prop("checked", false);
		$("#COBGBP6").prop("checked", false);
		$("#COBGBP7").prop("checked", false);
		$("#COBGBP8").prop("checked", false);
		$("#COBGBP9").prop("checked", false);
		
		
		//영업 item
		$("#COBGB111").prop("checked", false);
		$("#COBGB121").prop("checked", false);
		$("#COBGB122").prop("checked", false);
		$("#COBGB123").prop("checked", false);
		$("#COBGB124").prop("checked", false);
		$("#COBGB125").prop("checked", false);
		$("#COBGB126").prop("checked", false);
		$("#COBGB131").prop("checked", false);
		$("#COBGB132").prop("checked", false);
		$("#COBGB133").prop("checked", false);
		$("#COBGB191").prop("checked", false);		
		//기술연구소item
		$("#COBGB211").prop("checked", false);
		$("#COBGB251").prop("checked", false);
		$("#COBGB212").prop("checked", false);
		$("#COBGB252").prop("checked", false);
		$("#COBGB221").prop("checked", false);
		$("#COBGB253").prop("checked", false);
		$("#COBGB222").prop("checked", false);
		$("#COBGB254").prop("checked", false);
		$("#COBGB223").prop("checked", false);
		$("#COBGB255").prop("checked", false);
		$("#COBGB224").prop("checked", false);
		$("#COBGB256").prop("checked", false);
		$("#COBGB231").prop("checked", false);
		$("#COBGB257").prop("checked", false);
		$("#COBGB232").prop("checked", false);
		$("#COBGB261").prop("checked", false);
		$("#COBGB233").prop("checked", false);
		$("#COBGB262").prop("checked", false);
		$("#COBGB234").prop("checked", false);
		$("#COBGB263").prop("checked", false);
		$("#COBGB235").prop("checked", false);
		$("#COBGB291").prop("checked", false);
		$("#COBGB241").prop("checked", false);
		$("#COBGB242").prop("checked", false);
		$("#COBGB243").prop("checked", false);
		$("#COBGB244").prop("checked", false);
		//생산 item
		$("#COBGB311").prop("checked", false);
		$("#COBGB312").prop("checked", false);
		$("#COBGB321").prop("checked", false);
		$("#COBGB322").prop("checked", false);
		$("#COBGB323").prop("checked", false);
		$("#COBGB324").prop("checked", false);
		$("#COBGB325").prop("checked", false);
		$("#COBGB396").prop("checked", false);
		//구매외주팀
		$("#COBGB411").prop("checked", false);
		$("#COBGB454").prop("checked", false);
		$("#COBGB412").prop("checked", false);
		$("#COBGB453").prop("checked", false);
		$("#COBGB421").prop("checked", false);
		$("#COBGB452").prop("checked", false);
		$("#COBGB431").prop("checked", false);
		$("#COBGB451").prop("checked", false);
		$("#COBGB432").prop("checked", false);
		$("#COBGB461").prop("checked", false);
		$("#COBGB433").prop("checked", false);
		$("#COBGB462").prop("checked", false);
		$("#COBGB434").prop("checked", false);
		$("#COBGB471").prop("checked", false);
		$("#COBGB441").prop("checked", false);
		$("#COBGB472").prop("checked", false);
		$("#COBGB473").prop("checked", false);
		$("#COBGB481").prop("checked", false);
		$("#COBGB482").prop("checked", false);
		$("#COBGB483").prop("checked", false);
		$("#COBGB484").prop("checked", false);
		
				
		//영업 30, 기술연구소 40, 생산 60, 구매외주팀 50 
		if(userDept == "GUN30"){
			$("#deptCd").val("COBGB1");
			$("#COBGB111").prop("disabled", false);
			$("#COBGB121").prop("disabled", false);
			$("#COBGB122").prop("disabled", false);
			$("#COBGB123").prop("disabled", false);
			$("#COBGB124").prop("disabled", false);
			$("#COBGB125").prop("disabled", false);
			$("#COBGB126").prop("disabled", false);
			$("#COBGB131").prop("disabled", false);
			$("#COBGB132").prop("disabled", false);
			$("#COBGB133").prop("disabled", false);
			$("#COBGB191").prop("disabled", false);		
			
			 if (userDeptId == "GUN3010"){           //국내영업
				$("#COBGBP1").prop("disabled", false); 
				$("#COBGBP1").prop("checked", true);  
				$("#deptCd2").val("COBGBP11");		
			 
			 }else if (userDeptId == "GUN3020"){    //해외영업
				$("#COBGBP2").prop("disabled", false); 
				$("#COBGBP2").prop("checked", true);
				$("#deptCd2").val("COBGBP12");
			 }
			 else {
				 $("#COBGBP1").prop("disabled", false); 
				 $("#COBGBP2").prop("disabled", false); 
			 }
		 
		}else if(userDept == "GUN40"){
				$("#deptCd").val("COBGB2");
				$("#COBGB211").prop("disabled", false);
				$("#COBGB251").prop("disabled", false);
				$("#COBGB212").prop("disabled", false);
				$("#COBGB252").prop("disabled", false);
				$("#COBGB221").prop("disabled", false);
				$("#COBGB253").prop("disabled", false);
				$("#COBGB222").prop("disabled", false);
				$("#COBGB254").prop("disabled", false);
				$("#COBGB223").prop("disabled", false);
				$("#COBGB255").prop("disabled", false);
				$("#COBGB224").prop("disabled", false);
				$("#COBGB256").prop("disabled", false);
				$("#COBGB231").prop("disabled", false);
				$("#COBGB257").prop("disabled", false);
				$("#COBGB232").prop("disabled", false);
				$("#COBGB261").prop("disabled", false);
				$("#COBGB233").prop("disabled", false);
				$("#COBGB262").prop("disabled", false);
				$("#COBGB234").prop("disabled", false);
				$("#COBGB263").prop("disabled", false);
				$("#COBGB235").prop("disabled", false);
				$("#COBGB291").prop("disabled", false);
				$("#COBGB241").prop("disabled", false);
				$("#COBGB242").prop("disabled", false);
				$("#COBGB243").prop("disabled", false);
				$("#COBGB244").prop("disabled", false);
			
			  if(userDeptId == "GUN4010"){        //선형개발 //기술개발
				 $("#COBGBP3").prop("disabled", false); 
				 $("#COBGBP3").prop("checked", true); 			
				 $("#deptCd2").val("COBGBP21");
				
			  }else if(userDeptId == "GUN4020"){  //개발설계 //기술개발
				  $("#COBGBP4").prop("disabled", false); 
				  $("#COBGBP4").prop("checked", true); 
				  $("#deptCd2").val("COBGBP22");
					
			  }else if(userDeptId == "GUN4030"){  //양산설계 //기술개발
				  $("#COBGBP5").prop("disabled", false); 
				  $("#COBGBP5").prop("checked", true);
				  $("#deptCd2").val("COBGBP23");
			  }
		  
		}else if(userDept == "GUN60"){ 
			
			$("#deptCd").val("COBGB3");
			$("#deptCd2").val("COBGB31");
			$("#COBGB311").prop("disabled", false);
			$("#COBGB312").prop("disabled", false);
			$("#COBGB321").prop("disabled", false);
			$("#COBGB322").prop("disabled", false);
			$("#COBGB323").prop("disabled", false);
			$("#COBGB324").prop("disabled", false);
			$("#COBGB325").prop("disabled", false);
			$("#COBGB396").prop("disabled", false);
	    
		}else if(userDept == "GUN50"){
			$("#deptCd").val("COBGB4");
			$("#COBGB411").prop("disabled", false);
			$("#COBGB454").prop("disabled", false);
			$("#COBGB412").prop("disabled", false);
			$("#COBGB453").prop("disabled", false);
			$("#COBGB421").prop("disabled", false);
			$("#COBGB452").prop("disabled", false);
			$("#COBGB431").prop("disabled", false);
			$("#COBGB451").prop("disabled", false);
			$("#COBGB432").prop("disabled", false);
			$("#COBGB461").prop("disabled", false);
			$("#COBGB433").prop("disabled", false);
			$("#COBGB462").prop("disabled", false);
			$("#COBGB434").prop("disabled", false);
			$("#COBGB471").prop("disabled", false);
			$("#COBGB441").prop("disabled", false);
			$("#COBGB472").prop("disabled", false);
			$("#COBGB473").prop("disabled", false);
			$("#COBGB481").prop("disabled", false);
			$("#COBGB482").prop("disabled", false);
			$("#COBGB483").prop("disabled", false);
			$("#COBGB484").prop("disabled", false);
			
			if(userDeptId == "GUN5010"){  //기계//구매외주팀
				$("#COBGBP6").prop("disabled", false); 
				$("#COBGBP6").prop("checked", true);
				$("#deptCd2").val("COBGBP41");
			}else if(userDeptId == "GUN5020"){  //전기/구매외주팀
				$("#COBGBP8").prop("disabled", false); 
				$("#COBGBP8").prop("checked", true); 
				$("#deptCd2").val("COBGBP43");
				
			}else if(userDeptId == "GUN5030"){  //가공//구매외주팀
				$("#COBGBP7").prop("disabled", false); 
				$("#COBGBP7").prop("checked", true);
				$("#deptCd2").val("COBGBP42");
			} else {
				$("#COBGBP6").prop("disabled", false);
				$("#COBGBP8").prop("disabled", false);
				$("#COBGBP7").prop("disabled", false);
			}			
		}else{ //기타 부서
			
			   $("#COBGBP9").prop("disabled", false); 
			   $("#COBGBP9").prop("checked", true);  
			   $("#deptCd").val("COBGB9");
			   $("#deptCd2").val("COBGBP91");
			   $("#subCd").val("reqRmk");
		}
	}

</script>