<!DOCTYPE html>
<html lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<link rel="icon" href="/static/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/bootstrap/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="/static/bootstrap/css/dashboard.css">
<link rel="stylesheet" href="/static/bootstrap/css/bootstrap-datepicker.css">
<link rel="stylesheet" href="/static/fontawesome/css/all.css">
<link rel="stylesheet" href="/static/css/ax5/ax5grid.css">
<link rel="stylesheet" href="/static/css/ax5/ax5mask.css">
<link rel="stylesheet" href="/static/css/ax5/ax5modal.css">
<!-- <link rel="stylesheet" href="/static/css/ax5/ax5toast.css"> -->
<link rel="stylesheet" href="/static/css/jstree/style.min.css">
<link rel="stylesheet" href="/static/css/gnb.css">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="stylesheet" href="/static/css/sub.css">
<link rel="stylesheet" href="/static/css/common.css">
<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/ax5ui/ax5ui-calendar/master/dist/ax5calendar.css">
<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/ax5ui/ax5ui-picker/master/dist/ax5picker.css">
<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/ax5ui/ax5ui-select/master/dist/ax5select.css">  


<link rel="stylesheet" href="platform.css" type="text/css" />
<link rel="stylesheet" href="libs/jquery/dateField/jquery.dateField.css" type="text/css"/>
<link rel="stylesheet" href="libs/jquery/valueSlider/mb.slider.css" type="text/css" media="print"/>
<link rel="stylesheet" href="gantt.css" type="text/css" />
<link rel="stylesheet" href="ganttPrint.css" type="text/css" media="print"/>

<script src="/static/js/jquery-latest.min.js"></script>
<script src="/static/js/jquery.serializeObject.js"></script>
<script src="/static/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/bootstrap/js/bootstrap-datepicker.min.js"></script>
<script src="/static/bootstrap/js/bootstrap-datepicker.ko.min.js"></script>
<script src="/static/js/moment/moment-with-locales.js"></script>
<script src="/static/js/ax5/ax5core.min.js"></script>
<script src="/static/js/ax5/ax5grid.min.js"></script>
<script src="/static/js/ax5/ax5mask.min.js"></script>
<script src="/static/js/ax5/ax5modal.min.js"></script>

<script src="/static/js/ax5/ax5formatter.min.js"></script>
<script src="/static/js/ax5/ax5calendar.min.js"></script>
<script src="/static/js/ax5/ax5picker.min.js"></script>


<!-- <script src="/static/js/ax5/ax5toast.min.js"></script> -->
<script src="/static/js/jstree/jstree.min.js"></script>
<!-- <script type="text/javascript" src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script> -->
<script src="/static/js/global.js"></script>

<!-- 간트차트 스크립트 시작 -->
<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> -->
<!--  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script> -->

<!--  <script src="libs/jquery/jquery.livequery.1.1.1.min.js"></script> -->
 <script src="libs/jquery/jquery.timers.js"></script>

 <script src="libs/utilities.js"></script>
 <script src="libs/forms.js"></script>
 <script src="libs/date.js"></script>
 <script src="libs/dialogs.js"></script>
 <script src="libs/layout.js"></script>
 <script src="libs/i18nJs.js"></script>
<!--  <script src="libs/jquery/dateField/jquery.dateField.js"></script> -->
 <script src="libs/jquery/JST/jquery.JST.js"></script>
<!--  <script src="libs/jquery/valueSlider/jquery.mb.slider.js"></script> -->

 <script type="text/javascript" src="libs/jquery/svg/jquery.svg.min.js"></script>
 <script type="text/javascript" src="libs/jquery/svg/jquery.svgdom.1.8.js"></script>

 <script src="ganttUtilities.js"></script>
 <script src="ganttTask.js"></script>
 <script src="ganttDrawerSVG.js"></script>
 <script src="ganttZoom.js"></script>
 <script src="ganttGridEditor.js"></script>
 <script src="ganttMaster.js"></script>
 
 <script src="/static/js/fileTree.js"></script>
 
<!-- 간트차트 스크립트 END -->

 <style>
    .add_btn_small {
        display: inline-block;
        padding: 0px;
    }
    
    .add_btn_small a {
        display: inline-block;
        width: 33px;
        height: 20px;  
        line-height: 20px;
        text-align: center;
        color: #444;
        background: #ffffff;
        box-shadow: 1px 1px rgba(0, 0, 0, 0.15);
    }
    
    
     div#wrapper {
        width: 950px;
        height: 700px;
        margin-left: 500px;
     }
     
     div#form {
        float: left;
        padding: 10px 0px 0px 10px;
        width: 400px;
        height: 700px;
        border: 1px solid;
     }
     
     div#tree_wrapper {
        float: left;
        padding: 10px 0px 0px 10px;
        width: 500px;
        height: 700px;
        margin-left: 2px;
        border: 1px dashed;
        display: none;
     }
     
     div#deptTree  {
        margin: 0px 2px 0px 2px;
    /*   width: 470px; */
        height: 640px;
        border: 1px solid;
        overflow: auto;
     }
     
     div#search_guide_wrapper {
        padding: 10px 0px 0px 10px;
        width: 500px;
        height: 700px;
        margin-left: 2px;
        border: 1px dashed;
        float: left;
     }

/* 간트차크 */
        .resEdit {
          padding: 15px;
        }
        
        .resLine {
          width: 95%;
          padding: 3px;
          margin: 5px;
          border: 1px solid #d0d0d0;
        }
        
        body {
          overflow: hidden;
        }
        
        .ganttButtonBar h1 {
          color: #000000;
          font-weight: bold;
          font-size: 28px;
          margin-left: 10px;
        }
        
        tr.ganttHead1 th {
            text-align: center;
        }     
        tr.ganttHead2 th {
            text-align: center;
        }     
 </style>
</head>


<body>
      <div id="head_area"></div>
      <div id="top_area"></div>

      <div id="main_area">
		      <!-- 페이지 상단 -->
		      <div class="contents no_bg">
		        <ul class="btn_ul">
					<li class="btn_r">
					  <a onclick="initSearch();"><button class="bg_gray">초기화</button></a> 
					  <a onclick="gantt();"><button class="bg_gray">검 색</button>
					  </a>
					</li>
		        </ul>
		      </div>
		      <!-- 검색 콘텐츠 -->
		      <div class="contents search">
		        <div class="">
					<!-- 테이블 인풋 3분할 -->
					<table class="table_input type03"> 
					  <!-- 검색조건 1행 -->
				                     <tr>
				                        <th style="width:80px;">회사</th>
				                        <td style="width:200px;">
				                           <select id="coCd_S" name="coCd_S" data-kind="CO" data-search="coCd" required msg="회사" onChange="gantt();" style="font-size:12px;">
				                           </select>
				                        </td>
				                        <th>고객사</th>
				                        <td style="width:200px;">
				                            <input type="hidden" id="clntCd_S" name="clntCd_S"  data-search="clntCd">
				                            <div class="search_form" style="width: 100%;">
				                                <input type="text" id="clntNm_S" name="clntNm_S"  data-search="clntNm" onkeyup="if(window.event.keyCode == 8){clntCd_S.value = ''}  else if(window.event.keyCode == 13){gantt();};" style="font-size:12px;"> 
				                                <a onclick="openClntSearch('P');"><i class="i_search_w"></i></a>
				                            </div>
				                        </td>
				                        <th class= "hit" style="width:90px;">Sales Code</th>
				                        <td style="width:200px;font-size:12px;">
				                            <div class="search_form">
				                                <input type="text" id="salesCd_S" name="salesCd_S" data-search="salesCd" onkeyup="event.keyCode == 13 ? gantt() : ''" style="font-size:12px;" >
				                                <a onclick="wbsSalesCodeSearch('S');"><i class="i_search_w"></i></a>
				                            </div>
				                            <input type="hidden" id="salesNm_S" name="salesNm_S" >
				                        </td> 
				                        
				                        <th style="width:100px;">과제 시작일</th>
				                        <td >
				                        <div style="width:400px;">
				                          <input type="text" class="input_calendar" id="beginDt_S" name="beginDt_S" data-search="beginDt_S" autocomplete="off" date data-search="beginDt" style="font-size:12px;">
				                          <span>~</span>
				                          <input type="text" class="input_calendar" id="deDt_S" name="deDt_S" data-search="deDt_S"  autocomplete="off" date data-search="deDt" style="font-size:12px;">
				                        </div>
				                        </td>                           
				                    </tr>
				                    <!-- 검색조건 END -->
					</table>
		        </div>
		      </div>
      
             <!-- 간트차트 영역 -->
             <div style="width: 100%;">                   
                   <table style="border:0px;">
                        <tr>
                             <td style="text-align: LEFT; border-right: 0px;vertical-align: top;">                             
	                            <div id="gantSpace" style="margin:0px;padding:0 5px;width:100%;">	                    
	                            <div id="workSpace" ></div>

  
<script type="text/javascript">
    var openFlag = false;
    var salesCd = null;
    var ge;
    var dataArr = [];
 //   $(function () {
    $(document.body).ready(function() {
        //순서 맨 처음
        mainDefaultLoad("WBS", "일정현황");
        setCommonSelect($("#main_area select[data-kind]"));
        
        $('#beginDt_S').datepicker({
            format : "yyyy-mm-dd",
            language : "ko",
            autoclose : true
          })
         .datepicker("setDate", moment(new Date()).startOf("month").toDate())
         .on("changeDate", function(){
             if($('#beginDt_S').val() > $('#deDt_S').val()){
                 alert("시작일과 종료일를 확인해주세요");
                 $('#beginDt_S').datepicker("setDate", new Date($('#deDt_S').val()));
             }
             gantt();
          });
         
	     $('#deDt_S').datepicker({
	        format : "yyyy-mm-dd",
	        language : "ko",
	        autoclose : true
	      })
	     .datepicker("setDate",  moment(new Date()).endOf("month").toDate())
	     .on("changeDate", function(){
	             if($('#beginDt_S').val() > $('#deDt_S').val()){
	                 alert("시작일과 종료일를 확인해주세요");
	                 $('#beginDt_S').datepicker("setDate", new Date($('#deDt_S').val()));
	             }
	             gantt();
          });
     
        // here starts gantt initialization
		ge = new GanttMaster();
		ge.set100OnClose = true;
	  
		ge.shrinkParent = true;
	  
		ge.init($("#workSpace"));
		loadI18n(); //overwrite with localized ones
	  
		//in order to force compute the best-fitting zoom level
		delete ge.gantt.zoom;
		ge.reset();
		/* var project = getDemoProject();
	  
		ge.loadProject(project);
		ge.checkpoint(); //empty the undo stack */

		gantt();
	});
	
    //Sales Code (수주마스터, 수주상세테이블 조인) 검색
    function wbsSalesCodeSearch() {
        var paramObj = {
           "coCd" : $('#coCd_S').val(),
           "salesCd": $('#salesCd_S').val()
        };
        openSecondModal("/static/html/cmn/modal/wbsSalesCodeSearch.html", 1000, 430, "SALES CODE 검색", paramObj, function (grid){
            var row = grid.target.getList("selected")[0];
            $('#salesCd_S').val(row.salesCd);
            gantt();
        });
    }
    
    // 고객사 검색
    function openClntSearch(openType) {
        var paramObj = {
                "searchValue" :  $("#clntNm_S").val()
        }       
        openSecondModal("/static/html/cmn/modal/clntSearch.html", 600, 420, "거래처 검색", paramObj, function (grid) {
            var row = grid.target.getList("selected")[0];
            if(openType == "P"){
                $('#clntCd_S').val(row.clntCd);
                $('#clntNm_S').val(row.clntNm);
                gantt();
            }
        });        
    }
    
	function getDemoProject() {
		var ret = {
            tasks:  dataArr,
            selectedRow: 0,
        };
        
        //actualize data
        var offset = new Date().getTime() - ret.tasks[0].start;
                
        for (var i = 0; i < ret.tasks.length; i++) {
            //ret.tasks[i].start = ret.tasks[i].start + offset;
        	ret.tasks[i].start = ret.tasks[i].start;            
        }  
		return ret;  
	}
		
</script>
		    <div id="tooltip" style="width:100px;height:100px;"></div>
		    <div id="gantEditorTemplates" style="display: none">
		      <div class="__template__" type="GANTBUTTONS">
		      <!-- 
		      <div class="ganttButtonBar noprint">
                    <div class="buttons"
                    <span class="ganttButtonSeparator"></span>
                      <button onclick="$('#workSpace').trigger('zoomMinus.gantt'); return false;" class="button textual icon " title="zoom out"><span class="teamworkIcon">)</span></button>
                      <button onclick="$('#workSpace').trigger('zoomPlus.gantt');return false;" class="button textual icon " title="zoom in"><span class="teamworkIcon">(</span></button>
                    <span class="ganttButtonSeparator requireCanSeeCriticalPath"></span>
                      <button onclick="ge.splitter.resize(.1);return false;" class="button textual icon" ><span class="teamworkIcon">F</span></button>
                      <button onclick="ge.splitter.resize(34);return false;" class="button textual icon" ><span class="teamworkIcon">O</span></button>                     
                    </div>
                    
                  </div>
                  
		      -->				 
		      </div>		
		      <div class="__template__" type="TASKSEDITHEAD">
		        <!--
		  <table class="gdfTable" cellspacing="0" cellpadding="0">
		    <thead>
		    <tr style="height:40px;">
              <th style="width:200px;text-align:center;font-size:11.5px;">구분명</th>   
              <th style="width:80px;text-align:center;font-size:11.5px;">담당자</th>              
              <th style="width:80px;text-align:center;font-size:11.5px;">시작일</th>
              <th style="width:80px;text-align:center;font-size:11.5px;">종료일</th>
              <th style="width:40px;text-align:center;font-size:11.5px;">일수</th>
              <th style="width:60px;text-align:center;font-size:11.5px;">진도율(%)</th>
              <th style="width:60px;text-align:center;font-size:11.5px;">계획이슈</th>
              <th style="width:60px;text-align:center;font-size:11.5px;">실적이슈</th>
            </tr>
		    </thead>
		  </table>
		  -->
		      </div>
		
		      <div class="__template__" type="TASKROW">
		        <!--
		  <tr id="tid_(#=obj.id#)" taskId="(#=obj.id#)" class="taskEditRow (#=obj.isParent()?'isParent':''#) (#=obj.collapsed?'collapsed':''#)" level="(#=level#)" >
            <td style="padding-left:(#=obj.level*10+20#)px;font-size:11.5px;"><div class="exp-controller" align="center" ></div>(#=obj.name#)</td>
            <td style="text-align:center;font-size:11.5px;">(#=obj.wbsPlanMngNm#)</td>                       
            <td style="font-size:11.5px;">(#=obj.start1#)</td>
            <td style="font-size:11.5px;">(#=obj.end1#)</td>
            <td style="text-align:right;font-size:11.5px;">(#=obj.duration#)</td>
            <td style="text-align:right;font-size:11.5px;"><a onclick="wbsRsltsView('(#=obj.rsltsFileTrgtKey#)');">(#=obj.progress#)</a></td>
            <td style="text-align:center;font-size:11.5px;"><a onclick="wbsIssuePlanView('(#=obj.issuePlanKey#)');"><img src="/static/img/(#=obj.issueYnP#)" style="width: 10px;height: 10px;"></img></a></td>
            <td style="text-align:center;font-size:11.5px;"><a onclick="wbsIssueRsltsView('(#=obj.issueRsltKey#)');"><img src="/static/img/(#=obj.issueYnR#)" style="width: 10px;height: 10px;"></img></a></td>
          </tr>
		  -->
		      </div>
		
		      <div class="__template__" type="TASKEMPTYROW" >
		        <!--
		  <tr class="taskEditRow emptyRow" >
		    <th class="gdfCell" align="right"></th>
		    <td class="gdfCell noClip" align="center"></td>
		    <td class="gdfCell"></td>		    
		    <td class="gdfCell"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell requireCanSeeDep"></td>
		    <td class="gdfCell"></td>
		  </tr>
		  -->
		      </div>
		
		      <div class="__template__" type="TASKBAR"  >
		        <!--
		  <div class="taskBox taskBoxDiv" taskId="(#=obj.id#)" >
		    <div class="layout (#=obj.hasExternalDep?'extDep':''#)">
		      <div class="taskStatus" status="(#=obj.status#)"></div>
		      <div class="taskProgress" style="width:(#=obj.progress>100?100:obj.progress#)%; background-color:(#=obj.progress>100?'red':'rgb(153,255,51);'#);"></div>
		      <div class="milestone (#=obj.startIsMilestone?'active':''#)" ></div>
		      <div class="taskLabel" ></div>
		      <div class="milestone end (#=obj.endIsMilestone?'active':''#)" ></div>
		    </div>
		  </div>
		  -->
		      </div>
		
		      <div class="__template__" type="CHANGE_STATUS">
		        <!--
		    <div class="taskStatusBox">
		    <div class="taskStatus cvcColorSquare" status="STATUS_ACTIVE" title="Active" ></div>
		    <div class="taskStatus cvcColorSquare" status="STATUS_DONE" title="Completed"></div>
		    <div class="taskStatus cvcColorSquare" status="STATUS_FAILED" title="Failed"></div>
		    <div class="taskStatus cvcColorSquare" status="STATUS_SUSPENDED" title="Suspended"></div>
		    <div class="taskStatus cvcColorSquare" status="STATUS_WAITING" title="Waiting" style="display: none;"></div>
		    <div class="taskStatus cvcColorSquare" status="STATUS_UNDEFINED" title="Undefined"></div>
		    </div>
		  -->
		      </div>
		
		      <div class="__template__" type="TASK_EDITOR" >
		        <!--
		  <div class="ganttTaskEditor">
		    <h2 class="taskData">Task editor</h2>
		    <table  cellspacing="1" cellpadding="5" width="100%" class="taskData table" border="0">
			<tr>
		        <td width="200" style="height: 80px"  valign="top">
			<label for="code">code/short name</label><br>
			<input type="text" name="code" id="code" value="" size=15 class="formElements" autocomplete='off' maxlength=255 style='width:100%' oldvalue="1">
		        </td>
		        <td colspan="3" valign="top"><label for="name" class="required">name</label><br><input type="text" name="name" id="name"class="formElements" autocomplete='off' maxlength=255 style='width:100%' value="" required="true" oldvalue="1"></td>
			</tr>
		
		
		      <tr class="dateRow">
		        <td nowrap="">
			<div style="position:relative">
			  <label for="start">start</label>&nbsp;&nbsp;&nbsp;&nbsp;
			  <input type="checkbox" id="startIsMilestone" name="startIsMilestone" value="yes"> &nbsp;<label for="startIsMilestone">is milestone</label>&nbsp;
			  <br><input type="text" name="start" id="start" size="8" class="formElements dateField validated date" autocomplete="off" maxlength="255" value="" oldvalue="1" entrytype="DATE">
			  <span title="calendar" id="starts_inputDate" class="teamworkIcon openCalendar" onclick="$(this).dateField({inputField:$(this).prevAll(':input:first'),isSearchField:false});">m</span>	</div>
		        </td>
		        <td nowrap="">
			<label for="end">End</label>&nbsp;&nbsp;&nbsp;&nbsp;
			<input type="checkbox" id="endIsMilestone" name="endIsMilestone" value="yes" > &nbsp;<label for="endIsMilestone">is milestone</label>&nbsp;
			<br><input type="text" name="end" id="end" size="8" class="formElements dateField validated date" autocomplete="off" maxlength="255" value="" oldvalue="1" entrytype="DATE">
			<span title="calendar" id="ends_inputDate" class="teamworkIcon openCalendar" onclick="$(this).dateField({inputField:$(this).prevAll(':input:first'),isSearchField:false});">m</span>
		        </td>
		        <td nowrap="" >
			<label for="duration" class=" ">Days</label><br>
			<input type="text" name="duration" id="duration" size="4" class="formElements validated durationdays" title="Duration is in working days." autocomplete="off" maxlength="255" value="" oldvalue="1" entrytype="DURATIONDAYS">&nbsp;
		        </td>
		      </tr>
		
		      <tr>
		        <td  colspan="2">
			<label for="status" class=" ">status</label><br>
			<select id="status" name="status" class="taskStatus" status="(#=obj.status#)"  onchange="$(this).attr('STATUS',$(this).val());">
			  <option value="STATUS_ACTIVE" class="taskStatus" status="STATUS_ACTIVE" >active</option>
			  <option value="STATUS_WAITING" class="taskStatus" status="STATUS_WAITING" >waiting</option>
			  <option value="STATUS_SUSPENDED" class="taskStatus" status="STATUS_SUSPENDED" >suspended</option>
			  <option value="STATUS_DONE" class="taskStatus" status="STATUS_DONE" >completed</option>
			  <option value="STATUS_FAILED" class="taskStatus" status="STATUS_FAILED" >failed</option>
			  <option value="STATUS_UNDEFINED" class="taskStatus" status="STATUS_UNDEFINED" >undefined</option>
			</select>
		        </td>
		
		        <td valign="top" nowrap>
			<label>progress</label><br>
			<input type="text" name="progress" id="progress" size="7" class="formElements validated percentile" autocomplete="off" maxlength="255" value="" oldvalue="1" entrytype="PERCENTILE">
		        </td>
		      </tr>
		
			</tr>
			<tr>
			  <td colspan="4">
			    <label for="description">Description</label><br>
			    <textarea rows="3" cols="30" id="description" name="description" class="formElements" style="width:100%"></textarea>
			  </td>
			</tr>
		        </table>
		
		    <h2>Assignments</h2>
		  <table  cellspacing="1" cellpadding="0" width="100%" id="assigsTable">
		    <tr>
		      <th style="width:100px;">name</th>
		      <th style="width:70px;">Role</th>
		      <th style="width:30px;">est.wklg.</th>
		      <th style="width:30px;" id="addAssig"><span class="teamworkIcon" style="cursor: pointer">+</span></th>
		    </tr>
		  </table>
		
		  <div style="text-align: right; padding-top: 20px">
		    <span id="saveButton" class="button first" onClick="$(this).trigger('saveFullEditor.gantt');">Save</span>
		  </div>
		
		  </div>
		  -->
		      </div>
		
		      <div class="__template__" type="ASSIGNMENT_ROW">
		        <!--
		  <tr taskId="(#=obj.task.id#)" assId="(#=obj.assig.id#)" class="assigEditRow" >
		    <td ><select name="resourceId"  class="formElements" (#=obj.assig.id.indexOf("tmp_")==0?"":"disabled"#) ></select></td>
		    <td ><select type="select" name="roleId"  class="formElements"></select></td>
		    <td ><input type="text" name="effort" value="(#=getMillisInHoursMinutes(obj.assig.effort)#)" size="5" class="formElements"></td>
		    <td align="center"><span class="teamworkIcon delAssig del" style="cursor: pointer">d</span></td>
		  </tr>
		  -->
		      </div>
		
		      <div class="__template__" type="RESOURCE_EDITOR">
		        <!--
		  <div class="resourceEditor" style="padding: 5px;">
		
		    <h2>Project team</h2>
		    <table  cellspacing="1" cellpadding="0" width="100%" id="resourcesTable">
		      <tr>
		        <th style="width:100px;">name</th>
		        <th style="width:30px;" id="addResource"><span class="teamworkIcon" style="cursor: pointer">+</span></th>
		      </tr>
		    </table>
		
		    <div style="text-align: right; padding-top: 20px"><button id="resSaveButton" class="button big">Save</button></div>
		  </div>
		  -->
		      </div>
		
		      <div class="__template__" type="RESOURCE_ROW">
		        <!--
		  <tr resId="(#=obj.id#)" class="resRow"  >
		    <td ><input type="text" name="name" value="(#=obj.name#)" style="width:100%;" class="formElements" ></td>
		    <td align="center"><span class="teamworkIcon delRes del" style="cursor: pointer">d</span></td>
		  </tr>
		  -->
		      </div>
		    </div>
<script type="text/javascript">

		$.JST.loadDecorator("RESOURCE_ROW", function (resTr, res) {
			resTr.find(".delRes").click(function () {
				$(this).closest("tr").remove();
			});
		});
		
		$.JST.loadDecorator("ASSIGNMENT_ROW", function (assigTr, taskAssig) {
	        var resEl = assigTr.find("[name=resourceId]");
	        var opt = $("<option>");
	        resEl.append(opt);
	        for (var i = 0; i < taskAssig.task.master.resources.length; i++) {
				var res = taskAssig.task.master.resources[i];
				opt = $("<option>");
				opt.val(res.id).html(res.name);
				if (taskAssig.assig.resourceId == res.id)
				opt.attr("selected", "true");
				resEl.append(opt);
	        }
	        var roleEl = assigTr.find("[name=roleId]");
	        for (var i = 0; i < taskAssig.task.master.roles.length; i++) {
				var role = taskAssig.task.master.roles[i];
				var optr = $("<option>");
				optr.val(role.id).html(role.name);
				if (taskAssig.assig.roleId == role.id) optr.attr("selected", "true");
				roleEl.append(optr);
		    }
		
			if (taskAssig.task.master.permissions.canWrite &&
				taskAssig.task.canWrite) {
				assigTr.find(".delAssig").click(function () {
			  		var tr = $(this).closest("[assId]").fadeOut(200, function () {
			      		$(this).remove();
			    	});
				});
		    }
		});
		
		function loadI18n() {
			GanttMaster.messages = {
				CANNOT_WRITE: "No permission to change the following task:",
				CHANGE_OUT_OF_SCOPE:
				  "Project update not possible as you lack rights for updating a parent project.",
				START_IS_MILESTONE: "Start date is a milestone.",
				END_IS_MILESTONE: "End date is a milestone.",
				TASK_HAS_CONSTRAINTS: "Task has constraints.",
				GANTT_ERROR_DEPENDS_ON_OPEN_TASK:
				  "Error: there is a dependency on an open task.",
				GANTT_ERROR_DESCENDANT_OF_CLOSED_TASK:
				  "Error: due to a descendant of a closed task.",
				TASK_HAS_EXTERNAL_DEPS: "This task has external dependencies.",
				GANNT_ERROR_LOADING_DATA_TASK_REMOVED:
				  "GANNT_ERROR_LOADING_DATA_TASK_REMOVED",
				CIRCULAR_REFERENCE: "Circular reference.",
				CANNOT_DEPENDS_ON_ANCESTORS: "Cannot depend on ancestors.",
				INVALID_DATE_FORMAT:
				  "The data inserted are invalid for the field format.",
				GANTT_ERROR_LOADING_DATA_TASK_REMOVED:
				  "An error has occurred while loading the data. A task has been trashed.",
				CANNOT_CLOSE_TASK_IF_OPEN_ISSUE:
				  "Cannot close a task with open issues",
				TASK_MOVE_INCONSISTENT_LEVEL:
				  "You cannot exchange tasks of different depth.",
				CANNOT_MOVE_TASK: "CANNOT_MOVE_TASK",
				PLEASE_SAVE_PROJECT: "PLEASE_SAVE_PROJECT",
				GANTT_SEMESTER: "Semester",
				GANTT_SEMESTER_SHORT: "s.",
				GANTT_QUARTER: "분기",
				GANTT_QUARTER_SHORT: "q.",
				GANTT_WEEK: "Week",
				GANTT_WEEK_SHORT: "w.",
			};
		}
		
	      
		    </script>
					  
				</div>
				</td>                
             </tr>
         </table>      
      </div>
      
      <!-- 간트차트 영역 END -->
   </div>
</body>
</html>
	
<script type="text/javascript">
function gantt() {
	ge.reset();
	var list = null; 
    dataArr = [];
    var paramObj = {
    		"coCd": $('#coCd_S').val(),
    		"clntCd": $('#clntCd_S').val(), 
    		"salesCd" : $('#salesCd_S').val(),
    		"beginDt" : $('#beginDt_S').val(),
    		"deDt" : $('#deDt_S').val()
    		};
    postAjaxSync("/user/wb/wb04/selectGanttAllList", paramObj, null, function(data){   
    	
        list = data.fileList;  
    });
    var i = 0;
    if (list.length > 1) {
         	
   
        var i = 0;
        $.each(list, function(idx, elem){                 
            var itemName = null;
            if (elem.lvl == 1) {
                itemName = elem.clntNm + ' [ ' + elem.ordrsNo + ' ] ';
            }
            else if (elem.lvl == 2) {
                itemName = elem.salesCd;
            }
            else {
                itemName = elem.wbsPlanCodeName;
            }
            
            var sDate = null;
            var eDate = null;
            
            var sDate1 = null;
            var eDate1 = null;
            
            sDate = elem.wbsPlansDt;
            eDate = elem.wbsPlaneDt; 
            
            sDate1 = elem.wbsPlansDtS;
            eDate1 = elem.wbsPlaneDtS;
            
            var dur = null;
            var status_color = null;
            dur = elem.daycnt;
            if (elem.lvl == 1) {
                //dur = elem.daycnt;
                status_color = "STATUS_ACTIVE";
            }
            else if (elem.lvl == 2){
               // dur = elem.daycnt; 
                status_color = "STATUS_DONE";
            }
            else if (elem.lvl == 3){
                //dur = elem.daycnt; 
                status_color = "STATUS_FAILED";
            }
            else if (elem.lvl == 4){
               // dur = elem.daycnt; 
                status_color = "STATUS_SUSPENDED";
            }
            var issueYnP = elem.issuePlanKey != "0" ? "color-circle_02.png" : "";
            var issueYnR = elem.issueRsltKey != "0" ? "color-circle_02.png" : "";
            
            var issueFlag= false;
            issueFlag = (parseInt(elem.issuePlanKey) + parseInt(elem.issueRsltKey)) > 0 ? true : false;         
            var dalayFlag = new Date() > new Date(eDate1) && parseInt(elem.wbsRsltsRate) < 100 ? true : false;
            var task = {
                    "id": i+1,
                    name: itemName,//String(itemName),
                    progress: parseInt(elem.wbsRsltsRate),
                    progressByWorklog: true,
                    relevance: 0,
                    type: "",
                    typeId: "",
                    description: "",
                    code: "",
                    level: elem.lvl,
                    status: status_color,
                    depends: "",
                    canWrite: true,
                    wbsPlanMngNm:elem.wbsPlanMngNm,
                    start: sDate,
                    duration: parseInt(dur),
                    end: eDate,
                    start1: sDate1,
                    end1: eDate1,                    
                    startIsMilestone: issueFlag,
                    endIsMilestone: dalayFlag,
                    collapsed: true,
                    assigs: [],
                    hasChild: true,   
                    issueYnP:issueYnP,
                    issueYnR:issueYnR,
                    issuePlanKey:elem.issuePlanKey,
                    issueRsltKey:elem.issueRsltKey,
                    rsltsFileTrgtKey:elem.rsltsFileTrgtKey,
             }
            dataArr.push(task); 
            i++;
        });
        var project = getDemoProject();
        ge.loadProject(project);
        //ge.checkpoint();
        for (var i = 0; i < 5; i++) {
        	$('#workSpace').trigger('zoomMinus.gantt');	
        }
        return false;
    }
    else {
        ge.reset();
    }
    
}

function wbsPlanList(type, id) {
	//alert(type + id);
	if (type != undefined && id != undefined ) {
		var paramObj = {
	            "coCd" : $('#coCd_S').val(),
	            "salesCd": type,
	            "codeId" : id
	         };
	         openSecondModal("/static/html/user/wb/wb04/WB0401P01.html", 1600, 850, "", paramObj, function(data) {
	             //gridView1.setData(0);
	         });
	    }
}

function strSplit(args, len) {
    const arr = args.split("/", 8);
    return arr[len];
}

function wbsRsltsView(fileTrgtKey) {
    if (fileTrgtKey != "") {
        var paramObj = {"fileTrgtKey": fileTrgtKey};         
        openSecondModal("/static/html/user/wb/wb22/WB2201P03.html", 1200,700, "WBS 실적보기", paramObj, function (){                    
        }); 
    }   
}

function wbsIssuePlanView(fileTrgtKey) {
    if (fileTrgtKey != "") {
        var paramObj = {"fileTrgtKey": fileTrgtKey};         
        openSecondModal("/static/html/user/wb/wb24/WB2401P02.html", 700, 700, "WBS 계획이슈보기", paramObj, function (){                    
        }); 
    }   
}

function wbsIssueRsltsView(fileTrgtKey) {
	if (fileTrgtKey != "") {
		var paramObj = {"fileTrgtKey": fileTrgtKey};         
	    openSecondModal("/static/html/user/wb/wb24/WB2401P22.html", 700, 700, "WBS 실적이슈보기", paramObj, function (){                    
	    });	
	}	
}




</script>