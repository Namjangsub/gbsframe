<div id="wbsPopup" class="popup_area of_a" style="width: 100%; height: 100%;">
    <div class="tit_contents">
        <h4 class="tit">WBS 실적 보기</h4>
    </div>
    
    <div class="popup_table">
        <div class="form-group">
            <form id="popFormRslts">
            <input type="hidden" id="userId"        name="userId">
            <input type="hidden" id="pgmId"         name="pgmId"    value="WB02201P02">
            <input type="hidden" id="rsltsFileTrgtKey"         name="rsltsFileTrgtKey" >
                <table class="popup_table">
                    <colgroup>
                          <col width="20%">
                          <col width="20%">
                          <col width="20%">
                          <col width="18%">
                          <col width="17%">
                          <col width="18%">
                          <col width="20%">
                          <col width="18%">
                    </colgroup>                  
                   <thead>
                         <tr>
                            <td colspan="8" style="height:30px;text-align: left;">▣ 1레벨 정보</td>                                                
                         </tr>
                     </thead>
                     <tr  style="text-align: left;">  
                      <th>계획명</th>
                      <td> 
                      <input type="text" class="form-control" id="wbsPlanCodeNm1" name="wbsPlanCodeNm1" readonly>       
                      </td>                       
                      <th>시작일자</th>
                      <td>
                      <input type="text" class="form-control" id="wbsPlansDt1" name="wbsPlansDt1" readonly>          
                      </td>
                      <th>종료일자</th>
                      <td>    
                      <input type="text" class="form-control" id="wbsPlaneDt1" name="wbsPlaneDt1" readonly>                 
                      </td>
                      <th>소요일수</th>
                      <td>  
                      <input type="text" class="form-control" id="daycnt1" name="daycnt1" readonly>                     
                      </td>
                      
                    </tr> 
                   
                  <thead>
                         <tr>
                            <td colspan="8" style="height:30px;text-align: left;">▣ 2레벨 정보</td>                                                
                         </tr>
                     </thead>
                    <tr  style="text-align: left;">                           
                      <th>계획명</th>
                      <td> 
                      <input type="text" class="form-control" id="wbsPlanCodeNm2" name="wbsPlanCodeNm2" readonly>
                      </td>
                      <th>시작일자</th>
                      <td>
                      <input type="text" class="form-control" id="wbsPlansDt2" name="wbsPlansDt2" readonly>          
                      </td>
                      <th>종료일자</th>
                      <td>    
                      <input type="text" class="form-control" id="wbsPlaneDt2" name="wbsPlansDt2" readonly>                 
                      </td>
                      <th>소요일수</th>
                      <td>  
                      <input type="text" class="form-control" id="daycnt2" name="daycnt2" readonly>                     
                      </td>
                  </tr> 
                   <thead>
                        <tr>
                           <td colspan="9" style="height:30px;text-align: left;">▣ 2레벨 실적정보</td>                                                
                        </tr>
                    </thead>                    
                    <tbody>
                    <tr style="text-align: left;">
					    <th>실적번호</th>
					    <td> 
					    <div class="search_form"  style="width: 100%;">
                            <input type="text"  id="wbsRsltsNo" name="wbsRsltsNo"  data-search="wbsRsltsNo" readonly>
                        </div>
                        </td>
                        
					    <th>일수</th>
					    <td>
					    <div class="search_form">
                          <input type="text" id="rsltsDaycnt" name="rsltsDaycnt" readonly>    
                        </div>
					    </td>
					    <td colspan="5" rowspan="5">
					      <div class="popup_table">               
			                <table style="border:0px;">
			                    <tr style="height:30px;">
			                      <td style="text-align: LEFT; border-right: 0px;;font-size:13px;font-weight:bold;">※ 공유 및 결재</td>
			                      <td>
			                      </td>
			                    </tr>
			                    <tr>
			                      <td colspan="2">
			                       <div>
			                         <div class="ax5_grid" data-ax5grid="first-grid-modal" data-ax5grid-config="{}" style="height: 220px; width: 100%;" ></div>
			                       </div>
			                      </td> 
			                    </tr>  
			                </table>
			            </div> 
					    </td>
					</tr> 
					<tr style="text-align: left;">
					    <th class="hit">시작일자</th>
                        <td>
                        <div class="date_input">
                            <input type="text" class="input_calendar form-control" style="width: 100% !important; display: inline-block !important;" id="wbsRsltssDt" name="wbsRsltssDt" autocomplete="off" date required msg="시작일자">
                        </div>
                        </td>
                        <th class="hit">종료일자</th>
                        <td>
                        <div class="date_input">
                            <input type="text" class="input_calendar form-control" style="width: 100% !important; display: inline-block !important;" id="wbsRsltseDt" name="wbsRsltseDt" autocomplete="off" date required msg="종료일자"> 
                        </div>
                        </td>
					</tr>
					<tr style="text-align: left;">
					    <th class="hit">진척율</th>
                            <td class="hit">
                               <div class="search_form"  style="width: 100%;">
                                   <input type="text"  id="wbsRsltsRate" name="wbsRsltsRate" onkeyup="onlyNumber(this)" required msg="진척율"  comma>
                                </div>
                            </td>
                            <th class="hit">투입공수</th>
                            <td>
                              <div class="search_form"  style="width: 100%;">
                                   <input type="text"  id="wbsRsltsMh" name="wbsRsltsMh"  onkeyup="onlyNumber(this)" required msg="실투입공수"  comma>
                                </div>
                            </td>
					</tr>
					<tr style="text-align: left;">
					    <th>주요내용</th>
                        <td colspan=3>
                                <textarea id="wbsRsltsCnts" name="wbsRsltsCnts" cols="65" rows="10" style="border:none;outline: none;"></textarea> 
                        </td>
					</tr> 
                    </tbody>                    
                </table>    
            </form>
        </div>
    </div>    
    
    <div class="contents"> 
    <!-- 공통 파일 영역 -->
         <div id="fileList_area"></div>       
    </div>
    <br>
    <div class="col-xs-2" style="height: 70px;">
    </div>

    <!-- 하단 버튼 -->
    <div class ="popup_bottom_btn">
        <button type="button" class="close_btn"
            onclick="modalStack.close();">닫기</button>
    </div>
 </div>   
<script type="text/javascript">
setCommonSelect($(".popup_area select[data-kind]"));

var gridViewPop = {
        initView : function() {
            this.target = new ax5.ui.grid();
            this.target.setConfig({
                showRowSelector: true,
                multipleSelect: false,
                sortable: false,
                target: $('[data-ax5grid="first-grid-modal"]'),
                header: {
                    align: "center",
                    selector: true
                },
                body: {
                     onClick: function () {
                        this.self.select(this.dindex);
                    },
                    onDBLClick: function () {
                    },
                    mergeCells : ["gb"],
                },
                page : {
                    navigationItemCount : 10,
                    height : 30,
                    display : true,
                    firstIcon : '<i class="fa fa-step-backward" aria-hidden="true"></i>',
                    prevIcon : '<i class="fa fa-caret-left" aria-hidden="true"></i>',
                    nextIcon : '<i class="fa fa-caret-right" aria-hidden="true"></i>',
                    lastIcon : '<i class="fa fa-step-forward" aria-hidden="true"></i>',
                    onChange : function() {
                        gridView.setData(this.page.selectPage);
                    }
                },
                columns : [
                        {key: "gb",                 label: "구분",        align: "center",   width: 40},
                        {key: "wbsPlancoCdNm",      label: "회사명",      align: "center",   width: 130, hidden: true},
                        //{key: "wbsSharngUserId",  label: "ID",        align: "center",   width: 130, hidden: false},
                        {key: "usrNm",              label: "ID",        align: "center",   width: 130, hidden: true},
                        {key: "empNo",              label: "사원번호",  align: "center",   width: 130, hidden: true},
                        {key: "name",               label: "성명",        align: "center",   width: 80},
                        {key: "jik",                label: "직위",        align: "center",   width: 60},
                        {key: "reqDate",            label: "요청일자",  align: "center",   width: 90},
                        {key: "todoCfDt",           label: "확인일자",      align: "center",   width: 130},
                        {key: "todoCfOpn",          label: "확인의견",  align: "left",     width: 200},
                        {key: "telNo",              label: "H.P",       align: "center",   width: 130},
                      ]
                    });
                    return this;
                },

                setData : function(_pageNo) {
                    var targetObj = this.target;
                    var formData = {
                            "fileTrgtKey" : $("#popFormRslts #rsltsFileTrgtKey").val(),
                            "reqNo" :  $("#popFormRslts #wbsRsltsNo").val(), 
                            "pageNo" : _pageNo + 1
                    }
                    postAjax("/user/qm/qm01/selectShareUserlst", formData, null, function(data){    
                    var list = data.result;
                        targetObj.setData({
                            list : list,
                            page : {
// //                                   currentPage : _pageNo,
// //                                   pageSize : data.paginationInfo.pageSize,
                                        totalElements :  data.paginationInfo.totalRecordCount,
// //                                   totalPages : data.paginationInfo.totalPageCount
                            } 
                        });
                    });
                },

                setData2 : function(_list) {
                    this.target.setData({
                            list : _list,
                            page : {
                                        totalElements :  _list.length,
                            } 
                        });
                }
    }
    
     
$(document).ready(function() {
   var paramObj = modalStack.last().paramObj;
   postAjaxSync("/user/wb/wb22/selectTodoRsltsView", paramObj, null, function(data){
       var list = data.resultList[0];
       if (list != undefined) {
           $.each(list, function (key, val) {
               $("#popFormRslts #" + key).val(val);                                
           });           
       }
   }); 
   

 gridViewPop.initView().setData(0);
 
  //---------------------------------------------------------------  
  //첨부 화일 처리 시작 
  //---------------------------------------------------------------
  fileParam = {
          fileTrgtTyp : $("#popFormRslts #pgmId").val(),
          fileTrgtKey     :$("#popFormRslts #rsltsFileTrgtKey").val()
  }
  treeModule.initAll('deptTreeOrdars', 'file-grid', 'FILETREE', fileParam); 
  //---------------------------------------------------------------  
  //첨부 화일 처리 끝
  //---------------------------------------------------------------  
    
  authChk();
});

</script>
