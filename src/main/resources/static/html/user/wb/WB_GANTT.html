<!DOCTYPE html>
<html lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<link rel="icon" href="/static/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/bootstrap/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="/static/bootstrap/css/dashboard.css">
<link rel="stylesheet" href="/static/bootstrap/css/bootstrap-datepicker.css">
<link rel="stylesheet" href="/static/fontawesome/css/all.css">
<link rel="stylesheet" href="/static/css/ax5/ax5grid.css">
<link rel="stylesheet" href="/static/css/ax5/ax5mask.css">
<link rel="stylesheet" href="/static/css/ax5/ax5modal.css">
<!-- <link rel="stylesheet" href="/static/css/ax5/ax5toast.css"> -->
<link rel="stylesheet" href="/static/css/jstree/style.min.css">
<link rel="stylesheet" href="/static/css/gnb.css">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="stylesheet" href="/static/css/sub.css">
<link rel="stylesheet" href="/static/css/common.css">

<link rel="stylesheet" href="platform.css" type="text/css" />
<link rel="stylesheet" href="libs/jquery/dateField/jquery.dateField.css" type="text/css"/>
<link rel="stylesheet" href="libs/jquery/valueSlider/mb.slider.css" type="text/css" media="print"/>
<link rel="stylesheet" href="gantt.css" type="text/css" />
<link rel="stylesheet" href="ganttPrint.css" type="text/css" media="print"/>

<script src="/static/js/jquery-latest.min.js"></script>
<script src="/static/js/jquery.serializeObject.js"></script>
<script src="/static/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/bootstrap/js/bootstrap-datepicker.min.js"></script>
<script src="/static/bootstrap/js/bootstrap-datepicker.ko.min.js"></script>
<script src="/static/js/moment/moment-with-locales.js"></script>
<script src="/static/js/ax5/ax5core.min.js"></script>
<script src="/static/js/ax5/ax5grid.min.js"></script>
<script src="/static/js/ax5/ax5mask.min.js"></script>
<script src="/static/js/ax5/ax5modal.min.js"></script>
<!-- <script src="/static/js/ax5/ax5toast.min.js"></script> -->
<script src="/static/js/jstree/jstree.min.js"></script>
<!-- <script type="text/javascript" src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script> -->
<script src="/static/js/global.js"></script>

<!-- 간트차트 스크립트 시작 -->
<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> -->
<!--  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script> -->

<!--  <script src="libs/jquery/jquery.livequery.1.1.1.min.js"></script> -->
 <script src="libs/jquery/jquery.timers.js"></script>

 <script src="libs/utilities.js"></script>
 <script src="libs/forms.js"></script>
 <script src="libs/date.js"></script>
 <script src="libs/dialogs.js"></script>
 <script src="libs/layout.js"></script>
 <script src="libs/i18nJs.js"></script>
<!--  <script src="libs/jquery/dateField/jquery.dateField.js"></script> -->
 <script src="libs/jquery/JST/jquery.JST.js"></script>
<!--  <script src="libs/jquery/valueSlider/jquery.mb.slider.js"></script> -->

 <script type="text/javascript" src="libs/jquery/svg/jquery.svg.min.js"></script>
 <script type="text/javascript" src="libs/jquery/svg/jquery.svgdom.1.8.js"></script>

 <script src="ganttUtilities.js"></script>
 <script src="ganttTask.js"></script>
 <script src="ganttDrawerSVG.js"></script>
 <script src="ganttZoom.js"></script>
 <script src="ganttGridEditor.js"></script>
 <script src="ganttMaster.js"></script>
<!-- 간트차트 스크립트 END -->

 <style>
	.add_btn_small {
		display: inline-block;
		padding: 0px;
	}
	
	.add_btn_small a {
		display: inline-block;
		width: 33px;
		height: 20px;  
		line-height: 20px;
		text-align: center;
		color: #444;
		background: #ffffff;
		box-shadow: 1px 1px rgba(0, 0, 0, 0.15);
	}
	
	
	 div#wrapper {
		width: 950px;
		height: 700px;
		margin-left: 500px;
	 }
	 
	 div#form {
		float: left;
		padding: 10px 0px 0px 10px;
		width: 400px;
		height: 700px;
		border: 1px solid;
	 }
	 
	 div#tree_wrapper {
		float: left;
		padding: 10px 0px 0px 10px;
		width: 500px;
		height: 700px;
		margin-left: 2px;
		border: 1px dashed;
		display: none;
	 }
	 
	 div#deptTree  {
		margin: 0px 2px 0px 2px;
	/*   width: 470px; */
		height: 640px;
		border: 1px solid;
		overflow: auto;
	 }
	 
	 div#search_guide_wrapper {
		padding: 10px 0px 0px 10px;
		width: 500px;
		height: 700px;
		margin-left: 2px;
		border: 1px dashed;
		float: left;
	 }

/* 간트차크 */
	    .resEdit {
	      padding: 15px;
	    }
        
	    .resLine {
	      width: 95%;
	      padding: 3px;
	      margin: 5px;
	      border: 1px solid #d0d0d0;
	    }
        
	    body {
	      overflow: hidden;
	    }
        
	    .ganttButtonBar h1 {
	      color: #000000;
	      font-weight: bold;
	      font-size: 28px;
	      margin-left: 10px;
	    }
		
		tr.ganttHead1 th {
  			text-align: center;
		}     
		tr.ganttHead2 th {
  			text-align: center;
		}     
 </style>
</head>

<body>
      <div id="head_area"></div>
      <div id="top_area"></div>

      <div id="main_area">
      <!-- 페이지 상단 -->
      <div class="contents no_bg">
        <ul class="btn_ul">
	<li class="btn_r">
	  <a onclick="initSearch();"><button class="bg_gray">초기화</button></a> 
	  <a onclick="initDeptTree();"><button class="bg_gray">검 색</button>
	  </a>
	</li>
        </ul>
      </div>
      <!-- 검색 콘텐츠 -->
      <div class="contents search">
        <div class="">
	<!-- 테이블 인풋 3분할 -->
	<table class="table_input type03"> 
	  <tr>
				<th class="hit">회사</th>
				<td><select id="coCd_S" name="coCd_S" data-kind="CO" required="required" data-search="coCd" onchange="initDeptTree();">
				</select></td>
				<th class="hit">Sales Code</th>
				<td>
				    <div class="search_form">
				    	<input type="text" id="salesCd_S" name="salesCd_S" value="" data-search="salesCd" onkeyup="event.keyCode == 13 ? initDeptTree() : ''">
				    	<a onclick="wbsSalesCodeSearch();"><i class="i_search_w"></i></a>
				    </div>
				</td>
				<th></th>
				<td>
				</td>
			</tr>
	        <tr>
				<th></th>
				<td>
					<input type="hidden" id="prdtCd" name="prdtCd">
					<input type="text" id="prdtCdNm" name="prdtCdNm">
					<input type="hidden" id="itemDiv" name="itemDiv">
					<input type="text" id="itemDivNm" name="itemDivNm">
	
				</td>
				<th>프로젝트</th>
				<td>
					<input type="text" id="clntPjt" name="clntPjt">
				</td>
				<th>설비명</th>
				<td>
					<input type="text" id="eqpNm" name="eqpNm">
				</td>
				<th></th>
	        </tr>
	</table>
        </div>
      </div>
      
	      
		<!-- 콘텐츠 -->
		<div class="row" style="margin-top: 15px;">
			<div class="col-xs-3" style="padding-right: 1px;">
				<div class="contents" style="margin: 0px; padding: 0px; height: 94%; width: 100%; min-width: 400px">
		       		<h3 class="location">
			 	<span class="page_tit" style="text-align: center; padding-left:10px">Sales Code 현황 </span>
		        	</h3>
		       		<div class="contents" style="margin:0px;padding:0 5px;height:93%; width:100%; min-width:300px;  overflow: auto">
		       		<div class="ax5_grid" data-ax5grid="salesCode-grid" data-ax5grid-config="{}" style="height: 730px; width: 100%"></div>
	        	</div>
			</div>
		</div>
		<div class="col-xs-9" style="padding-left: 1px;">
		     <div class="contents" style="margin:0px; padding: 0px; height: 750px; width: 100%">
		         <h3 class="location">
		         <span class="page_tit" style="text-align: center; padding-left:10px"> 간트 차트</span>
		         </h3>
		         <div id="gantSpace" class="contents" style="margin:0px;padding:0 5px;width:100%; height:730px">
		
				    <!-- 간트차트 영역 -->
<!-- 				    <body style="background-color: #fff"> -->
				    <div id="workSpace"  style="padding: 0px;overflow-y: auto;overflow-x: hidden;border: 1px solid #e5e5e5;position: relative; margin: 0 1px;"></div>
		
   
<script type="text/javascript">
     // debugger;
    var ge;
    
	var salesCodeGridView = {
			initView : function() {
				this.target = new ax5.ui.grid();
				this.target.setConfig({
					showLineNumber  : false,
	  		    	showRowSelector: true,
	  		    	multipleSelect: true,
					target : $('[data-ax5grid="salesCode-grid"]'),
					header : {
						align : "center",
						selector : false
					},
					body : {
						mergeCells : ["coCdNm","ordrsNo","salesCd"],
						onClick : function() {
							if (this.item.dataGbn =='D') {
					      	 	var list = salesCodeGridView.target.getList("selected");
					      	 	$.each(list, function(idx, obj){
					      		 	salesCodeGridView.target.select(obj.__origin_index__, {__selected__: false});
					    		}); 	
								this.self.select(this.dindex);
							}
						},
						onDBLClick: function () {
							if (this.item.dataGbn =='D') {
				      	 	var list = salesCodeGridView.target.getList("selected");
				      	 	$.each(list, function(idx, obj){
				      			salesCodeGridView.target.select(obj.__origin_index__, {__selected__: false});
				    		}); 						
							this.self.select(this.dindex);
							}
						}
					},
					page : {
						navigationItemCount : 10,
						height    : 30,
						display   : true,
						firstIcon : '<i class="fa fa-step-backward" aria-hidden="true"></i>',
						prevIcon  : '<i class="fa fa-caret-left" aria-hidden="true"></i>',
						nextIcon  : '<i class="fa fa-caret-right" aria-hidden="true"></i>',
						lastIcon  : '<i class="fa fa-step-forward" aria-hidden="true"></i>',
						onChange  : function() {
							salesCodeGridView.setData(this.page.selectPage);
						}
					},
					columns : [
						{key: "pid",  			label: "pid", 		hidden: true},
						{key: "id",  			label: "id", 		width: 160, hidden: true},
						
						{key : "coCd", 			  label : "회사",	hidden : true},
						{key : "coCdNm", 		  label : "회사명",	hidden : true,        align : "center", width : 70},
						{key : "ordrsNo", 		  label : "수주번호",      align : "left", width : 90},
						{key : "salesCd", 		  label : "Sales Code",   align : "left", width : 190,  treeControl: true},
						{key : "ordrsClntCd", 	  label : "고객사",        hidden : true},
						{key : "ordrsClntNm", 	  label : "고객사명",      align : "left", width : 120,hidden : true},
						{key : "clntPjt", 		  label : "고객사 PJT",    align : "left", width : 80},
						{key : "clntPjtNm", 	  label : "고객사 PJT",    align : "left", width : 90, hidden : true},
						{key : "ordrsDtlDiv20",   label : "신작구분",      hidden : true},
						{key : "ordrsDtlDiv20Nm", label : "신작",      align : "center", width : 40},
						{key : "eqpNm", 		  label : "설비명",        align : "left", width : 170},
						{key : "prdtCd", 		  label : "제품구분",      hidden : true},
						{key : "prdtCdNm", 		  label : "제품명",        align : "left", width : 100},
						{key : "itemDiv", 		  label : "아이템구분",    align : "left", width: 100, hidden : true},
						{key : "itemDivNm", 	  label : "아이템구분",    align : "left", width: 100},
						{key : "orgnSalesCd", 	  label : "원 Sales Code", align : "left", width : 107},
					],
					tree: {
						use: true,
						indentWidth: 15,
						arrowWidth: 15,
						iconWidth: 18,
						icons: {
						    openedArrow: '<i class="fa fa-caret-down" aria-hidden="true"></i>',
						    collapsedArrow: '<i class="fa fa-caret-right" aria-hidden="true"></i>',
						    groupIcon: '<i class="fa fa-folder-open" aria-hidden="true"></i>',
						    collapsedGroupIcon: '<i class="fa fa-folder" aria-hidden="true"></i>',
						    itemIcon: '<i class="fa fa-file" aria-hidden="true"></i>'
						},
						columnKeys: {
							parentKey: "pid",
							selfKey: "id",
						}
					 }				
				});
				return this;
			},
			setData : function(_pageNo) {
				var targetObj = this.target;
				var paramObj = {
						"coCd": $("#coCd_S").val(),
						"salesCd": $("#salesCd_S").val()
				};
				paramObj.pageNo = _pageNo + 1;
				paramObj.recordCnt = 99999;
				
				postAjax("/user/cr/cr02/selectWbsLeftSalesCodeTreeList", paramObj, null, function(data) {
					var list = data.fileList;
					targetObj.setData({
						list : list,
						page : {
							totalElements : list.length
						}
					});
				});
			}
		}
 //   $(function () {
    $(document.body).ready(function() {
        //순서 맨 처음
        mainDefaultLoad("WBS", "WBS일정관리");
        setCommonSelect($("#main_area select[data-kind]"));
        
        salesCodeGridView.initView().setData(0);

        // here starts gantt initialization
		ge = new GanttMaster();
		ge.set100OnClose = true;
	  
		ge.shrinkParent = true;
	  
		ge.init($("#workSpace"));
		loadI18n(); //overwrite with localized ones
	  
		//in order to force compute the best-fitting zoom level
		delete ge.gantt.zoom;
	  
		var project = getDemoProject();
	  
		ge.loadProject(project);
		ge.checkpoint(); //empty the undo stack
	  
	});
		
	function getDemoProject() {
		//console.debug("getDemoProject")
		ret = {
			tasks:  dataArr,
			selectedRow: 2,
		};
		
		//actualize data
		var offset = new Date().getTime() - ret.tasks[0].start;
		        
		for (var i = 0; i < ret.tasks.length; i++) {
			ret.tasks[i].start = ret.tasks[i].start + offset;
			
		}
		return ret;  
	}
		
</script>
		
		    <div id="gantEditorTemplates" style="display: none">
		      <div class="__template__" type="GANTBUTTONS">
		        
		      </div>
		
		      <div class="__template__" type="TASKSEDITHEAD">
		        <!--
		  <table class="gdfTable" cellspacing="0" cellpadding="0">
		    <thead>
		    <tr style="height:40px">
		      <th class="gdfColHeader" style="width:35px; border-right: none"></th>
		      <th class="gdfColHeader" style="width:25px;"></th>
		      <th class="gdfColHeader gdfResizable" style="width:100px;">code/short name</th>
		      <th class="gdfColHeader gdfResizable" style="width:300px;">name</th>
		      <th class="gdfColHeader"  align="center" style="width:17px;" title="Start date is a milestone."><span class="teamworkIcon" style="font-size: 8px;">^</span></th>
		      <th class="gdfColHeader gdfResizable" style="width:80px;">start</th>
		      <th class="gdfColHeader"  align="center" style="width:17px;" title="End date is a milestone."><span class="teamworkIcon" style="font-size: 8px;">^</span></th>
		      <th class="gdfColHeader gdfResizable" style="width:80px;">End</th>
		      <th class="gdfColHeader gdfResizable" style="width:50px;">dur.</th>
		      <th class="gdfColHeader gdfResizable" style="width:20px;">%</th>
		      <th class="gdfColHeader gdfResizable requireCanSeeDep" style="width:50px;">depe.</th>
		      <th class="gdfColHeader gdfResizable" style="width:1000px; text-align: left; padding-left: 10px;">assignees</th>
		    </tr>
		    </thead>
		  </table>
		  -->
		      </div>
		
		      <div class="__template__" type="TASKROW">
		        <!--
		  <tr id="tid_(#=obj.id#)" taskId="(#=obj.id#)" class="taskEditRow (#=obj.isParent()?'isParent':''#) (#=obj.collapsed?'collapsed':''#)" level="(#=level#)">
		    <th class="gdfCell edit" align="right" style="cursor:pointer;"><span class="taskRowIndex">(#=obj.getRow()+1#)</span> <span class="teamworkIcon" style="font-size:12px;" >e</span></th>
		    <td class="gdfCell noClip" align="center"><div class="taskStatus cvcColorSquare" status="(#=obj.status#)"></div></td>
		    <td class="gdfCell"><input type="text" name="code" value="(#=obj.code?obj.code:''#)" placeholder="code/short name"></td>
		    <td class="gdfCell indentCell" style="padding-left:(#=obj.level*10+18#)px;">
		      <div class="exp-controller" align="center"></div>
		      <input type="text" name="name" value="(#=obj.name#)" placeholder="name">
		    </td>
		    <td class="gdfCell" align="center"><input type="checkbox" name="startIsMilestone"></td>
		    <td class="gdfCell"><input type="text" name="start"  value="" class="date"></td>
		    <td class="gdfCell" align="center"><input type="checkbox" name="endIsMilestone"></td>
		    <td class="gdfCell"><input type="text" name="end" value="" class="date"></td>
		    <td class="gdfCell"><input type="text" name="duration" autocomplete="off" value="(#=obj.duration#)"></td>
		    <td class="gdfCell"><input type="text" name="progress" class="validated" entrytype="PERCENTILE" autocomplete="off" value="(#=obj.progress?obj.progress:''#)" (#=obj.progressByWorklog?"readOnly":""#)></td>
		    <td class="gdfCell requireCanSeeDep"><input type="text" name="depends" autocomplete="off" value="(#=obj.depends#)" (#=obj.hasExternalDep?"readonly":""#)></td>
		    <td class="gdfCell taskAssigs">(#=obj.getAssigsString()#)</td>
		  </tr>
		  -->
		      </div>
		
		      <div class="__template__" type="TASKEMPTYROW">
		        <!--
		  <tr class="taskEditRow emptyRow" >
		    <th class="gdfCell" align="right"></th>
		    <td class="gdfCell noClip" align="center"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell"></td>
		    <td class="gdfCell requireCanSeeDep"></td>
		    <td class="gdfCell"></td>
		  </tr>
		  -->
		      </div>
		
		      <div class="__template__" type="TASKBAR">
		        <!--
		  <div class="taskBox taskBoxDiv" taskId="(#=obj.id#)" >
		    <div class="layout (#=obj.hasExternalDep?'extDep':''#)">
		      <div class="taskStatus" status="(#=obj.status#)"></div>
		      <div class="taskProgress" style="width:(#=obj.progress>100?100:obj.progress#)%; background-color:(#=obj.progress>100?'red':'rgb(153,255,51);'#);"></div>
		      <div class="milestone (#=obj.startIsMilestone?'active':''#)" ></div>
		
		      <div class="taskLabel"></div>
		      <div class="milestone end (#=obj.endIsMilestone?'active':''#)" ></div>
		    </div>
		  </div>
		  -->
		      </div>
		
		      <div class="__template__" type="CHANGE_STATUS">
		        <!--
		    <div class="taskStatusBox">
		    <div class="taskStatus cvcColorSquare" status="STATUS_ACTIVE" title="Active"></div>
		    <div class="taskStatus cvcColorSquare" status="STATUS_DONE" title="Completed"></div>
		    <div class="taskStatus cvcColorSquare" status="STATUS_FAILED" title="Failed"></div>
		    <div class="taskStatus cvcColorSquare" status="STATUS_SUSPENDED" title="Suspended"></div>
		    <div class="taskStatus cvcColorSquare" status="STATUS_WAITING" title="Waiting" style="display: none;"></div>
		    <div class="taskStatus cvcColorSquare" status="STATUS_UNDEFINED" title="Undefined"></div>
		    </div>
		  -->
		      </div>
		
		      <div class="__template__" type="TASK_EDITOR">
		        <!--
		  <div class="ganttTaskEditor">
		    <h2 class="taskData">Task editor</h2>
		    <table  cellspacing="1" cellpadding="5" width="100%" class="taskData table" border="0">
			<tr>
		        <td width="200" style="height: 80px"  valign="top">
			<label for="code">code/short name</label><br>
			<input type="text" name="code" id="code" value="" size=15 class="formElements" autocomplete='off' maxlength=255 style='width:100%' oldvalue="1">
		        </td>
		        <td colspan="3" valign="top"><label for="name" class="required">name</label><br><input type="text" name="name" id="name"class="formElements" autocomplete='off' maxlength=255 style='width:100%' value="" required="true" oldvalue="1"></td>
			</tr>
		
		
		      <tr class="dateRow">
		        <td nowrap="">
			<div style="position:relative">
			  <label for="start">start</label>&nbsp;&nbsp;&nbsp;&nbsp;
			  <input type="checkbox" id="startIsMilestone" name="startIsMilestone" value="yes"> &nbsp;<label for="startIsMilestone">is milestone</label>&nbsp;
			  <br><input type="text" name="start" id="start" size="8" class="formElements dateField validated date" autocomplete="off" maxlength="255" value="" oldvalue="1" entrytype="DATE">
			  <span title="calendar" id="starts_inputDate" class="teamworkIcon openCalendar" onclick="$(this).dateField({inputField:$(this).prevAll(':input:first'),isSearchField:false});">m</span>	</div>
		        </td>
		        <td nowrap="">
			<label for="end">End</label>&nbsp;&nbsp;&nbsp;&nbsp;
			<input type="checkbox" id="endIsMilestone" name="endIsMilestone" value="yes"> &nbsp;<label for="endIsMilestone">is milestone</label>&nbsp;
			<br><input type="text" name="end" id="end" size="8" class="formElements dateField validated date" autocomplete="off" maxlength="255" value="" oldvalue="1" entrytype="DATE">
			<span title="calendar" id="ends_inputDate" class="teamworkIcon openCalendar" onclick="$(this).dateField({inputField:$(this).prevAll(':input:first'),isSearchField:false});">m</span>
		        </td>
		        <td nowrap="" >
			<label for="duration" class=" ">Days</label><br>
			<input type="text" name="duration" id="duration" size="4" class="formElements validated durationdays" title="Duration is in working days." autocomplete="off" maxlength="255" value="" oldvalue="1" entrytype="DURATIONDAYS">&nbsp;
		        </td>
		      </tr>
		
		      <tr>
		        <td  colspan="2">
			<label for="status" class=" ">status</label><br>
			<select id="status" name="status" class="taskStatus" status="(#=obj.status#)"  onchange="$(this).attr('STATUS',$(this).val());">
			  <option value="STATUS_ACTIVE" class="taskStatus" status="STATUS_ACTIVE" >active</option>
			  <option value="STATUS_WAITING" class="taskStatus" status="STATUS_WAITING" >suspended</option>
			  <option value="STATUS_SUSPENDED" class="taskStatus" status="STATUS_SUSPENDED" >suspended</option>
			  <option value="STATUS_DONE" class="taskStatus" status="STATUS_DONE" >completed</option>
			  <option value="STATUS_FAILED" class="taskStatus" status="STATUS_FAILED" >failed</option>
			  <option value="STATUS_UNDEFINED" class="taskStatus" status="STATUS_UNDEFINED" >undefined</option>
			</select>
		        </td>
		
		        <td valign="top" nowrap>
			<label>progress</label><br>
			<input type="text" name="progress" id="progress" size="7" class="formElements validated percentile" autocomplete="off" maxlength="255" value="" oldvalue="1" entrytype="PERCENTILE">
		        </td>
		      </tr>
		
			</tr>
			<tr>
			  <td colspan="4">
			    <label for="description">Description</label><br>
			    <textarea rows="3" cols="30" id="description" name="description" class="formElements" style="width:100%"></textarea>
			  </td>
			</tr>
		        </table>
		
		    <h2>Assignments</h2>
		  <table  cellspacing="1" cellpadding="0" width="100%" id="assigsTable">
		    <tr>
		      <th style="width:100px;">name</th>
		      <th style="width:70px;">Role</th>
		      <th style="width:30px;">est.wklg.</th>
		      <th style="width:30px;" id="addAssig"><span class="teamworkIcon" style="cursor: pointer">+</span></th>
		    </tr>
		  </table>
		
		  <div style="text-align: right; padding-top: 20px">
		    <span id="saveButton" class="button first" onClick="$(this).trigger('saveFullEditor.gantt');">Save</span>
		  </div>
		
		  </div>
		  -->
		      </div>
		
		      <div class="__template__" type="ASSIGNMENT_ROW">
		        <!--
		  <tr taskId="(#=obj.task.id#)" assId="(#=obj.assig.id#)" class="assigEditRow" >
		    <td ><select name="resourceId"  class="formElements" (#=obj.assig.id.indexOf("tmp_")==0?"":"disabled"#) ></select></td>
		    <td ><select type="select" name="roleId"  class="formElements"></select></td>
		    <td ><input type="text" name="effort" value="(#=getMillisInHoursMinutes(obj.assig.effort)#)" size="5" class="formElements"></td>
		    <td align="center"><span class="teamworkIcon delAssig del" style="cursor: pointer">d</span></td>
		  </tr>
		  -->
		      </div>
		
		      <div class="__template__" type="RESOURCE_EDITOR">
		        <!--
		  <div class="resourceEditor" style="padding: 5px;">
		
		    <h2>Project team</h2>
		    <table  cellspacing="1" cellpadding="0" width="100%" id="resourcesTable">
		      <tr>
		        <th style="width:100px;">name</th>
		        <th style="width:30px;" id="addResource"><span class="teamworkIcon" style="cursor: pointer">+</span></th>
		      </tr>
		    </table>
		
		    <div style="text-align: right; padding-top: 20px"><button id="resSaveButton" class="button big">Save</button></div>
		  </div>
		  -->
		      </div>
		
		      <div class="__template__" type="RESOURCE_ROW">
		        <!--
		  <tr resId="(#=obj.id#)" class="resRow" >
		    <td ><input type="text" name="name" value="(#=obj.name#)" style="width:100%;" class="formElements"></td>
		    <td align="center"><span class="teamworkIcon delRes del" style="cursor: pointer">d</span></td>
		  </tr>
		  -->
		      </div>
		    </div>
<script type="text/javascript">
		$.JST.loadDecorator("RESOURCE_ROW", function (resTr, res) {
			resTr.find(".delRes").click(function () {
				$(this).closest("tr").remove();
			});
		});
		
		$.JST.loadDecorator("ASSIGNMENT_ROW", function (assigTr, taskAssig) {
	        var resEl = assigTr.find("[name=resourceId]");
	        var opt = $("<option>");
	        resEl.append(opt);
	        for (var i = 0; i < taskAssig.task.master.resources.length; i++) {
				var res = taskAssig.task.master.resources[i];
				opt = $("<option>");
				opt.val(res.id).html(res.name);
				if (taskAssig.assig.resourceId == res.id)
				opt.attr("selected", "true");
				resEl.append(opt);
	        }
	        var roleEl = assigTr.find("[name=roleId]");
	        for (var i = 0; i < taskAssig.task.master.roles.length; i++) {
				var role = taskAssig.task.master.roles[i];
				var optr = $("<option>");
				optr.val(role.id).html(role.name);
				if (taskAssig.assig.roleId == role.id) optr.attr("selected", "true");
				roleEl.append(optr);
		    }
		
			if (taskAssig.task.master.permissions.canWrite &&
				taskAssig.task.canWrite) {
				assigTr.find(".delAssig").click(function () {
			  		var tr = $(this).closest("[assId]").fadeOut(200, function () {
			      		$(this).remove();
			    	});
				});
		    }
		});
		
		function loadI18n() {
			GanttMaster.messages = {
				CANNOT_WRITE: "No permission to change the following task:",
				CHANGE_OUT_OF_SCOPE:
				  "Project update not possible as you lack rights for updating a parent project.",
				START_IS_MILESTONE: "Start date is a milestone.",
				END_IS_MILESTONE: "End date is a milestone.",
				TASK_HAS_CONSTRAINTS: "Task has constraints.",
				GANTT_ERROR_DEPENDS_ON_OPEN_TASK:
				  "Error: there is a dependency on an open task.",
				GANTT_ERROR_DESCENDANT_OF_CLOSED_TASK:
				  "Error: due to a descendant of a closed task.",
				TASK_HAS_EXTERNAL_DEPS: "This task has external dependencies.",
				GANNT_ERROR_LOADING_DATA_TASK_REMOVED:
				  "GANNT_ERROR_LOADING_DATA_TASK_REMOVED",
				CIRCULAR_REFERENCE: "Circular reference.",
				CANNOT_DEPENDS_ON_ANCESTORS: "Cannot depend on ancestors.",
				INVALID_DATE_FORMAT:
				  "The data inserted are invalid for the field format.",
				GANTT_ERROR_LOADING_DATA_TASK_REMOVED:
				  "An error has occurred while loading the data. A task has been trashed.",
				CANNOT_CLOSE_TASK_IF_OPEN_ISSUE:
				  "Cannot close a task with open issues",
				TASK_MOVE_INCONSISTENT_LEVEL:
				  "You cannot exchange tasks of different depth.",
				CANNOT_MOVE_TASK: "CANNOT_MOVE_TASK",
				PLEASE_SAVE_PROJECT: "PLEASE_SAVE_PROJECT",
				GANTT_SEMESTER: "Semester",
				GANTT_SEMESTER_SHORT: "s.",
				GANTT_QUARTER: "Quarter",
				GANTT_QUARTER_SHORT: "q.",
				GANTT_WEEK: "Week",
				GANTT_WEEK_SHORT: "w.",
			};
		}
	
		    </script>
					  <!-- 간트차트 영역 END -->
				</div>
			</div>
		</div>
	</div>
</body>
</html>
	
<script type="text/javascript">
	var dataArr = [
		 {
		   id: -1,
		   name: "Gantt editor",
		   progress: 20,
		   progressByWorklog: false,
		   relevance: 0,
		   type: "",
		   typeId: "",
		   description: "",
		   code: "",
		   level: 0,
		   status: "STATUS_ACTIVE",
		   depends: "",
		   canWrite: true,
		   start: 1396994400000,
		   duration: 20,
		   end: 1399586399999,
		   startIsMilestone: true,
		   endIsMilestone: true,
		   collapsed: false,
		   assigs: [],
		   hasChild: true,
		 },
		 {
		   id: -2,
		   name: "coding",
		   progress: 150,
		   progressByWorklog: false,
		   relevance: 0,
		   type: "",
		   typeId: "",
		   description: "",
		   code: "",
		   level: 1,
		   status: "STATUS_FAILED",
		   depends: "",
		   canWrite: true,
		   start: 1396994400000,
		   duration: 10,
		   end: 1398203999999,
		   startIsMilestone: false,
		   endIsMilestone: false,
		   collapsed: false,
		   assigs: [],
		   hasChild: true,
		 },
		 {
		   id: -3,
		   name: "gantt part",
		   progress: 100,
		   progressByWorklog: false,
		   relevance: 0,
		   type: "",
		   typeId: "",
		   description: "",
		   code: "",
		   level: 2,
		   status: "STATUS_DONE",
		   depends: "",
		   canWrite: true,
		   start: 1396994400000,
		   duration: 2,
		   end: 1397167199999,
		   startIsMilestone: false,
		   endIsMilestone: false,
		   collapsed: false,
		   assigs: [],
		   hasChild: false,
		 },
		 {
		   id: -4,
		   name: "editor part",
		   progress: 0,
		   progressByWorklog: false,
		   relevance: 0,
		   type: "",
		   typeId: "",
		   description: "",
		   code: "",
		   level: 2,
		   status: "STATUS_SUSPENDED",
		   depends: "3",
		   canWrite: true,
		   start: 1397167200000,
		   duration: 4,
		   end: 1397685599999,
		   startIsMilestone: false,
		   endIsMilestone: false,
		   collapsed: false,
		   assigs: [],
		   hasChild: false,
		 },
		 {
		   id: -5,
		   name: "testing",
		   progress: 30,
		   progressByWorklog: false,
		   relevance: 0,
		   type: "",
		   typeId: "",
		   description: "",
		   code: "",
		   level: 1,
		   status: "STATUS_SUSPENDED",
		   depends: "2:5",
		   canWrite: true,
		   start: 1398981600000,
		   duration: 5,
		   end: 1399586399999,
		   startIsMilestone: true,
		   endIsMilestone: true,
		   collapsed: false,
		   assigs: [],
		   hasChild: true,
		 },
		 {
		   id: -6,
		   name: "test on safari",
		   progress: 40,
		   progressByWorklog: false,
		   relevance: 0,
		   type: "",
		   typeId: "",
		   description: "",
		   code: "",
		   level: 2,
		   status: "STATUS_UNDEFINED",
		   depends: "",
		   canWrite: true,
		   start: 1398981600000,
		   duration: 2,
		   end: 1399327199999,
		   startIsMilestone: true,
		   endIsMilestone: true,
		   collapsed: false,
		   assigs: [],
		   hasChild: false,
		 },
		 {
		   id: -7,
		   name: "test on ie",
		   progress: 50,
		   progressByWorklog: false,
		   relevance: 0,
		   type: "",
		   typeId: "",
		   description: "",
		   code: "",
		   level: 2,
		   status: "STATUS_UNDEFINED",
		   depends: "6",
		   canWrite: true,
		   start: 1399327200000,
		   duration: 3,
		   end: 1399586399999,
		   startIsMilestone: true,
		   endIsMilestone: true,
		   collapsed: false,
		   assigs: [],
		   hasChild: false,
		 },
		 {
		   id: -8,
		   name: "test on chrome",
		   progress: 60,
		   progressByWorklog: false,
		   relevance: 0,
		   type: "",
		   typeId: "",
		   description: "",
		   code: "aaaa",
		   level: 2,
		   status: "STATUS_SUSPENDED",
		   depends: "6",
		   canWrite: true,
		   start: 1399327200000,
		   duration: 2,
		   end: 1399499999999,
		   startIsMilestone: true,
		   endIsMilestone: true,
		   collapsed: false,
		   assigs: [],
		   hasChild: false,
		 },
	];	    
</script>