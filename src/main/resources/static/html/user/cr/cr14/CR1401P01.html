<div class="popup_area of_a" style="width: 100%; height: 100%;">
	<div class="tit_contents">
		<h4 class="tit">수주 현황</h4>
	</div>
	
	<form id="popForm" onSubmit="return false;">
		<div class="form-group popup_table">
			<input type="hidden" id="fileTrgtKey" name="fileTrgtKey">
			<input type="hidden" id="userId"      name="userId">
			<input type="hidden" id="pgmId"       name="pgmId" value="CR1401M01">
			<table>
				<colgroup>
					<col width="11%">
					<col width="14%">
					<col width="11%">
					<col width="14%">
					<col width="11%">
					<col width="14%">
					<col width="11%">
					<col width="14%">
				</colgroup>
				<!-- 1행 -->
				<tr>
					<th>회사</th>
					<td>
                        <input type="hidden" id="coCd" name="coCd">						
						<input type="text"  id="coNm" name="coNm" readonly="readonly">
					</td>

					<th>수주번호</th>
					<td>
                        <input type="text"  id="ordrsNo" name="ordrsNo" readonly="readonly">
					</td>

                    <th>비교수주이력</th>
					<td>
						<!-- <select id="ordrsNoVer" name="ordrsNoVer" class="form-control input-sm" onchange="Modal_DataSearch()();">
                        </select> -->
                        <select id="ordrsNoVer" name="ordrsNoVer" class="form-control input-sm" onchange="Modal_DataSearch();">
						</select>
					</td>

					<!-- 빈값추가 -->
					<th></th>
					<th></th>
				</tr>
				
			</table>
		</div>
	</form>

    <div class="popup_table">
        <table style="border:0px;">
            <tr>
                <td style="text-align: LEFT; border-right: 0px;width:50%;">※수주정보</td>
                <td style="text-align: LEFT; border-right: 0px;width:50%;">※비교수주정보</td>
            </tr>
            
            <tr>
                <td style="text-align: LEFT; border-right: 0px;">
                    <div data-ax5grid="second-grid1" data-ax5grid-config="{}" style="height: 320px; width: 100%"></div>
                </td>
                
                <td style="text-align: LEFT; border-right: 0px;">
                    <div data-ax5grid="second-grid2" data-ax5grid-config="{}" style="height: 320px; width: 100%"></div>
                </td>
            </tr>

            <tr>
                <td style="text-align: LEFT; border-right: 0px;width:50%;">※수금계획정보</td>
                <td style="text-align: LEFT; border-right: 0px;width:50%;">※비교수금계획정보</td>
            </tr>
            
            <tr>
                <td style="text-align: LEFT; border-right: 0px;">
                    <div data-ax5grid="second-grid3" data-ax5grid-config="{}" style="height: 150px; width: 100%"></div>
                </td>
                
                <td style="text-align: LEFT; border-right: 0px;">
                    <div data-ax5grid="second-grid4" data-ax5grid-config="{}" style="height: 150px; width: 100%"></div>
                </td>
            </tr>

            <tr>
                <td style="text-align: LEFT; border-right: 0px;width:50%;">※상세정보</td>
                <td style="text-align: LEFT; border-right: 0px;width:50%;">※비교상세정보</td>
            </tr>
            
            <tr>
                <td style="text-align: LEFT; border-right: 0px;">
                    <div data-ax5grid="second-grid5" data-ax5grid-config="{}" style="height: 200px; width: 100%"></div>
                </td>
                
                <td style="text-align: LEFT; border-right: 0px;">
                    <div data-ax5grid="second-grid6" data-ax5grid-config="{}" style="height: 200px; width: 100%"></div>
                </td>
            </tr>
        </table>
    </div>

    <div class="popup_table" style="height: 50px; width: 100%"></div>
    
</div>

<!-- 하단 버튼 -->
<div class ="popup_bottom_btn">
	<button type="button" class="close_btn" onclick="modalStack.close();">닫기</button>
</div>

<script type="text/javascript">
	var fileTrgtKey = null;
    var coCd = null;
    var coNm = null;
    var ordrsNo = null;
    var salesCd = null;
    var MgridSize = 0;
    var DgridSize = 0;
	var beforeGridSize = 0; //수주상세그리드의 갯수용 그리드컨텐츠 높이조절용
	var detailArr   = []; // 상세 그리드내용

	var ModalgridView1 = {
		initView: function() {
			this.target = new ax5.ui.grid();
			this.target.setConfig({
				//frozenColumnIndex : 3,
				showLineNumber : false,
				// 체크박스
				//showRowSelector: true,
				multipleSelect : false,
				sortable       : false,
				target : $('[data-ax5grid="second-grid1"]'),
				header : {
					align   : "center",
					selector: false
				},
				
				body : {
					onClick: function () {
					},
					onDBLClick: function () {
						//this.self.select(this.dindex);
					},
					onDataChanged: function () {
					},
				},
				
				page : {
					navigationItemCount: 9,
					height: 30,
					display: true,
					firstIcon: '<i class="fa fa-step-backward" aria-hidden="true"></i>',
					prevIcon: '<i class="fa fa-caret-left" aria-hidden="true"></i>',
					nextIcon: '<i class="fa fa-caret-right" aria-hidden="true"></i>',
					lastIcon: '<i class="fa fa-step-forward" aria-hidden="true"></i>',
					onChange: function () {
						ModalgridView1.setData(this.page.selectPage);
					}
				},
				
				columns : [
                    {key: "col01"  , label: "수주항목", align: "left", width: 120},
                    {key: "colnm01", label: "수주내용", align: "left", width: 250},
                    {key: "col02"  , label: "수주항목", align: "left", width: 120},
                    {key: "colnm02", label: "수주내용", align: "left", width: 250},
				]
			});
			return this;
		},
		
		setData: function(_pageNo) {
			var targetObj = this.target;
			var coCd = $('#coCd').val();
			
			var formData = new FormData();
            formData = {
                "coCd": $('#coCd').val(),
                "ordrsNo": $('#ordrsNo').val()
            }
            // debugger;
            postAjax("/user/cr/cr14/select_modal_List1", formData, null, function(data) {
                var list = data.result;
                // debugger;
                // gridResize(list.length); //그리드 높이 조정
                targetObj.setData({
                    list : list,
                    page : {
                        totalElements: list.length
                    }
                });
            });
		}
	}

    var ModalgridView2 = {
		initView: function() {
			this.target = new ax5.ui.grid();
			this.target.setConfig({
				//frozenColumnIndex : 3,
				showLineNumber : false,
				// 체크박스
				//showRowSelector: true,
				multipleSelect : false,
				sortable       : false,
				target : $('[data-ax5grid="second-grid2"]'),
				header : {
					align   : "center",
					selector: false
				},
				
				body : {
					onClick: function () {
					},
					onDBLClick: function () {
						//this.self.select(this.dindex);
					},
					onDataChanged: function () {
					},
				},
				
				page : {
					navigationItemCount: 9,
					height: 30,
					display: true,
					firstIcon: '<i class="fa fa-step-backward" aria-hidden="true"></i>',
					prevIcon: '<i class="fa fa-caret-left" aria-hidden="true"></i>',
					nextIcon: '<i class="fa fa-caret-right" aria-hidden="true"></i>',
					lastIcon: '<i class="fa fa-step-forward" aria-hidden="true"></i>',
					onChange: function () {
						ModalgridView1.setData(this.page.selectPage);
					}
				},
				
				columns : [
                    {key: "col01"  , label: "수주항목", align: "left", width: 120,
                        styleClass: function () {
                            if (this.item.cyn01 === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "colnm01", label: "수주내용", align: "left", width: 250,
                        styleClass: function () {
                            if (this.item.cyn01 === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "col02"  , label: "수주항목", align: "left", width: 120,
                        styleClass: function () {
                            if (this.item.cyn02 === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "colnm02", label: "수주내용", align: "left", width: 250,
                        styleClass: function () {
                            if (this.item.cyn02 === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
				]
			});
			return this;
		},
		
		setData: function(_pageNo) {
			var targetObj = this.target;
			var coCd = $('#coCd').val();
			var ordrsNoVer = $('#ordrsNoVer').val();
            if (ordrsNoVer == null || ordrsNoVer == "") {
                ordrsNoVer = "1";
            }
            
            var formData = new FormData();
            formData = {
                "coCd": $('#coCd').val(),
                "ordrsNo": $('#ordrsNo').val(),
                "histNo": ordrsNoVer
            }
            // debugger;
            postAjax("/user/cr/cr14/select_modal_List2", formData, null, function(data) {
                var list = data.result;
                // debugger;
                // gridResize(list.length); //그리드 높이 조정
                targetObj.setData({
                    list : list,
                    page : {
                        totalElements: list.length
                    }
                });
            });
		}
	}

    var ModalgridView3 = {
		initView: function() {
			this.target = new ax5.ui.grid();
			this.target.setConfig({
				//frozenColumnIndex : 3,
				showLineNumber : true,
				// 체크박스
				//showRowSelector: true,
				multipleSelect : false,
				sortable       : false,
				target : $('[data-ax5grid="second-grid3"]'),
				header : {
					align   : "center",
					selector: false
				},
				
				body : {
					mergeCells : ["clmnPlanDivNm"],
					onClick: function () {
					},
					onDBLClick: function () {
						//this.self.select(this.dindex);
					},
					onDataChanged: function () {
					},
				},
				
				page : {
					navigationItemCount: 9,
					height: 30,
					display: true,
					firstIcon: '<i class="fa fa-step-backward" aria-hidden="true"></i>',
					prevIcon: '<i class="fa fa-caret-left" aria-hidden="true"></i>',
					nextIcon: '<i class="fa fa-caret-right" aria-hidden="true"></i>',
					lastIcon: '<i class="fa fa-step-forward" aria-hidden="true"></i>',
					onChange: function () {
						ModalgridView3.setData(this.page.selectPage);
					}
				},
				
				columns : [
                    {key: "clmnPlanDivNm"  , label: "수금구분"                      , align: "center", width: 70},
                    {key: "clmnDivSeq"     , label: "차수"                          , align: "center", width: 50},
                    {key: "clmnRate"       , label: "비율"                          , align: "center", width: 60},
                    {key: "clmnAmt"        , label: "수금계획금액"                   , align: "right" , width: 100, formatter: "money"},
                    {key: "clmnDt"         , label: "수금예정일자"                   , align: "center", width: 80},
                    {key: "pmntDtAfterBill", label: "계산서 발행 후 지급시기(단위:일)", align: "center", width: 180},
                    {key: "billPblsDt"     , label: "계산서발행예정일"               , align: "center", width: 100},
                    {key: "clmnMgmtStatus" , label: "수금관리상황"                   , align: "left"  , width: 100}
				],
                
                footSum: [
                    [
                        {label: "[ 합계 ]", 	  align:"center",	  colspan : 3},
						{key: "clmnAmt" , collector: "sum", formatter: "money", align: "right"},
						{}, {}, {},{}
			    	]
			    ]
			});
			return this;
		},
		
		setData: function(_pageNo) {
			var targetObj = this.target;
            var formData = new FormData();
            formData = {
                "coCd": $('#coCd').val(),
                "ordrsNo": $('#ordrsNo').val()
            }
            // debugger;
            postAjax("/user/cr/cr14/select_modal_List3", formData, null, function(data) {
                var list = data.result;
                // debugger;
                MgridSize = list.length;
                MgridResize(list.length); //그리드 높이 조정
                targetObj.setData({
                    list : list,
                    page : {
                        totalElements: list.length
                    }
                });
            });
		}
	}

    var ModalgridView4 = {
		initView: function() {
			this.target = new ax5.ui.grid();
			this.target.setConfig({
				//frozenColumnIndex : 3,
				showLineNumber : true,
				// 체크박스
				//showRowSelector: true,
				multipleSelect : false,
				sortable       : false,
				target : $('[data-ax5grid="second-grid4"]'),
				header : {
					align   : "center",
					selector: false
				},
				
				body : {
					mergeCells : ["clmnPlanDivNm"],
					onClick: function () {
					},
					onDBLClick: function () {
						//this.self.select(this.dindex);
					},
					onDataChanged: function () {
					},
				},
				
				page : {
					navigationItemCount: 9,
					height: 30,
					display: true,
					firstIcon: '<i class="fa fa-step-backward" aria-hidden="true"></i>',
					prevIcon: '<i class="fa fa-caret-left" aria-hidden="true"></i>',
					nextIcon: '<i class="fa fa-caret-right" aria-hidden="true"></i>',
					lastIcon: '<i class="fa fa-step-forward" aria-hidden="true"></i>',
					onChange: function () {
						ModalgridView3.setData(this.page.selectPage);
					}
				},
				
				columns : [
                    {key: "clmnPlanDivNm", label: "수금구분", align: "center", width: 70,
                        styleClass: function () {
                            if (this.item.clmnPlanDivYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "clmnDivSeq", label: "차수", align: "center", width: 50,
                        styleClass: function () {
                            if (this.item.clmnDivSeqYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "clmnRate", label: "비율", align: "center", width: 60,
                        styleClass: function () {
                            if (this.item.clmnRateYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "clmnAmt", label: "수금계획금액", align: "right" , width: 100, formatter: "money",
                        styleClass: function () {
                            if (this.item.clmnAmtYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "clmnDt", label: "수금예정일자", align: "center", width: 80,
                        styleClass: function () {
                            if (this.item.clmnDtYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "pmntDtAfterBill", label: "계산서 발행 후 지급시기(단위:일)", align: "center", width: 180,
                        styleClass: function () {
                            if (this.item.pmntDtAfterBillYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "billPblsDt", label: "계산서발행예정일", align: "center", width: 100,
                        styleClass: function () {
                            if (this.item.billPblsDtYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "clmnMgmtStatus", label: "수금관리상황", align: "left"  , width: 100,
                        styleClass: function () {
                            if (this.item.clmnMgmtStatusYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    }
				],

                footSum: [
                    [
                        {label: "[ 합계 ]", 	  align:"center",	  colspan : 3},
						{key: "clmnAmt" , collector: "sum", formatter: "money", align: "right"},
						{}, {}, {},{}
			    	]
			    ]
			});
			return this;
		},
		
		setData: function(_pageNo) {
			var targetObj = this.target;
			var ordrsNoVer = $('#ordrsNoVer').val();
            if (ordrsNoVer == null || ordrsNoVer == "") {
                ordrsNoVer = "1";
            }
            
            var formData = new FormData();
            formData = {
                "coCd": $('#coCd').val(),
                "ordrsNo": $('#ordrsNo').val(),
                "histNo": ordrsNoVer
            }
            // debugger;
            postAjax("/user/cr/cr14/select_modal_List4", formData, null, function(data) {
                var list = data.result;
                // debugger;
                if (MgridSize < list.length) {
                    MgridSize = list.length;
                }
                
                MgridResize(MgridSize); //그리드 높이 조정
                targetObj.setData({
                    list : list,
                    page : {
                        totalElements: list.length
                    }
                });
            });
		}
	}

    var ModalgridView5 = {
		initView: function() {
			this.target = new ax5.ui.grid();
			this.target.setConfig({
				//frozenColumnIndex : 3,
				showLineNumber : true,
				// 체크박스
				//showRowSelector: true,
				multipleSelect : false,
				sortable       : false,
				target : $('[data-ax5grid="second-grid5"]'),
				header : {
					align   : "center",
					selector: true
				},
				
				body : {
					mergeCells : ["ordrsDtlDiv10Nm"],
					onClick: function () {
					},
					onDBLClick: function () {
						//this.self.select(this.dindex);
					},
					onDataChanged: function () {
					},
				},
				
				page : {
					navigationItemCount: 9,
					height: 30,
					display: true,
					firstIcon: '<i class="fa fa-step-backward" aria-hidden="true"></i>',
					prevIcon: '<i class="fa fa-caret-left" aria-hidden="true"></i>',
					nextIcon: '<i class="fa fa-caret-right" aria-hidden="true"></i>',
					lastIcon: '<i class="fa fa-step-forward" aria-hidden="true"></i>',
					onChange: function () {
						ModalgridView5.setData(this.page.selectPage);
					}
				},
				
				columns : [
					{key: "ordrsDtlDiv10Nm", label: "구분", align: "center", width: 60},
                    {key: "prdtCd", label: "제품구분", align: "center", width: 60},
                    {key: "itemDivNm", label: "아이템구분", align: "center", width: 100},
                    {key: "ordrsDtlDiv20Nm", label: "작업구분", align: "center", width: 60},
                    {key: "ordrsDtlDiv30Nm", label: "자체구분", align: "center", width: 60},
                    {key: "mctypeNm", label: "기계구분", align: "center", width: 60},
                    {key: "eqpNm", label: "설비명", align: "left", width: 150},
                    {key: "dudtIntendDt", label: "납기예정일", align: "center", width: 80},

					{key: undefined, label: "수주가",
						columns: [
							{key: "ordrsPrcMach", label: "기계Part", align: "right" , formatter: "money", width: 90},
							{key: "ordrsPrcElcty", label: "전기Part", align: "right" , formatter: "money", width: 90},
							{key: "ordrsPrc", label: "합계", align: "right" , formatter: "money", width: 90}
						]
					},
                    {key: "ordrsQty", label: "수량", align: "right", width: 60},
                    {key: "estEpctMatPrc", label: "견적 예상<br>재료비",  formatter: "money", align: "right", width: 90},
                    {key: undefined, label: "목표구매원가",
						columns: [
							{key: undefined, label: "목표구매원가",
								columns: [
									{key: "trgtPchsPcostMach" , label: "기계", formatter: "money", align: "right", width: 90},
									{key: "trgtPchsPcostElcty", label: "전기", formatter: "money", align: "right", width: 90},
									{key: "trgtPchsPcostTot"  , label: "합계", formatter: "money", align: "right", width: 90}
								]
							},
							{key: undefined, label: "자체가공 투입 시 기계부문 목표원가",
								columns: [
									{key: "trgtPchsPcostInHousePrcsn", label: "자체가공",  formatter: "money", align: "right", width: 90},
									{key: "trgtPchsPcostMach2", label: "차감 후 기계값",  formatter: "money", align: "right", width: 90}
								]
							}
						]
					},
//                     {key: undefined, label: "실집행원가",
// 						columns: [
// 							{key: "laborCostMfgCost", label: "노무비 및 제조경비<br>(판관비 제외)", align: "right" , formatter: "money", width: 110}
// 						]
// 					},
                    {key: "dtlRmk", label: "비고", align: "left", width: 150}
				],

                footSum: [
                    [
                        {label: "[ 합계 ]", align:"center", colspan : 8},
						{key: "ordrsPrcMach" , collector: "sum", formatter: "money", align: "right"},
                        {key: "ordrsPrcElcty" , collector: "sum", formatter: "money", align: "right"},
                        {key: "ordrsPrc" , collector: "sum", formatter: "money", align: "right"},
                        {key: "ordrsQty" , collector: "sum", formatter: "money", align: "right"},
                        {key: "estEpctMatPrc" , collector: "sum", formatter: "money", align: "right"},
                        {key: "trgtPchsPcostMach" , collector: "sum", formatter: "money", align: "right"},
                        {key: "trgtPchsPcostElcty" , collector: "sum", formatter: "money", align: "right"},
                        {key: "trgtPchsPcostTot" , collector: "sum", formatter: "money", align: "right"},
                        {key: "trgtPchsPcostInHousePrcsn" , collector: "sum", formatter: "money", align: "right"},
                        {key: "trgtPchsPcostMach2" , collector: "sum", formatter: "money", align: "right"},
//                         {key: "laborCostMfgCost" , collector: "sum", formatter: "money", align: "right"},
						{}
			    	]
			    ]
			});
			return this;
		},
		
		setData: function(_pageNo) {
			var targetObj = this.target;
            var formData = new FormData();
            formData = {
                "coCd": $('#coCd').val(),
                "ordrsNo": $('#ordrsNo').val()
            }
            // debugger;
            postAjax("/user/cr/cr14/select_modal_List5", formData, null, function(data) {
                var list = data.result;
                DgridSize = list.length;
                DgridResize(list.length); //그리드 높이 조정
                targetObj.setData({
                    list : list,
                    page : {
                        totalElements: list.length
                    }
                });
            });
		}
	}

    var ModalgridView6 = {
		initView: function() {
			this.target = new ax5.ui.grid();
			this.target.setConfig({
				//frozenColumnIndex : 3,
				showLineNumber : true,
				// 체크박스
				//showRowSelector: true,
				multipleSelect : false,
				sortable       : false,
				target : $('[data-ax5grid="second-grid6"]'),
				header : {
					align   : "center",
					selector: false
				},
				
				body : {
					mergeCells : ["ordrsDtlDiv10Nm"],
					onClick: function () {
					},
					onDBLClick: function () {
						//this.self.select(this.dindex);
					},
					onDataChanged: function () {
					},
				},
				
				page : {
					navigationItemCount: 9,
					height: 30,
					display: true,
					firstIcon: '<i class="fa fa-step-backward" aria-hidden="true"></i>',
					prevIcon: '<i class="fa fa-caret-left" aria-hidden="true"></i>',
					nextIcon: '<i class="fa fa-caret-right" aria-hidden="true"></i>',
					lastIcon: '<i class="fa fa-step-forward" aria-hidden="true"></i>',
					onChange: function () {
						ModalgridView6.setData(this.page.selectPage);
					}
				},
				
				columns : [
				    {key: "ordrsDtlDiv10Nm", label: "구분", align: "center", width: 60,
                        styleClass: function () {
                            if (this.item.ordrsDtlDiv10Yn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "prdtCd", label: "제품구분", align: "center", width: 60,
                        styleClass: function () {
                            if (this.item.prdtCdYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "itemDivNm", label: "아이템구분", align: "center", width: 100,
                        styleClass: function () {
                            if (this.item.itemDivYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "ordrsDtlDiv20Nm", label: "작업구분", align: "center", width: 60,
                        styleClass: function () {
                            if (this.item.ordrsDtlDiv20Yn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "ordrsDtlDiv30Nm", label: "자체구분", align: "center", width: 60,
                        styleClass: function () {
                            if (this.item.ordrsDtlDiv30Yn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "mctypeNm", label: "기계구분", align: "center", width: 60,
                        styleClass: function () {
                            if (this.item.mctypeYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "eqpNm", label: "설비명", align: "left", width: 150,
                        styleClass: function () {
                            if (this.item.eqpNmYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "dudtIntendDt", label: "납기예정일", align: "center", width: 80,
                        styleClass: function () {
                            if (this.item.dudtIntendDtYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },

					{key: undefined, label: "수주가",
						columns: [
							{key: "ordrsPrcMach", label: "기계Part", align: "right" , formatter: "money", width: 90,
                                styleClass: function () {
                                    if (this.item.ordrsPrcMachYn === "N") {
                                        styleClass = "grid-cell-red";
                                    } else {
                                        styleClass = "";
                                    }
                                    return styleClass;
                                },
                            },
							{key: "ordrsPrcElcty", label: "전기Part", align: "right" , formatter: "money", width: 90,
                                styleClass: function () {
                                    if (this.item.ordrsPrcElctyYn === "N") {
                                        styleClass = "grid-cell-red";
                                    } else {
                                        styleClass = "";
                                    }
                                    return styleClass;
                                },
                            },
							{key: "ordrsPrc", label: "합계", align: "right" , formatter: "money", width: 90,
                                styleClass: function () {
                                    if (this.item.ordrsPrcYn === "N") {
                                        styleClass = "grid-cell-red";
                                    } else {
                                        styleClass = "";
                                    }
                                    return styleClass;
                                },
                            },
						]
					},
                    {key: "ordrsQty", label: "수량", align: "right", width: 60,
                        styleClass: function () {
                            if (this.item.ordrsQtyYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: "estEpctMatPrc", label: "견적 예상<br>재료비",  formatter: "money", align: "right", width: 90,
                        styleClass: function () {
                            if (this.item.estEpctMatPrcYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    },
                    {key: undefined, label: "목표구매원가",
						columns: [
							{key: undefined, label: "목표구매원가",
								columns: [
									{key: "trgtPchsPcostMach" , label: "기계", formatter: "money", align: "right", width: 90,
                                        styleClass: function () {
                                            if (this.item.trgtPchsPcostMachYn === "N") {
                                                styleClass = "grid-cell-red";
                                            } else {
                                                styleClass = "";
                                            }
                                            return styleClass;
                                        },
                                    },
									{key: "trgtPchsPcostElcty", label: "전기", formatter: "money", align: "right", width: 90,
                                        styleClass: function () {
                                            if (this.item.trgtPchsPcostElctyYn === "N") {
                                                styleClass = "grid-cell-red";
                                            } else {
                                                styleClass = "";
                                            }
                                            return styleClass;
                                        },
                                    },
									{key: "trgtPchsPcostTot"  , label: "합계", formatter: "money", align: "right", width: 90,
                                        styleClass: function () {
                                            if (this.item.trgtPchsPcostTotYn === "N") {
                                                styleClass = "grid-cell-red";
                                            } else {
                                                styleClass = "";
                                            }
                                            return styleClass;
                                        },
                                    },
								]
							},
							{key: undefined, label: "자체가공 투입 시 기계부문 목표원가",
								columns: [
									{key: "trgtPchsPcostInHousePrcsn", label: "자체가공",  formatter: "money", align: "right", width: 90,
                                        styleClass: function () {
                                            if (this.item.trgtPchsPcostInHousePrcsnYn === "N") {
                                                styleClass = "grid-cell-red";
                                            } else {
                                                styleClass = "";
                                            }
                                            return styleClass;
                                        },
                                    },
									{key: "trgtPchsPcostMach2", label: "차감 후 기계값",  formatter: "money", align: "right", width: 90,
                                        styleClass: function () {
                                            if (this.item.trgtPchsPcostMach2Yn === "N") {
                                                styleClass = "grid-cell-red";
                                            } else {
                                                styleClass = "";
                                            }
                                            return styleClass;
                                        },
                                    },
								]
							}
						]
					},
//                     {key: undefined, label: "실집행원가",
// 						columns: [
// 							{key: "laborCostMfgCost", label: "노무비 및 제조경비<br>(판관비 제외)", align: "right" , formatter: "money", width: 110,
//                                 styleClass: function () {
//                                     if (this.item.laborCostMfgCostYn === "N") {
//                                         styleClass = "grid-cell-red";
//                                     } else {
//                                         styleClass = "";
//                                     }
//                                     return styleClass;
//                                 },
//                             },
// 						]
// 					},
                    {key: "dtlRmk", label: "비고", align: "left", width: 150,
                        styleClass: function () {
                            if (this.item.dtlRmkYn === "N") {
                                styleClass = "grid-cell-red";
							} else {
								styleClass = "";
							}
							return styleClass;
						},
                    }
				],

                footSum: [
                    [
                        {label: "[ 합계 ]", align:"center", colspan : 8},
						{key: "ordrsPrcMach" , collector: "sum", formatter: "money", align: "right"},
                        {key: "ordrsPrcElcty" , collector: "sum", formatter: "money", align: "right"},
                        {key: "ordrsPrc" , collector: "sum", formatter: "money", align: "right"},
                        {key: "ordrsQty" , collector: "sum", formatter: "money", align: "right"},
                        {key: "estEpctMatPrc" , collector: "sum", formatter: "money", align: "right"},
                        {key: "trgtPchsPcostMach" , collector: "sum", formatter: "money", align: "right"},
                        {key: "trgtPchsPcostElcty" , collector: "sum", formatter: "money", align: "right"},
                        {key: "trgtPchsPcostTot" , collector: "sum", formatter: "money", align: "right"},
                        {key: "trgtPchsPcostInHousePrcsn" , collector: "sum", formatter: "money", align: "right"},
                        {key: "trgtPchsPcostMach2" , collector: "sum", formatter: "money", align: "right"},
//                         {key: "laborCostMfgCost" , collector: "sum", formatter: "money", align: "right"},
						{}
			    	]
			    ]
			});
			return this;
		},
		
		setData: function(_pageNo) {
			var targetObj = this.target;
			var ordrsNoVer = $('#ordrsNoVer').val();
            if (ordrsNoVer == null || ordrsNoVer == "") {
                ordrsNoVer = "1";
            }
            
            var formData = new FormData();
            formData = {
                "coCd": $('#coCd').val(),
                "ordrsNo": $('#ordrsNo').val(),
                "histNo": ordrsNoVer
            }
            // debugger;
            postAjax("/user/cr/cr14/select_modal_List6", formData, null, function(data) {
                var list = data.result;
                // debugger;
                if (DgridSize < list.length) {
                    DgridSize = list.length;
                }
                
                DgridResize(DgridSize); //그리드 높이 조정
                targetObj.setData({
                    list : list,
                    page : {
                        totalElements: list.length
                    }
                });
            });
		}
	}
	
	//화면 초기 설정
	$(document).ready(function() {
		setCommonSelect($(".popup_area select[data-kind]"));
		setByCoCd(modalStack.last().paramObj.coCd);

		$("#popForm #userId").val(jwt.userId);
		
		ModalgridView1.initView();
        ModalgridView2.initView();
        ModalgridView3.initView();
        ModalgridView4.initView();
        ModalgridView5.initView();
        ModalgridView6.initView();
		
		// // 창고 콤보 설정
		// ModalgetWhNm("outWhCd");
		// ModalgetWhNm("inWhCd");
		
		fileTrgtKey = modalStack.last().paramObj.fileTrgtKey;
        coCd = modalStack.last().paramObj.coCd;
        coNm = modalStack.last().paramObj.coNm;
        ordrsNo = modalStack.last().paramObj.ordrsNo;
        salesCd = modalStack.last().paramObj.salesCd;

        $("#coCd").val(coCd);
        $("#coNm").val(coNm);
        $("#ordrsNo").val(ordrsNo);
        
        var paramObj;
        paramObj = {
            "coCd" 	  : $('#coCd').val(),
			"ordrsNo" : $('#ordrsNo').val()
        };
        postAjax("/user/cr/cr14/select_ordrsHistNo_List", paramObj, null, function(data) {
            var row = data.result;
            for (var i = 0; i < row.length; i++) {
                $('#ordrsNoVer').append($('<option>', {
                    value : row[i].histNo,
                    text  : row[i].histNm
                }));
            }
        });

        Modal_DataSearch();
        
        authChk(); //권한체크
	});
	
	// //입력정보
	// function select_cr07_Info() {
	// 	var formData = {
	// 		"fileTrgtKey" : fileTrgtKey,
	// 	}
		
	// 	postAjaxSync("/user/cr/cr07/select_cr07_Info", formData, null, function(data) {
	// 		$.each(data.result, function(key, value) {
	// 			if ($('#popForm #' + key)[0]) {
	// 				$('#popForm #' + key).val(value);
					
	// 				if ($('#popForm #' + key).is('[comma]')) {
	// 					onlyNumber($('#popForm #' + key)[0]);
	// 				}
	// 			}
	// 		});
	// 		//debugger;
	// 	});
	// 	ModalgridView1.setData(0);
	// }

	function MgridResize(size) {
		// debugger;
	    var tagHeight = ((size) * 30) + 90 ;
		tagHeight = tagHeight > 150 ? tagHeight : 150;
		
		$('[data-ax5grid="second-grid3"]').height(tagHeight);
		$('[data-ax5grid="second-grid3"] [data-ax5grid-container="root"]').height(tagHeight);
        $('[data-ax5grid="second-grid4"]').height(tagHeight);
		$('[data-ax5grid="second-grid4"] [data-ax5grid-container="root"]').height(tagHeight);
	}

    function DgridResize(size) {
		// debugger;
	    var tagHeight = ((size) * 30) + 90 ;
		tagHeight = tagHeight > 200 ? tagHeight : 200;
		
		$('[data-ax5grid="second-grid5"]').height(tagHeight);
		$('[data-ax5grid="second-grid5"] [data-ax5grid-container="root"]').height(tagHeight);
        $('[data-ax5grid="second-grid6"]').height(tagHeight);
		$('[data-ax5grid="second-grid6"] [data-ax5grid-container="root"]').height(tagHeight);
	}

	// 팝업 그리드 조회
	function Modal_DataSearch() {
		ModalgridView1.setData(0);
        ModalgridView2.setData(0);
        ModalgridView3.setData(0);
        ModalgridView4.setData(0);
        ModalgridView5.setData(0);
        ModalgridView6.setData(0);
	}

	// // 환율체크
	// function Chk_Exrate() {
	// 	var currCd = $('#currCd').val();

	// 	//원화인 경우 1 고정
	// 	if (currCd == 'CURR01') {
	// 		$("#popForm #exrate").val("1");
	// 	}
	// }

	// // 통화단위 체크
	// function Chk_currCd() {
	// 	var currCd = $('#currCd').val();

	// 	//원화인 경우 1 고정
	// 	if (currCd == 'CURR01') {
	// 		$("#popForm #exrate").val("1");
	// 	}
	// 	Modal_DataSearch();
	// }
	
	function setByCoCd(value) {
		$('#coCd option:not([value="'+value+'"])').remove();
	}

</script>